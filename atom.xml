<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Bianle&#39;s Blog</title>
  <subtitle>The quieter you become, the more you are able to hear.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://2le.me/"/>
  <updated>2017-01-16T07:03:57.000Z</updated>
  <id>http://2le.me/</id>
  
  <author>
    <name>bianle</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>简单的LNMT环境搭建</title>
    <link href="http://2le.me/2017/01/14/lnmt/"/>
    <id>http://2le.me/2017/01/14/lnmt/</id>
    <published>2017-01-14T13:50:09.000Z</published>
    <updated>2017-01-16T07:03:57.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="架构"><a class="header-anchor" href="#架构"> </a>架构</h2>
<ol>
<li>负载均衡服务器x1</li>
<li>web服务器x2</li>
<li>应用服务器x2</li>
<li>数据库服务器x2</li>
<li>文件服务器x1</li>
<li>缓存服务器x1</li>
</ol>
<p>简化安装2个web服务器和2个应用服务器部署在2台物理机，主数据库服务器和缓存服务器部署在1台服务器，文件服务器不单独部署，搭了4台2c4g的centos7系统机器（<em>实际应用中不同角色的服务器对硬件资源要求各不相同，应用服务器需要处理大量的业务逻辑， 因此需要更快更强大的CPU；数据库服务器需要快速磁盘检索和数据缓存，因此需要更快的硬盘和更大的内存；文件服务器需要存储大量用户上传的文件，因此需要更大的硬盘</em>）。</p>
<h2 id="部署图"><a class="header-anchor" href="#部署图"> </a>部署图</h2>
<figure class="highlight gherkin"><table><tr><td class="code"><pre><div class="line">                                              +-----------------------+</div><div class="line">                                              |<span class="string">dsn-db01(10.1.0.6)     </span>|</div><div class="line">                                              |<span class="string">                       </span>|</div><div class="line">                                              |<span class="string">    +-------------+    </span>|</div><div class="line">                                session manage|<span class="string">    </span>|<span class="string">             </span>|<span class="string">    </span>|</div><div class="line">                                         +---------&gt; redis3.2.6  |<span class="string">    </span>|</div><div class="line">+-----------------------------------+    |<span class="string">    </span>|<span class="string">    </span>|<span class="string">             </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> dsn-app01(10.1.0.8)               </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">    +-------------+    </span>|</div><div class="line">|<span class="string">                                   </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">                       </span>|</div><div class="line">|<span class="string"> +-------------+   +-------------+ </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">    +-------------+    </span>|</div><div class="line">|<span class="string"> </span>|<span class="string">             </span>|<span class="string">   </span>|<span class="string">             </span>|<span class="string"> </span>|<span class="string">    </span>|<span class="string">persist  </span>|<span class="string">             </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> </span>|<span class="string"> nginx1.10.2 +-+-&gt; tomcat7     +------+---------&gt; mysql5.7(m) </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> </span>|<span class="string">             </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">             </span>|<span class="string"> </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">             </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> +-------------+ </span>|<span class="string"> +-------------+ </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">    +-----+-^-----+    </span>|</div><div class="line">|<span class="string">                 </span>|<span class="string">                 </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">          </span>|<span class="string"> </span>|<span class="string">          </span>|</div><div class="line">+-----------------------------------+    |<span class="string">    +-----------------------+</span></div><div class="line">                  |<span class="string">                      </span>|<span class="string">               </span>|<span class="string"> </span>|<span class="string"> sync</span></div><div class="line">                  |<span class="string">proxy_pass            </span>|<span class="string">               </span>|<span class="string"> </span>|</div><div class="line">                  |<span class="string">                      </span>|<span class="string">               </span>|<span class="string"> </span>|</div><div class="line">                  |<span class="string">                      </span>|<span class="string">               </span>|<span class="string"> </span>|</div><div class="line">+-----------------------------------+    |<span class="string">    +-----------------------+</span></div><div class="line">|<span class="string"> dsn-app02(10.1.0.9)               </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">dsn-db02  </span>|<span class="string"> </span>|<span class="string">          </span>|</div><div class="line">|<span class="string">                 </span>|<span class="string">                 </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">(10.1.0.7)</span>|<span class="string"> </span>|<span class="string">          </span>|</div><div class="line">|<span class="string"> +-------------+ </span>|<span class="string"> +-------------+ </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">    +-----v-+-----+    </span>|</div><div class="line">|<span class="string"> </span>|<span class="string">             </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">             </span>|<span class="string"> </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">    </span>|<span class="string">             </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> </span>|<span class="string"> nginx1.10.2 +-+-&gt; tomcat7     +------+    </span>|<span class="string">    </span>|<span class="string"> mysql5.7(s) </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> </span>|<span class="string">             </span>|<span class="string">   </span>|<span class="string">             </span>|<span class="string"> </span>|<span class="string">         </span>|<span class="string">    </span>|<span class="string">             </span>|<span class="string">    </span>|</div><div class="line">|<span class="string"> +-------------+   +-------------+ </span>|<span class="string">         </span>|<span class="string">    +-------------+    </span>|</div><div class="line">|<span class="string">                                   </span>|<span class="string">         </span>|<span class="string">                       </span>|</div><div class="line">+-----------------------------------+         +-----------------------+</div></pre></td></tr></table></figure>
<h2 id="准备介质"><a class="header-anchor" href="#准备介质"> </a>准备介质</h2>
<h2 id="安装步骤"><a class="header-anchor" href="#安装步骤"> </a>安装步骤</h2>
<h3 id="linux安装"><a class="header-anchor" href="#linux安装"> </a><strong>l</strong>inux安装</h3>
<p>centos6或7</p>
<h3 id="nginx安装"><a class="header-anchor" href="#nginx安装"> </a>nginx安装</h3>
<ol start="0">
<li>安装编译环境</li>
</ol>
<figure class="highlight brainfuck"><table><tr><td class="code"><pre><div class="line"><span class="comment">yum</span> <span class="comment">install</span> <span class="comment">gcc</span> <span class="comment">gcc</span><span class="literal">-</span><span class="comment">c</span><span class="literal">+</span><span class="literal">+</span> <span class="comment">make</span> <span class="comment">cmake</span> <span class="comment">autoconf</span> <span class="comment">zlib</span> <span class="comment">zlib</span><span class="literal">-</span><span class="comment">devel</span></div></pre></td></tr></table></figure>
<ol>
<li>解压源码包</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">tar</span> <span class="selector-tag">xzf</span> <span class="selector-tag">openssl-1</span><span class="selector-class">.0</span><span class="selector-class">.2j</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line"><span class="selector-tag">tar</span> <span class="selector-tag">xzf</span> <span class="selector-tag">nginx-1</span><span class="selector-class">.10</span><span class="selector-class">.2</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div><div class="line"><span class="selector-tag">tar</span> <span class="selector-tag">xzf</span> <span class="selector-tag">pcre-8</span><span class="selector-class">.39</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div></pre></td></tr></table></figure>
<ol start="2">
<li>安装jemalloc</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">yum install bzip2</div><div class="line">tar xjf jemalloc-<span class="number">4.4</span>.<span class="number">0</span><span class="selector-class">.tar</span><span class="selector-class">.bz2</span></div><div class="line">cd jemaloc-<span class="number">4.4</span>.<span class="number">0</span></div><div class="line">./configure</div><div class="line">make &amp;&amp; make install</div><div class="line">ln -s /usr/local/lib/libjemalloc<span class="selector-class">.so</span>.<span class="number">2</span> /usr/lib64/libjemalloc<span class="selector-class">.so</span>.<span class="number">1</span></div><div class="line">echo <span class="string">'/usr/local/lib'</span> &gt; /etc/ld<span class="selector-class">.so</span><span class="selector-class">.conf</span><span class="selector-class">.d</span>/local<span class="selector-class">.conf</span></div><div class="line">ldconfig</div></pre></td></tr></table></figure>
<ol start="3">
<li>安装pcre</li>
</ol>
<figure class="highlight vim"><table><tr><td class="code"><pre><div class="line"><span class="keyword">cd</span> pcre-<span class="number">8.39</span></div><div class="line">./configure</div><div class="line"><span class="keyword">make</span> &amp;&amp; <span class="keyword">make</span> install</div></pre></td></tr></table></figure>
<ol start="3">
<li>添加用户</li>
</ol>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">groupadd www <span class="comment">##创建用户组</span></div><div class="line">useradd -s <span class="regexp">/sbin/</span>nologin -g www -M www <span class="comment">##创建一个用户，不允许登录不创建主目录</span></div></pre></td></tr></table></figure>
<ol start="3">
<li>编译安装</li>
</ol>
<figure class="highlight brainfuck"><table><tr><td class="code"><pre><div class="line"><span class="string">.</span><span class="comment">/configure</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">prefix=/opt/nginx</span><span class="literal">-</span><span class="comment">1</span><span class="string">.</span><span class="comment">10</span><span class="string">.</span><span class="comment">2</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">user=www</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">group=www</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_stub_status_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_v2_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_ssl_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_gzip_static_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_realip_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_flv_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">http_mp4_module</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">openssl=</span><span class="string">.</span><span class="string">.</span><span class="comment">/openssl</span><span class="literal">-</span><span class="comment">1</span><span class="string">.</span><span class="comment">0</span><span class="string">.</span><span class="comment">2j</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">pcre=</span><span class="string">.</span><span class="string">.</span><span class="comment">/pcre</span><span class="literal">-</span><span class="comment">8</span><span class="string">.</span><span class="comment">39</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">pcre</span><span class="literal">-</span><span class="comment">jit</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">with</span><span class="literal">-</span><span class="comment">ld</span><span class="literal">-</span><span class="comment">opt='</span><span class="literal">-</span><span class="comment">ljemalloc'</span></div><div class="line"><span class="comment">make</span> <span class="comment">&amp;&amp;</span> <span class="comment">make</span> <span class="comment">install</span></div></pre></td></tr></table></figure>
<h3 id="mysql安装"><a class="header-anchor" href="#mysql安装"> </a>mysql安装</h3>
<ol>
<li>下载mysql5.7源码</li>
</ol>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">wget https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/mysql/</span>downloads<span class="regexp">/MySQL-5.7/my</span>sql-<span class="number">5.7</span>.<span class="number">17</span>.tar.gz</div></pre></td></tr></table></figure>
<ol start="2">
<li>阿里云ecs安装mysql的话需要提前挂载数据盘，这有个自动挂载的脚本</li>
</ol>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">wget http:<span class="regexp">//mi</span>rrors.linuxeye.com<span class="regexp">/scripts/</span>auto_fdisk.sh</div></pre></td></tr></table></figure>
<ol start="3">
<li>安装boost</li>
</ol>
<figure class="highlight stata"><table><tr><td class="code"><pre><div class="line">wget http:<span class="comment">//downloads.sourceforge.net/project/boost/boost/1.59.0/boost_1_59_0.tar.gz ##下载源码</span></div><div class="line">tar xvf boost*.tar.gz</div><div class="line"><span class="keyword">cd</span> boost*</div><div class="line">./<span class="keyword">bootstrap</span>.<span class="keyword">sh</span></div><div class="line">./bjam --prefix=/usr/<span class="keyword">local</span></div><div class="line">./b2 install</div><div class="line">echo '/usr/<span class="keyword">local</span>/lib' &gt; /etc/ld.<span class="keyword">so</span>.<span class="keyword">conf</span>.<span class="keyword">d</span>/<span class="keyword">local</span>.<span class="keyword">conf</span></div><div class="line">ldconfig</div></pre></td></tr></table></figure>
<ol start="4">
<li>安装mysql</li>
</ol>
<figure class="highlight haml"><table><tr><td class="code"><pre><div class="line">cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</div><div class="line">    -<span class="ruby">DMYSQL_DATADIR=<span class="regexp">/data/mysql</span> \</span></div><div class="line">    -<span class="ruby">DSYSCONFDIR=<span class="regexp">/etc \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DWITH_INNOBASE_STORAGE_ENGINE=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DWITH_PARTITION_STORAGE_ENGINE=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DWITH_FEDERATED_STORAGE_ENGINE=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DWITH_MYISAM_STORAGE_ENGINE=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DWITH_EMBEDDED_SERVER=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DENABLE_DTRACE=0 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DENABLED_LOCAL_INFILE=1 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DDEFAULT_CHARSET=utf8mb4 \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DDEFAULT_COLLATION=utf8mb4_general_ci \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DEXTRA_CHARSETS=all \</span></span></div><div class="line">    -<span class="ruby"><span class="regexp">DCMAKE_EXE_LINKER_FLAGS='-ljemalloc'</span></span></div><div class="line"></div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<ol start="5">
<li>加到系统服务</li>
</ol>
<figure class="highlight nginx"><table><tr><td class="code"><pre><div class="line"><span class="attribute">cp</span> mysql.server /etc/init.d/mysqld</div><div class="line">sed -i <span class="string">"s@^basedir=.*<span class="variable">@basedir</span>=/usr/local/mysql@"</span> /etc/init.d/mysqld</div><div class="line">sed -i <span class="string">"s@^datadir=.*<span class="variable">@datadir</span>=/data/mysql@"</span> /etc/init.d/mysqld</div><div class="line">chmod +x /etc/init.d/mysqld</div><div class="line"></div><div class="line">chkconfig --add mysqld; <span class="attribute">chkconfig</span> mysqld <span class="literal">on</span>;</div></pre></td></tr></table></figure>
<ol start="6">
<li>修改配置文件</li>
</ol>
<figure class="highlight gams"><table><tr><td class="code"><pre><div class="line">[client]</div><div class="line">port = <span class="number">3306</span></div><div class="line">socket = /tmp/mysql.sock</div><div class="line">default-character-<span class="keyword">set</span> = utf8mb4</div><div class="line"></div><div class="line">[mysql]</div><div class="line">prompt=<span class="string">"MySQL [\\d]&gt; "</span></div><div class="line">no-auto-rehash</div><div class="line"></div><div class="line">[mysqld]</div><div class="line">port <span class="comment">= 3306</span></div><div class="line">socket <span class="comment">=</span> /tmp/<span class="comment">mysql.sock</span></div><div class="line"></div><div class="line">basedir=/usr/local/mysql</div><div class="line">datadir=/data/mysql</div><div class="line">pid-<span class="keyword">file</span>=/data/mysql/mysql.pid</div><div class="line">user <span class="comment">= mysql</span></div><div class="line">bind-address <span class="comment">= 0.0.0.0</span></div><div class="line">server-id <span class="comment">= 9</span></div><div class="line">init-connect <span class="comment">=</span> <span class="comment">'SET NAMES utf8mb4'</span></div><div class="line">character-<span class="keyword">set</span>-server <span class="comment">= utf8mb4</span></div><div class="line"></div><div class="line">skip-name-resolve</div><div class="line">#skip-networking</div><div class="line">back_log <span class="comment">= 300</span></div><div class="line"></div><div class="line">max_connections <span class="comment">= 1000</span></div><div class="line">max_connect_errors <span class="comment">= 6000</span></div><div class="line">open_files_limit <span class="comment">= 65535</span></div><div class="line">table_open_cache <span class="comment">= 128</span></div><div class="line">max_allowed_packet <span class="comment">= 500M</span></div><div class="line">binlog_cache_size <span class="comment">= 1M</span></div><div class="line">max_heap_table_size <span class="comment">= 8M</span></div><div class="line">tmp_table_size <span class="comment">= 16M</span></div><div class="line"></div><div class="line">read_buffer_size <span class="comment">= 2M</span></div><div class="line">read_rnd_buffer_size <span class="comment">= 8M</span></div><div class="line">sort_buffer_size <span class="comment">= 8M</span></div><div class="line">join_buffer_size <span class="comment">= 8M</span></div><div class="line">key_buffer_size <span class="comment">= 4M</span></div><div class="line"></div><div class="line">thread_cache_size <span class="comment">= 8</span></div><div class="line"></div><div class="line">query_cache_type <span class="comment">= 1</span></div><div class="line">query_cache_size <span class="comment">= 8M</span></div><div class="line">query_cache_limit <span class="comment">= 2M</span></div><div class="line"></div><div class="line">ft_min_word_len <span class="comment">= 4</span></div><div class="line"></div><div class="line">log_bin <span class="comment">= mysql-bin</span></div><div class="line">binlog_format <span class="comment">= mixed</span></div><div class="line">expire_logs_days <span class="comment">= 7</span></div><div class="line"></div><div class="line">log_error <span class="comment">=</span> /data/<span class="comment">mysql</span>/mysql-error.<span class="built-in">log</span></div><div class="line">slow_query_log = <span class="number">1</span></div><div class="line">long_query_time = <span class="number">1</span></div><div class="line">slow_query_log_file = /<span class="comment">data</span>/mysql/<span class="comment">mysql-slow.log</span></div><div class="line"></div><div class="line">performance_schema <span class="comment">= 0</span></div><div class="line">explicit_defaults_for_timestamp</div><div class="line"></div><div class="line">#lower_case_table_names <span class="comment">= 1</span></div><div class="line"></div><div class="line">skip-external-locking</div><div class="line"></div><div class="line">default_storage_engine <span class="comment">= InnoDB</span></div><div class="line">#default-storage-engine <span class="comment">= MyISAM</span></div><div class="line">innodb_file_per_table <span class="comment">= 1</span></div><div class="line">innodb_open_files <span class="comment">= 500</span></div><div class="line">innodb_buffer_pool_size <span class="comment">= 64M</span></div><div class="line">innodb_write_io_threads <span class="comment">= 4</span></div><div class="line">innodb_read_io_threads <span class="comment">= 4</span></div><div class="line">innodb_thread_concurrency <span class="comment">= 0</span></div><div class="line">innodb_purge_threads <span class="comment">= 1</span></div><div class="line">innodb_flush_log_at_trx_commit <span class="comment">= 2</span></div><div class="line">innodb_log_buffer_size <span class="comment">= 2M</span></div><div class="line">innodb_log_file_size <span class="comment">= 32M</span></div><div class="line">innodb_log_files_in_group <span class="comment">= 3</span></div><div class="line">innodb_max_dirty_pages_pct <span class="comment">= 90</span></div><div class="line">innodb_lock_wait_timeout <span class="comment">= 120</span></div><div class="line"></div><div class="line">bulk_insert_buffer_size <span class="comment">= 8M</span></div><div class="line">myisam_sort_buffer_size <span class="comment">= 8M</span></div><div class="line">myisam_max_sort_file_size <span class="comment">= 10G</span></div><div class="line">myisam_repair_threads <span class="comment">= 1</span></div><div class="line"></div><div class="line">interactive_timeout <span class="comment">= 28800</span></div><div class="line">wait_timeout <span class="comment">= 28800</span></div><div class="line"></div><div class="line">[mysqldump]</div><div class="line">quick</div><div class="line">max_allowed_packet <span class="comment">= 500M</span></div><div class="line"></div><div class="line">[myisamchk]</div><div class="line">key_buffer_size <span class="comment">= 8M</span></div><div class="line">sort_buffer_size <span class="comment">= 8M</span></div><div class="line">read_buffer <span class="comment">= 4M</span></div><div class="line">write_buffer <span class="comment">= 4M</span></div><div class="line"></div><div class="line"># include <span class="comment">all files from the config directory</span></div><div class="line">#</div><div class="line">!includedir /etc/<span class="comment">my.cnf.d</span></div></pre></td></tr></table></figure>
<ol start="5">
<li>初始化</li>
</ol>
<figure class="highlight dsconfig"><table><tr><td class="code"><pre><div class="line"><span class="string">mysqld </span><span class="built_in">--initialize-insecure</span> <span class="built_in">--user=mysql</span> <span class="built_in">--basedir=/usr/local/mysql</span> <span class="built_in">--datadir=/data/mysql</span></div><div class="line"><span class="string">chown </span><span class="string">mysql.</span><span class="string">mysql </span>-R /<span class="string">data/</span><span class="string">mysql</span></div><div class="line"></div><div class="line"><span class="string">echo </span><span class="string">"export PATH=/usr/local/mysql/bin:\$PATH"</span> &gt;&gt; /<span class="string">etc/</span><span class="string">profile</span></div><div class="line"></div><div class="line"><span class="string">mysql </span>-e <span class="string">"grant all privileges on *.* to root@'127.0.0.1' identified by \"</span>&lt;<span class="string">password&gt;</span>\<span class="string">" with grant option;"</span></div><div class="line"><span class="string">mysql </span>-e <span class="string">"grant all privileges on *.* to root@'localhost' identified by \"</span>&lt;<span class="string">password&gt;</span>\<span class="string">" with grant option;"</span></div></pre></td></tr></table></figure>
<h3 id="redis安装"><a class="header-anchor" href="#redis安装"> </a>redis安装</h3>
<figure class="highlight vim"><table><tr><td class="code"><pre><div class="line">tar xzf redis*</div><div class="line"><span class="keyword">cd</span> redis*</div><div class="line"><span class="keyword">make</span></div><div class="line"><span class="built_in">mkdir</span> -<span class="keyword">p</span> /usr/local/redis/&#123;bin,etc,var&#125;</div><div class="line"><span class="keyword">cp</span> src/&#123;redis-benchmark,redis-check-aof,redis-check-rdb,redis-cli,redis-sentinel,redis-server&#125; /usr/local/redis/bin/</div><div class="line"><span class="keyword">cp</span> redis.<span class="keyword">conf</span> /usr/local/redis/etc/</div><div class="line"><span class="keyword">ln</span> -s /usr/local/redis/bin/* /usr/local/bin/</div><div class="line">sed -i <span class="string">'s@pidfile.*@pidfile /var/run/redis.pid@'</span> /usr/local/redis/etc/redis.<span class="keyword">conf</span></div><div class="line">sed -i <span class="string">"s@logfile.*@logfile /usr/local/redis/var/redis.log@"</span> /usr/local/redis/etc/redis.<span class="keyword">conf</span></div><div class="line">sed -i <span class="string">"s@^dir.*@dir /usr/local/redis/var@"</span> /usr/local/redis/etc/redis.<span class="keyword">conf</span></div><div class="line">sed -i <span class="string">'s@daemonize no@daemonize yes@'</span> /usr/local/redis/etc/redis.<span class="keyword">conf</span></div><div class="line">sed -i <span class="string">"s@^# bind 127.0.0.1@bind 127.0.0.1@"</span> /usr/local/redis/etc/redis.<span class="keyword">conf</span></div><div class="line"><span class="keyword">cp</span> Redis-server-init /etc/init.d/redis-server</div><div class="line"><span class="keyword">cc</span> start-<span class="keyword">stop</span>-daemon.<span class="keyword">c</span> -<span class="keyword">o</span> /sbin/start-<span class="keyword">stop</span>-daemon</div><div class="line">chkconfig --<span class="built_in">add</span> redis-server</div><div class="line">chkconfig redis-server <span class="keyword">on</span></div><div class="line">useradd -M -s /sbin/nologin redis</div><div class="line">chown -R <span class="keyword">redi</span><span class="variable">s:redis</span> /usr/local/redis/var</div></pre></td></tr></table></figure>
<h3 id="tomcat安装"><a class="header-anchor" href="#tomcat安装"> </a>tomcat安装</h3>
<ol>
<li>解压到/opt</li>
<li>添加软连接tomcat7</li>
<li>添加到服务</li>
</ol>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">vi <span class="regexp">/etc/i</span>nit.d<span class="regexp">/tomcat</span></div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="comment"># description: tomcat Start Stop Restart</span></div><div class="line"><span class="comment"># processname: tomcat</span></div><div class="line"><span class="comment"># chkconfig: 2345 20 80</span></div><div class="line"></div><div class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk</div><div class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></div><div class="line"><span class="built_in">export</span> CATALINA_HOME=/opt/tomcat7</div><div class="line"><span class="built_in">export</span> CATALINA_PID=<span class="string">"<span class="variable">$CATALINA_HOME</span>/logs/tomcat.pid"</span></div><div class="line"><span class="built_in">export</span> JAVA_OPTS=<span class="string">"-Xmx1536M"</span></div><div class="line"><span class="built_in">export</span> LANG=<span class="string">"zh_CN.UTF-8"</span></div><div class="line"></div><div class="line">RUN_AS=application</div><div class="line">RUN=<span class="string">"su <span class="variable">$RUN_AS</span> -c "</span></div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></div><div class="line">start)</div><div class="line">	<span class="variable">$RUN</span> <span class="string">"cd <span class="variable">$CATALINA_HOME</span> &amp;&amp; bin/startup.sh"</span></div><div class="line">;;</div><div class="line">stop)</div><div class="line">	<span class="variable">$RUN</span> <span class="string">"cd <span class="variable">$CATALINA_HOME</span> &amp;&amp; bin/shutdown.sh"</span></div><div class="line">	<span class="variable">$RUN</span> <span class="string">"test -f <span class="variable">$CATALINA_PID</span> &amp;&amp; kill -9 `cat <span class="variable">$CATALINA_PID</span>`"</span></div><div class="line">;;</div><div class="line">restart)</div><div class="line">	<span class="variable">$RUN</span> <span class="string">"cd <span class="variable">$CATALINA_HOME</span> &amp;&amp; bin/shutdown.sh"</span></div><div class="line">	<span class="variable">$RUN</span> <span class="string">"cd <span class="variable">$CATALINA_HOME</span> &amp;&amp; bin/startup.sh"</span></div><div class="line">;;</div><div class="line"><span class="keyword">esac</span></div><div class="line"></div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<ol start="4">
<li>自动启动</li>
</ol>
<figure class="highlight applescript"><table><tr><td class="code"><pre><div class="line">chkconfig <span class="comment">--add tomcat</span></div><div class="line">chkconfig tomcat <span class="keyword">on</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;架构&quot;&gt;&lt;a class=&quot;header-anchor&quot; hre
    
    </summary>
    
      <category term="java" scheme="http://2le.me/categories/java/"/>
    
    
      <category term="java" scheme="http://2le.me/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>tomcat+reids+session共享</title>
    <link href="http://2le.me/2017/01/13/tomcat-reids-session-share/"/>
    <id>http://2le.me/2017/01/13/tomcat-reids-session-share/</id>
    <published>2017-01-13T05:02:31.000Z</published>
    <updated>2017-01-13T06:00:16.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="拷贝jar包到tomcat的lib目录"><a class="header-anchor" href="#拷贝jar包到tomcat的lib目录"> </a>拷贝jar包到tomcat的lib目录</h2>
<ol>
<li>tomcat-redis-session-manager-VERSION.jar <a href="https://github.com/jcoleman/tomcat-redis-session-manager" target="_blank" rel="external">github</a> <a href="https://pan.baidu.com/s/1c2ikhyg" target="_blank" rel="external">百度云（密码bian）</a></li>
<li>jedis-2.5.2.jar <a href="https://pan.baidu.com/s/1dFh2f0d" target="_blank" rel="external">百度云（密码bian）</a></li>
<li>commons-pool2-2.2.jar <a href="https://pan.baidu.com/s/1sltUPit" target="_blank" rel="external">百度云（密码bian）</a></li>
</ol>
<h2 id="修改context-xml配置文件"><a class="header-anchor" href="#修改context-xml配置文件"> </a>修改context.xml配置文件</h2>
<figure class="highlight django"><table><tr><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"com.orangefunction.tomcat.redissessions.RedisSessionHandlerValve"</span> /&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">"com.orangefunction.tomcat.redissessions.RedisSessionManager"</span></span></div><div class="line">         <span class="attr">host</span>=<span class="string">"localhost"</span> &lt;!<span class="attr">--</span> <span class="attr">optional:</span> <span class="attr">defaults</span> <span class="attr">to</span> "<span class="attr">localhost</span>" <span class="attr">--</span>&gt;</div><div class="line">         port="6379" <span class="comment">&lt;!-- optional: defaults to "6379" --&gt;</span></div><div class="line">         database="0" <span class="comment">&lt;!-- optional: defaults to "0" --&gt;</span></div><div class="line">         maxInactiveInterval="60" <span class="comment">&lt;!-- optional: defaults to "60" (in seconds) --&gt;</span></div><div class="line">         sessionPersistPolicies="PERSIST_POLICY_1,PERSIST_POLICY_2,.." <span class="comment">&lt;!-- optional --&gt;</span></div><div class="line">         sentinelMaster="SentinelMasterName" <span class="comment">&lt;!-- optional --&gt;</span></div><div class="line">         sentinels="sentinel-host-1:port,sentinel-host-2:port,.." <span class="comment">&lt;!-- optional --&gt;</span> /&gt;</div></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Valve</span> <span class="attr">className</span>=<span class="string">"com.radiadesign.catalina.session.RedisSessionHandlerValve"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">Manager</span> <span class="attr">className</span>=<span class="string">"com.radiadesign.catalina.session.RedisSessionManager"</span></span></div><div class="line">    <span class="attr">host</span>=<span class="string">"10.1.0.6"</span> <span class="attr">port</span>=<span class="string">"6379"</span> <span class="attr">password</span>=<span class="string">"pwd"</span> <span class="attr">database</span>=<span class="string">"11"</span> <span class="attr">maxInactiveInterval</span>=<span class="string">"60"</span></div><div class="line">/&gt;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;拷贝jar包到tomcat的lib目录&quot;&gt;&lt;a class=&quot;h
    
    </summary>
    
      <category term="java" scheme="http://2le.me/categories/java/"/>
    
    
      <category term="tomcat" scheme="http://2le.me/tags/tomcat/"/>
    
  </entry>
  
  <entry>
    <title>solr</title>
    <link href="http://2le.me/2017/01/12/solr-1/"/>
    <id>http://2le.me/2017/01/12/solr-1/</id>
    <published>2017-01-12T01:08:30.000Z</published>
    <updated>2017-01-12T02:17:10.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="solr相关"><a class="header-anchor" href="#solr相关"> </a>solr相关</h2>
<a id="more"></a>
<h2 id="solr常用查询参数"><a class="header-anchor" href="#solr常用查询参数"> </a>solr常用查询参数</h2>
<h3 id="q-查询条件表达式"><a class="header-anchor" href="#q-查询条件表达式"> </a><code>q</code>:查询条件表达式。</h3>
<p>提供<code>AND</code>,<code>OR</code>,<code>*</code>,<code>?</code>等关键字，模糊匹配。</p>
<p>举个栗子:</p>
<ol>
<li><code>name:Jim AND age:18</code>,查询名字类似Jim年龄18的小伙伴</li>
<li>范围查询<code>startDate:[* TO 2017-01-01T00:00:00Z]</code>,查询开始时间在17年1月1日之前的
<em>注意：solr要求的时间格式为<code>yyyy-MM-dd'T'HH:mm:ss'Z'</code>，对于日期索引solr里以标准时间存储，所以我们查询时需要将日期转成格林威治时间，参考以下代码:</em></li>
</ol>
<figure class="highlight gauss"><table><tr><td class="code"><pre><div class="line">SimpleDateFormat sdf = <span class="keyword">new</span>  SimpleDateFormat(<span class="string">"yyyy-MM-dd'T'HH:mm:ss'Z'"</span>);</div><div class="line">sdf.setTimeZone(TimeZone.getTimeZone(<span class="string">"GMT"</span>));<span class="comment">//将北京时间转成标准时间</span></div><div class="line"><span class="keyword">String</span> <span class="built_in">dateStr</span> = sdf.<span class="keyword">format</span>(someDate);</div></pre></td></tr></table></figure>
<h3 id="fq-filter-query-过滤查询表达式-对查询结果过滤-在分页之前"><a class="header-anchor" href="#fq-filter-query-过滤查询表达式-对查询结果过滤-在分页之前"> </a><code>fq(filter query)</code>:过滤查询表达式,对查询结果过滤,在分页之前</h3>
<h3 id="sort-排序表达式"><a class="header-anchor" href="#sort-排序表达式"> </a><code>sort</code>:排序表达式。</h3>
<p>默认按<code>score</code>排序。提供<code>ASC</code>,<code>DESC</code>关键字且必填，不区分大小写</p>
<p>举个栗子：
<code>age desc</code>按年龄倒序排序</p>
<h3 id="start-rows-分页参数"><a class="header-anchor" href="#start-rows-分页参数"> </a><code>start</code>,<code>rows</code>:分页参数。</h3>
<p>start：开始的位置，rows：返回条数</p>
<h3 id="df-默认的查询字段"><a class="header-anchor" href="#df-默认的查询字段"> </a><code>df</code>:默认的查询字段。</h3>
<p>这个参数会覆盖在schema里定义的默认查询字段</p>
<h3 id="raw-query-parameters-原始查询参数"><a class="header-anchor" href="#raw-query-parameters-原始查询参数"> </a><code>Raw Query Parameters</code>:原始查询参数。</h3>
<p>比如：开启debug，可以页面勾选，或者直接添加参数：debugQuery=on</p>
<h3 id="wt-writer-type-指定输出格式"><a class="header-anchor" href="#wt-writer-type-指定输出格式"> </a><code>wt(writer type)</code>:指定输出格式</h3>
<p>可以有 xml, json, php, python,csv,ruby。</p>
<h3 id="indent-返回的结果是否缩进"><a class="header-anchor" href="#indent-返回的结果是否缩进"> </a><code>indent</code>:返回的结果是否缩进</h3>
<p>默认关闭，用 indent=true|on 开启，一般调试json,php,python,ruby输出才有必要用这个参数。</p>
<h3 id="debugquery-调试数据时可能会用到-有四个可选参数值"><a class="header-anchor" href="#debugquery-调试数据时可能会用到-有四个可选参数值"> </a><code>debugQuery</code>:调试数据时可能会用到，有四个可选参数值。</h3>
<ol>
<li>timing – 提供调试对于组件时间耗费等信息</li>
<li>query — 提供调试关于查询信息</li>
<li>results — 提供调试关于结果信息</li>
<li>true – 设置为true，相当于&amp;debugQuery=true</li>
</ol>
<h3 id="q-op-指定默认的连接符and还是or-将会覆盖schema-xml的defaultoperator配置"><a class="header-anchor" href="#q-op-指定默认的连接符and还是or-将会覆盖schema-xml的defaultoperator配置"> </a><code>q.op</code>: 指定默认的连接符AND还是OR，将会覆盖schema.xml的defaultOperator配置。</h3>
<h3 id="qt-query-type-指定那个类型来处理查询请求"><a class="header-anchor" href="#qt-query-type-指定那个类型来处理查询请求"> </a><code>qt(query type)</code>，指定那个类型来处理查询请求</h3>
<p>一般不用指定，默认是standard</p>
<ol>
<li>Transformers 结果放回前处理document中的字段。如[docid] Luence document id 值。</li>
<li>verbose 获得中间步骤的详细信息.</li>
</ol>
<h3 id="version-查询语法的版本-建议不使用它-由服务器指定默认值"><a class="header-anchor" href="#version-查询语法的版本-建议不使用它-由服务器指定默认值"> </a><code>version</code>:查询语法的版本，建议不使用它，由服务器指定默认值。</h3>
<h3 id="deftype-指定query-parser"><a class="header-anchor" href="#deftype-指定query-parser"> </a><code>defType</code>: 指定query parser</h3>
<p>常用defType=lucene, defType=dismax, defType=edismax。
自定义查询类型可参考:<a href="http://blog.chenlb.com/2009/02/use-custom-solr-queryparser.html" target="_blank" rel="external">http://blog.chenlb.com/2009/02/use-custom-solr-queryparser.html</a></p>
<h3 id="参考资料："><a class="header-anchor" href="#参考资料："> </a>参考资料：</h3>
<p><a href="http://wiki.apache.org/solr/CommonQueryParameters" target="_blank" rel="external">http://wiki.apache.org/solr/CommonQueryParameters</a>
<a href="http://wiki.apache.org/solr/SolrQuerySyntax" target="_blank" rel="external">http://wiki.apache.org/solr/SolrQuerySyntax</a></p>
<h2 id="dismax-disjunction-max"><a class="header-anchor" href="#dismax-disjunction-max"> </a>[ ] dismax(Disjunction Max)</h2>
<h2 id="edismax-extended-dismax"><a class="header-anchor" href="#edismax-extended-dismax"> </a>[ ] edismax(Extended DisMax)</h2>
<h2 id="hl-highlight-高亮参数"><a class="header-anchor" href="#hl-highlight-高亮参数"> </a>[ ] hl(highlight):高亮参数</h2>
<h2 id="facet参数"><a class="header-anchor" href="#facet参数"> </a>[ ] facet参数</h2>
<h2 id="spatial参数"><a class="header-anchor" href="#spatial参数"> </a>[ ] spatial参数</h2>
<h2 id="spellcheck-拼写检查"><a class="header-anchor" href="#spellcheck-拼写检查"> </a>[ ] spellcheck 拼写检查</h2>
<h2 id="solr的检索运算符"><a class="header-anchor" href="#solr的检索运算符"> </a>[ ] Solr的检索运算符</h2>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;solr相关&quot;&gt;&lt;a class=&quot;header-anchor&quot; href=&quot;#solr相关&quot;&gt; &lt;/a&gt;solr相关&lt;/h2&gt;
    
    </summary>
    
      <category term="solr" scheme="http://2le.me/categories/solr/"/>
    
    
      <category term="solr" scheme="http://2le.me/tags/solr/"/>
    
  </entry>
  
  <entry>
    <title>mysql主从配置</title>
    <link href="http://2le.me/2017/01/07/mysql-master-slaver/"/>
    <id>http://2le.me/2017/01/07/mysql-master-slaver/</id>
    <published>2017-01-06T16:04:44.000Z</published>
    <updated>2017-01-13T09:52:28.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="背景"><a class="header-anchor" href="#背景"> </a>背景</h2>
<p>今天（哦不00点04分了，应该说是昨天），打算自己配置一个主从mysql实践一把学习学习，于是倒腾了一下午公司电脑里的东西，腾出了40g硬盘，删了N个游戏（心疼呀！），虚了俩台centos6.6，找了同事极力推荐的<code>oneinstack</code>,装了mysql5.6，开整！记下步骤，兴许哪天就能用上呢！</p>
<h2 id="环境"><a class="header-anchor" href="#环境"> </a>环境</h2>
<ol start="0">
<li>虚一台centos
主机名<code>db01</code>,为了快速安装，最小化安装就好了（其实并不好）</li>
<li>安装mysql
我想顺便试下<code>oneinstack</code>(有点大材小用)，刚想<code>wget</code>发现木网（最小化安装的），修改网络配置后启动<code>network</code>服务连上网<code>yum</code>又慢的想吐道路曲折跌跌撞撞但最终也装上了，不赘述！</li>
<li>再虚一台centos
这时注意3点：
<ul>
<li>改下hostname(修改<code>/etc/sysconfig/network</code>文件<code>HOSTNAME</code>)，我改成<code>db02</code>了</li>
<li>拷贝虚拟机会自动添加一个网卡，造成连不上网，修改下网卡配置<a href="http://www.01happy.com/vmware-copy-centos-device-eth0-does-not-seem-to-be-present/" target="_blank" rel="external">看这里</a></li>
<li>修改mysql的uuid（<code>/data/mysql/auto.cnf</code>修改下uuid值）</li>
</ul>
</li>
</ol>
<h2 id="配置"><a class="header-anchor" href="#配置"> </a>配置</h2>
<h3 id="master端"><a class="header-anchor" href="#master端"> </a>master端</h3>
<ol>
<li>创建用户，执行sql命令</li>
</ol>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><div class="line">create <span class="keyword">user</span> <span class="title">repl</span>;</div></pre></td></tr></table></figure>
<ol start="2">
<li>给repl用户授权</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><div class="line"><span class="keyword">GRANT</span> <span class="keyword">REPLICATION</span> <span class="keyword">SLAVE</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'repl'</span>@<span class="string">'172.19.136.%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123zxc=-0/.,'</span>;</div></pre></td></tr></table></figure>
<ol start="3">
<li>修改配置文件(<code>/etc/my.cnf</code>)
在[mysqld]下面增加（或修改）下面几行代码</li>
</ol>
<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="attr">server-id</span>=<span class="number">1</span>   //给数据库服务的唯一标识，一般为大家设置服务器Ip的末尾号</div><div class="line"><span class="attr">log_bin</span>=master-bin</div><div class="line"><span class="attr">log_bin_index</span>=master-bin.index</div></pre></td></tr></table></figure>
<ol start="4">
<li>查看master日志</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><div class="line"><span class="keyword">show</span> <span class="keyword">master</span> <span class="keyword">status</span>;</div></pre></td></tr></table></figure>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2017/01/07/20170107004223.png" alt="master status"><span class="image-caption">master status</span></p>
<ol start="5">
<li>重启mysql</li>
</ol>
<h3 id="slaver端"><a class="header-anchor" href="#slaver端"> </a>slaver端</h3>
<ol>
<li>修改配置文件后重启服务
[mysqld]下增加（或修改）以下几行</li>
</ol>
<figure class="highlight ini"><table><tr><td class="code"><pre><div class="line"><span class="attr">server-id</span>=<span class="number">2</span> //不要和master重复了</div><div class="line"><span class="attr">relay-log-index</span>=slave-relay-bin.index</div><div class="line"><span class="attr">relay-log</span>=slave-relay-bin</div></pre></td></tr></table></figure>
<ol start="2">
<li>连接master,执行以下sql命令</li>
</ol>
<figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">change master to master_host='<span class="number">172.19</span><span class="number">.136</span><span class="number">.241</span>',</div><div class="line">master_user='repl',</div><div class="line">master_port=<span class="number">3306</span>,</div><div class="line">master_password='<span class="number">123</span>zxc=<span class="number">-0</span>/.,',</div><div class="line">master_log_file='master-bin<span class="number">.000001</span>',</div><div class="line">master_log_pos=<span class="number">0</span>;</div></pre></td></tr></table></figure>
<ol start="3">
<li>启动slave</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><div class="line"><span class="keyword">start</span> <span class="keyword">slave</span>;</div></pre></td></tr></table></figure>
<ol start="4">
<li>查看slave状态</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><div class="line"><span class="keyword">show</span> <span class="keyword">slave</span> <span class="keyword">status</span>\G;</div></pre></td></tr></table></figure>
<ul>
<li>报错1：</li>
</ul>
<blockquote>
<p>The slave I/O thread stops because master and slave have equal MySQL server UUIDs; these UUIDs must be different for replication to work.</p>
</blockquote>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2017/01/07/20170107004817.png" alt="uuid"><span class="image-caption">uuid</span><br>
解决：修改下uuid</p>
<ul>
<li>报错2：网不通<br>
解决：修改防火墙配置，终端命令为：<code>/sbin/iptables -I INPUT -p tcp --dport 3306 -j ACCEPT</code></li>
</ul>
<h2 id="效果"><a class="header-anchor" href="#效果"> </a>效果</h2>
<ol>
<li>
<p>在master建一个表
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2017/01/06/20170106235111.png" alt="在主库创建一个表"><span class="image-caption">在主库创建一个表</span></p>
</li>
<li>
<p>在slaver上<code>show tables</code>
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2017/01/06/20170106235153.png" alt="查看从库"><span class="image-caption">查看从库</span></p>
</li>
</ol>
<h2 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h2>
<p><a href="http://www.cnblogs.com/alvin_xp/p/4162249.html" target="_blank" rel="external">http://www.cnblogs.com/alvin_xp/p/4162249.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;背景&quot;&gt;&lt;a class=&quot;header-anchor&quot; hre
    
    </summary>
    
      <category term="mysql" scheme="http://2le.me/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://2le.me/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>linux-centos</title>
    <link href="http://2le.me/2017/01/06/linux-centos-1/"/>
    <id>http://2le.me/2017/01/06/linux-centos-1/</id>
    <published>2017-01-06T07:58:57.000Z</published>
    <updated>2017-01-06T08:36:00.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="最小化安装后需要做的事情"><a class="header-anchor" href="#最小化安装后需要做的事情"> </a>最小化安装后需要做的事情</h2>
<h3 id="联网"><a class="header-anchor" href="#联网"> </a>联网</h3>
<p><code>vi /etc/sysconfig/network-script/ifcfg-eth0</code></p>
<blockquote>
<p>NM_CONTROLLED=&quot;no&quot;
ONBOOT=&quot;yes&quot;
BOOTPROTO=“dhcp”
<code>service network start</code></p>
</blockquote>
<h2 id="开启sshd"><a class="header-anchor" href="#开启sshd"> </a>开启sshd</h2>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><div class="line">service sshd <span class="literal">start</span></div></pre></td></tr></table></figure>
<h2 id="下载wget"><a class="header-anchor" href="#下载wget"> </a>下载wget</h2>
<h2 id="修改为国内源-阿里云为例"><a class="header-anchor" href="#修改为国内源-阿里云为例"> </a>修改为国内源（阿里云为例）</h2>
<ol>
<li>备份你的原镜像文件，以免出错后可以恢复。</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">mv /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span><span class="selector-class">.backup</span></div></pre></td></tr></table></figure>
<ol start="2">
<li>下载新的CentOS-Base.repo 到/etc/yum.repos.d/
CentOS 5
<code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-5.repo</code>
CentOS 6
<code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo</code></li>
<li>运行yum makecache生成缓存</li>
</ol>
<figure class="highlight ada"><table><tr><td class="code"><pre><div class="line">yum clean <span class="keyword">all</span></div><div class="line">yum makecache</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;最小化安装后需要做的事情&quot;&gt;&lt;a class=&quot;header-a
    
    </summary>
    
      <category term="linux" scheme="http://2le.me/categories/linux/"/>
    
    
      <category term="linux" scheme="http://2le.me/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>联通HG220GU-WO36光猫管理员权限破解</title>
    <link href="http://2le.me/2017/01/06/net-modem/"/>
    <id>http://2le.me/2017/01/06/net-modem/</id>
    <published>2017-01-06T04:57:53.000Z</published>
    <updated>2017-01-06T05:05:08.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><ol>
<li>访问 <a href="http://192.168.1.1/logoffaccount.html%EF%BC%8C%E9%9A%90%E8%97%8F%E7%94%A8%E6%88%B7%E6%94%B9%E4%B8%BA%E5%90%AF%E7%94%A8%EF%BC%8C" target="_blank" rel="external">http://192.168.1.1/logoffaccount.html，隐藏用户改为启用，</a>  
这样就可以用工程账号登陆了。
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2017/01/06/20170106130014.png" alt="net"></li>
<li>登录工程帐号用户名：fiberhomehg2x0 密码：hg2x0</li>
<li>访问 <a href="http://192.168.1.1/backupsettings.html" target="_blank" rel="external">http://192.168.1.1/backupsettings.html</a> 下载 backupsettings.conf</li>
<li>backupsettings.conf 里找 AdminPassword我这台上是 <adminpassword>MTIzcXdlYXNkenhjAA==</adminpassword>base64解码拿到密码 123qweasdzxc 看这密码的长相估计这批设备上的都一样</li>
<li>进服务设置，找到维护帐号开关，选开启后保存，这样就可以用管理员登录了
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2017/01/06/20170106130258.png" alt="net"></li>
<li>用户名CUAdmin 注意大小写 密码123qweasdzxc 登录 <a href="http://192.168.1.1/cu.html" target="_blank" rel="external">http://192.168.1.1/cu.html</a></li>
<li>更改光猫为桥接方式，桥接路由器（折腾了两个晚上木搞定，留个坑吧）</li>
<li>参考：<a href="http://blog.csdn.net/jtongfei/article/details/50405753" target="_blank" rel="external">http://blog.csdn.net/jtongfei/article/details/50405753</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;ol&gt;
&lt;li&gt;访问 &lt;a href=&quot;http://192.168.1.1/
    
    </summary>
    
      <category term="net" scheme="http://2le.me/categories/net/"/>
    
    
      <category term="net" scheme="http://2le.me/tags/net/"/>
    
  </entry>
  
  <entry>
    <title>你好，2017</title>
    <link href="http://2le.me/2017/01/01/hello2017/"/>
    <id>http://2le.me/2017/01/01/hello2017/</id>
    <published>2016-12-31T16:04:21.000Z</published>
    <updated>2017-01-03T01:31:20.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>2016就这么过去了，新的一年又开始了，愿我的家人身体健康，一生平安！儿子在睡觉，媳妇在(貌似)看跨年晚会吧，我在学习下服务器架构。还要造个轮子，写个工具！</p>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;p&gt;2016就这么过去了，新的一年又开始了，愿我的家人身体健康，一生平安！儿子
    
    </summary>
    
      <category term="life" scheme="http://2le.me/categories/life/"/>
    
    
      <category term="life" scheme="http://2le.me/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>像程序员一样去生活</title>
    <link href="http://2le.me/2016/12/27/programers-life/"/>
    <id>http://2le.me/2016/12/27/programers-life/</id>
    <published>2016-12-27T05:06:58.000Z</published>
    <updated>2016-12-30T06:07:25.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><blockquote class="blockquote-center"><p>我就是我 是颜色不一样的烟火</p>
</blockquote>
<a id="more"></a>
<p>迷恋<a href="https://www.west.cn/reg/default.asp?m=phplogin&amp;pageStr=http://www.dai.top/recommend/add?u=687606" target="_blank" rel="external">玉米贷</a>写了个脚本定时抓取借款列表数据，利率超过10%，给我发短信。</p>
<p>记事本工具从<code>editplus</code>到<code>onenote</code>到<code>evnenote</code>到<code>有道笔记</code>到<code>蚂蚁笔记</code>到<code>emacs</code>的<code>org-mode</code>（现在有点上瘾了），回归原始<ruby>纯天然无公害<rp> (</rp><rt>chún wén běn shuǎng wāi wāi</rt><rp>) </rp></ruby></p>
<p>午休时间，打开豆瓣带上耳机打开<code>todo</code>,先来它一个<ruby>番茄钟<rp> (</rp><rt>Pomodoro Technique</rt><rp>) </rp></ruby>!</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;我就是我 是颜色不一样的烟火&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="life" scheme="http://2le.me/categories/life/"/>
    
    
      <category term="life" scheme="http://2le.me/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>时间轴</title>
    <link href="http://2le.me/2016/12/26/timeline/"/>
    <id>http://2le.me/2016/12/26/timeline/</id>
    <published>2016-12-26T11:14:55.000Z</published>
    <updated>2016-12-26T12:10:02.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="2016-12-26-19-15-36"><a class="header-anchor" href="#2016-12-26-19-15-36"> </a>2016-12-26 19:15:36</h2>
<h3 id="添加不蒜子统计"><a class="header-anchor" href="#添加不蒜子统计"> </a>添加<code>不蒜子</code>统计</h3>
<h2 id="2016-11-03-14-53-42"><a class="header-anchor" href="#2016-11-03-14-53-42"> </a>2016-11-03 14:53:42</h2>
<h3 id="主题改成next"><a class="header-anchor" href="#主题改成next"> </a>主题改成<code>NexT</code></h3>
<h2 id="2015-10-09-00-00-00"><a class="header-anchor" href="#2015-10-09-00-00-00"> </a>2015-10-09 00:00:00</h2>
<h3 id="迁移到github-博客程序改为hexo"><a class="header-anchor" href="#迁移到github-博客程序改为hexo"> </a>迁移到<code>github</code>,博客程序改为<code>hexo</code></h3>
<h2 id="2012-06-28-00-00-00"><a class="header-anchor" href="#2012-06-28-00-00-00"> </a>2012-06-28 00:00:00</h2>
<h3 id="淘宝购买php空间搭建wordpress博客"><a class="header-anchor" href="#淘宝购买php空间搭建wordpress博客"> </a>淘宝购买PHP空间搭建<code>wordpress</code>博客</h3>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;2016-12-26-19-15-36&quot;&gt;&lt;a class=&quot;h
    
    </summary>
    
      <category term="other" scheme="http://2le.me/categories/other/"/>
    
    
      <category term="timeline" scheme="http://2le.me/tags/timeline/"/>
    
  </entry>
  
  <entry>
    <title>http升级https</title>
    <link href="http://2le.me/2016/12/26/http2https/"/>
    <id>http://2le.me/2016/12/26/http2https/</id>
    <published>2016-12-26T07:53:36.000Z</published>
    <updated>2016-12-26T12:13:56.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="背景"><a class="header-anchor" href="#背景"> </a>背景</h2>
<p>nginx + centos6</p>
<h2 id="生成证书"><a class="header-anchor" href="#生成证书"> </a>生成证书</h2>
<figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line">wget https:<span class="comment">//dl.eff.org/certbot-auto</span></div><div class="line">chmod a+x certbot-<span class="keyword">auto</span></div><div class="line">./certbot-<span class="keyword">auto</span> certonly</div></pre></td></tr></table></figure>
<h2 id="nginx配置"><a class="header-anchor" href="#nginx配置"> </a>nginx配置</h2>
<figure class="highlight abnf"><table><tr><td class="code"><pre><div class="line">server&#123;</div><div class="line">	listen <span class="number">443</span><span class="comment">;</span></div><div class="line">	server_name vpn.le.im test.le.im<span class="comment">;</span></div><div class="line">	ssl on<span class="comment">;</span></div><div class="line">	ssl_certificate /etc/letsencrypt/live/vpn.le.im/cert.pem<span class="comment">;</span></div><div class="line">	ssl_certificate_key /etc/letsencrypt/live/vpn.le.im/privkey.pem<span class="comment">;</span></div><div class="line">	location /&#123;</div><div class="line">        root   /usr/share/nginx/html/test<span class="comment">;</span></div><div class="line">        index  index.html index.htm<span class="comment">;</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h2>
<p><a href="https://certbot.eff.org/#centos6-nginx" target="_blank" rel="external">https://certbot.eff.org/#centos6-nginx</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;背景&quot;&gt;&lt;a class=&quot;header-anchor&quot; hre
    
    </summary>
    
      <category term="web" scheme="http://2le.me/categories/web/"/>
    
    
      <category term="https" scheme="http://2le.me/tags/https/"/>
    
  </entry>
  
  <entry>
    <title>jenkins</title>
    <link href="http://2le.me/2016/12/23/java-jenkins/"/>
    <id>http://2le.me/2016/12/23/java-jenkins/</id>
    <published>2016-12-23T05:08:40.000Z</published>
    <updated>2016-12-23T05:22:00.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h2 id="安装"><a class="header-anchor" href="#安装"> </a>安装</h2>
<ol>
<li><code>yum install java</code></li>
<li><code>rpm -ivh http://ftp.tsukuba.wide.ad.jp/software/jenkins/redhat-stable/jenkins-2.7.4-1.1.noarch.rpm</code></li>
<li><code>service jenkins start</code></li>
</ol>
<h2 id="使用"><a class="header-anchor" href="#使用"> </a>使用</h2>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/23/20161223132154.png" alt="jenkins"><span class="image-caption">jenkins</span></p>
]]></content>
    
    <summary type="html">
    
      &lt;script src=&quot;/assets/js/DPlayer.min.js&quot;&gt; &lt;/script&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&gt; &lt;/script&gt;&lt;h2 id=&quot;安装&quot;&gt;&lt;a class=&quot;header-anchor&quot; hre
    
    </summary>
    
      <category term="java" scheme="http://2le.me/categories/java/"/>
    
    
      <category term="java" scheme="http://2le.me/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>linux命令</title>
    <link href="http://2le.me/2016/12/22/linux-command/"/>
    <id>http://2le.me/2016/12/22/linux-command/</id>
    <published>2016-12-22T01:10:19.000Z</published>
    <updated>2016-12-27T03:10:10.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>一些常用的linux命令</p>
<a id="more"></a>
<h2 id="linux查看系统信息"><a class="header-anchor" href="#linux查看系统信息"> </a>linux查看系统信息</h2>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><div class="line">uname -<span class="keyword">a</span> <span class="comment">#电脑以及操作系统的相关信息</span></div><div class="line">cat /proc/<span class="built_in">version</span> <span class="comment">#内核版本</span></div><div class="line">cat /etc/issue <span class="comment">#发行版信息</span></div><div class="line">lsb_release -<span class="keyword">a</span> <span class="comment">#适用于所有的linux，包括Redhat、SuSE、Debian等发行版，但是在debian下要安装lsb</span></div></pre></td></tr></table></figure>
<h2 id="下载"><a class="header-anchor" href="#下载"> </a>下载</h2>
<figure class="highlight dts"><table><tr><td class="code"><pre><div class="line">scp [-P <span class="params">&lt;端口号&gt;</span>] <span class="params">&lt;用户名&gt;</span>@<span class="params">&lt;远程服务器地址&gt;</span>:<span class="params">&lt;文件目录&gt;</span> <span class="params">&lt;本地文件目录&gt;</span></div><div class="line">scp -P <span class="number">28639</span> root@vpn.le.im:<span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/ngrok/</span>bin/darwin_amd64/ngrok ~/</div></pre></td></tr></table></figure>
<h2 id="查看文件修改时间"><a class="header-anchor" href="#查看文件修改时间"> </a>查看文件修改时间</h2>
<figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">stat &lt;<span class="built_in">File</span>&gt;</div></pre></td></tr></table></figure>
<h2 id="set-e"><a class="header-anchor" href="#set-e"> </a>set -e</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"><span class="built_in">set</span> <span class="_">-e</span></div><div class="line"><span class="built_in">command</span> 1</div><div class="line"><span class="built_in">command</span> 2</div><div class="line">...</div><div class="line"><span class="built_in">exit</span> 0</div></pre></td></tr></table></figure>
<p>每个脚本都应该在文件开头加上set -e,这句语句告诉bash如果任何语句的执行结果不是true则应该退出</p>
<h2 id="centos6上安装samba服务时需要关闭selinux"><a class="header-anchor" href="#centos6上安装samba服务时需要关闭selinux"> </a>centos6上安装<code>samba</code>服务时需要关闭<code>selinux</code></h2>
<h3 id="查看状态"><a class="header-anchor" href="#查看状态"> </a>查看状态</h3>
<figure class="highlight groovy"><table><tr><td class="code"><pre><div class="line">sestatus</div><div class="line">SELinux <span class="string">status:</span>                 enabled  </div><div class="line">SELinuxfs <span class="string">mount:</span>                <span class="regexp">/sys/</span>fs/selinux  </div><div class="line">SELinux root <span class="string">directory:</span>         <span class="regexp">/etc/</span>selinux  </div><div class="line">Loaded policy <span class="string">name:</span>             targeted  </div><div class="line">Current <span class="string">mode:</span>                   enforcing  </div><div class="line">Mode from config <span class="string">file:</span>          enforcing  </div><div class="line">Policy MLS <span class="string">status:</span>              enabled  </div><div class="line">Policy deny_unknown <span class="string">status:</span>     allowed  </div><div class="line">Max kernel policy <span class="string">version:</span>      <span class="number">28</span></div></pre></td></tr></table></figure>
<h3 id="临时关闭"><a class="header-anchor" href="#临时关闭"> </a>临时关闭</h3>
<figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">setenforce <span class="number">0</span></div></pre></td></tr></table></figure>
<h3 id="永久关闭"><a class="header-anchor" href="#永久关闭"> </a>永久关闭</h3>
<p>将<code>SELINUX</code>值设为<code>disabled</code></p>
<figure class="highlight vala"><table><tr><td class="code"><pre><div class="line">cat /etc/selinux/config</div><div class="line"><span class="meta"># This file controls the state of SELinux on the system.  </span></div><div class="line"><span class="meta"># SELINUX= can take one of these three values:  </span></div><div class="line"><span class="meta">#     enforcing - SELinux security policy is enforced.  </span></div><div class="line"><span class="meta">#     permissive - SELinux prints warnings instead of enforcing.  </span></div><div class="line"><span class="meta">#     disabled - No SELinux policy is loaded.  </span></div><div class="line"><span class="meta">#SELINUX=enforcing  </span></div><div class="line">SELINUX=disabled  </div><div class="line"><span class="meta"># SELINUXTYPE= can take one of three two values:  </span></div><div class="line"><span class="meta">#     targeted - Targeted processes are protected,  </span></div><div class="line"><span class="meta">#     minimum - Modification of targeted policy. Only selected processes are protected.   </span></div><div class="line"><span class="meta">#     mls - Multi Level Security protection.  </span></div><div class="line">SELINUXTYPE=targeted</div></pre></td></tr></table></figure>
<p>或者直接执行以下命令修改</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">sed -<span class="selector-tag">i</span> <span class="string">'/SELINUX/s/enforcing/disabled/'</span> /etc/selinux/config</div></pre></td></tr></table></figure>
<h3 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h3>
<p><a href="http://www.centoscn.com/CentOS/config/2015/0618/5681.html" target="_blank" rel="external">http://www.centoscn.com/CentOS/config/2015/0618/5681.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一些常用的linux命令&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://2le.me/categories/linux/"/>
    
    
      <category term="linux" scheme="http://2le.me/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>macos-charles</title>
    <link href="http://2le.me/2016/12/20/macos-charles/"/>
    <id>http://2le.me/2016/12/20/macos-charles/</id>
    <published>2016-12-20T09:15:51.000Z</published>
    <updated>2016-12-26T13:08:13.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>叫我查尔斯好了</p>
</blockquote>
<a id="more"></a>
<h2 id="charles-抓包修改请求参数"><a class="header-anchor" href="#charles-抓包修改请求参数"> </a>charles 抓包修改请求参数</h2>
<ol>
<li>
<p>右键勾选breakpoints
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/20161220171729.png" alt="charles"></p>
</li>
<li>
<p>修改请求参数
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/20161220172058.png" alt="charles"></p>
</li>
<li>
<p>同理可以修改响应参数
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/20161220172149.png" alt="charles"></p>
</li>
</ol>
<h2 id="mac上charles抓安卓https包"><a class="header-anchor" href="#mac上charles抓安卓https包"> </a>mac上charles抓安卓https包</h2>
<ol>
<li>
<p>更新<code>charles</code>到<code>&gt;3.10</code>,百度云下载4.0.2(含破解补丁)链接: <a href="https://pan.baidu.com/s/1gf9htbt" target="_blank" rel="external">https://pan.baidu.com/s/1gf9htbt</a> 密码: bian</p>
</li>
<li>
<p><code>help</code>-&gt;<code>SSL proxying</code>-&gt;<code>Install Charles Root Certificate</code>
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/26/20161226133619.png" alt="charles"></p>
</li>
<li>
<p>右击根证书，点击<code>显示简介</code>，展开信任选项选择<code>始终信任</code>
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/26/20161226133747.png" alt="charles">
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/26/20161226133857.png" alt="charles"></p>
</li>
<li>
<p><code>help</code>-&gt;<code>SSL proxying</code>-&gt;<code>Install Charles Root Certificate on a Mobile Device or Remote Browser</code>
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/26/20161226134144.png" alt="charles"></p>
</li>
<li>
<p>手机浏览器(内置的)按提示打开<code>chls.pro/ssl</code>-&gt;<code>选择WLAN</code>-&gt;<code>确认</code>即可，其他浏览器（如uc）会下载证书然后手动安装即可
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/26/20161226134314.png" alt="charles"></p>
</li>
<li>
<p>（其他浏览器需要手动安装证书）安卓设备<code>设置</code>-&gt;<code>安全</code>-<code>从设备存储安装</code>-<code>选择WLAN</code>
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/26/Screenshot_2016-12-26-14-17-08.png" alt="charles"></p>
</li>
<li>
<p>使用浏览器访问百度测试</p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;叫我查尔斯好了&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="macos" scheme="http://2le.me/categories/macos/"/>
    
    
      <category term="macos" scheme="http://2le.me/tags/macos/"/>
    
  </entry>
  
  <entry>
    <title>emacs-mobileorg</title>
    <link href="http://2le.me/2016/12/20/emacs-mobileorg/"/>
    <id>http://2le.me/2016/12/20/emacs-mobileorg/</id>
    <published>2016-12-20T03:01:40.000Z</published>
    <updated>2016-12-29T02:11:09.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><blockquote>
<p>MobileOrg is a FREE (open-source) iPhone and iPod Touch application for storing, searching, viewing and editing your Org-mode files. MobileOrg works offline. Although you may not always be online, you can always access your data. You can even capture notes while offline and sync the next time you have connectivity.
– 这是官方的介绍，大概意思就是MobileOrg是个很拽的东西，让你在手机上也能玩的起Org，不管你有没有3G，4G信号。</p>
</blockquote>
<a id="more"></a>
<h2 id="准备工作"><a class="header-anchor" href="#准备工作"> </a>准备工作</h2>
<ol>
<li>一台安装了eamcs的电脑（电脑）</li>
<li>一部安装了mobileorg的手机（手机）</li>
<li>电脑和手机同时可以访问的服务器（服务器）</li>
</ol>
<h2 id="服务器配置"><a class="header-anchor" href="#服务器配置"> </a>服务器配置</h2>
<p>登录服务器新建一文件夹用于存放要同步的文件</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line"><span class="built_in">mkdir</span> org</div></pre></td></tr></table></figure>
<h2 id="电脑配置"><a class="header-anchor" href="#电脑配置"> </a>电脑配置</h2>
<h3 id="emacs配置-2016-12-28-20-44-20更新去掉几个文件"><a class="header-anchor" href="#emacs配置-2016-12-28-20-44-20更新去掉几个文件"> </a>emacs配置(2016-12-28 20:44:20更新去掉几个文件)</h3>
<p>将以下代码添加到emacs的配置文件<code>~/.emacs</code>或者<code>~/.emacs.d/init.el</code></p>
<figure class="highlight clojure"><table><tr><td class="code"><pre><div class="line"><span class="comment">;; This is just an example.  The way you do it might be</span></div><div class="line"><span class="comment">;; completely different, and that's fine, as long as you wind up</span></div><div class="line"><span class="comment">;; with `org-agenda-files' set usefully.</span></div><div class="line">(<span class="name">setq</span> org-directory <span class="string">"~/org/"</span>) <span class="comment">;;org主目录</span></div><div class="line">(<span class="name">custom-set-variables</span></div><div class="line"> '(<span class="name">org-agenda-files</span> (<span class="name"><span class="builtin-name">quote</span></span> (<span class="string">"todo.org"</span></div><div class="line">                            <span class="string">"private/personal.org"</span>))))<span class="comment">;;上边定义了org主目录这里可以写相对路径</span></div><div class="line"><span class="comment">;;这里设置MobileOrg同步的文件如果不配置则默认同步org-agenda-files列表</span></div><div class="line"><span class="comment">;;(setq org-mobile-files (list "office.org"</span></div><div class="line"><span class="comment">;;                 "home.org"</span></div><div class="line"><span class="comment">;;                 ))</span></div><div class="line"></div><div class="line">(<span class="name">setq</span> org-mobile-directory <span class="string">"/bl@tunnel.ink:org"</span>) <span class="comment">;;服务器路径，格式： /[用户名@]&lt;服务器&gt;:&lt;电脑的org文件将同步到的目录&gt;。</span></div><div class="line">(<span class="name">setq</span> org-mobile-inbox-for-pull <span class="string">"~/org/index.org"</span>)<span class="comment">;;手机同步用。注：这个地址要写绝对路径！</span></div></pre></td></tr></table></figure>
<h3 id="建立相关文件和文件夹"><a class="header-anchor" href="#建立相关文件和文件夹"> </a>建立相关文件和文件夹</h3>
<figure class="highlight irpf90"><table><tr><td class="code"><pre><div class="line">cd Documents</div><div class="line"><span class="keyword">touch</span> work.org </div><div class="line">mkdir <span class="keyword">private</span></div><div class="line"><span class="keyword">touch</span> <span class="keyword">private</span>/personal.org</div></pre></td></tr></table></figure>
<h2 id="手机配置"><a class="header-anchor" href="#手机配置"> </a>手机配置</h2>
<h3 id="选择ssh"><a class="header-anchor" href="#选择ssh"> </a>选择ssh</h3>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/Screenshot_2016-12-20-11-29-53.png" alt="mobileorg手机配置示意"><span class="image-caption">mobileorg手机配置示意</span></p>
<h3 id="填写服务器信息"><a class="header-anchor" href="#填写服务器信息"> </a>填写服务器信息</h3>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/Screenshot_2016-12-20-11-30-15.png" alt="mobileorg手机配置示意"><span class="image-caption">mobileorg手机配置示意</span></p>
<h2 id="开始同步"><a class="header-anchor" href="#开始同步"> </a>开始同步</h2>
<ol>
<li>随便写点东西
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/20161220114454.png" alt="电脑写内容展示"><span class="image-caption">电脑写内容展示</span></li>
<li>
<kbd style="border:1px solid gray;font-size:1.2em;box-shadow:1px 0 1px 0 #eee, 0 2px 0 2px #ccc, 0 2px 0 3px #444;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin:2px 3px;padding:1px 5px;">M-x</kbd> org-mobile-push 然后输入密码，emacs会通过scp命令自动将文件传到服务器
</li>
<li>手机点击同步按钮（就是右上角那个圈圈）
<img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/20/Screenshot_2016-12-20-11-41-38.png" alt="手机同步内容展示"><span class="image-caption">手机同步内容展示</span></li>
</ol>
<h2 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h2>
<p><a href="http://svn.red-bean.com/repos/main/3bits/mobile_org_3bits.txt" target="_blank" rel="external">http://svn.red-bean.com/repos/main/3bits/mobile_org_3bits.txt</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;MobileOrg is a FREE (open-source) iPhone and iPod Touch application for storing, searching, viewing and editing your Org-mode files. MobileOrg works offline. Although you may not always be online, you can always access your data. You can even capture notes while offline and sync the next time you have connectivity.
– 这是官方的介绍，大概意思就是MobileOrg是个很拽的东西，让你在手机上也能玩的起Org，不管你有没有3G，4G信号。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="emacs" scheme="http://2le.me/categories/emacs/"/>
    
    
      <category term="emacs" scheme="http://2le.me/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>boot2docker</title>
    <link href="http://2le.me/2016/12/13/boot2docker/"/>
    <id>http://2le.me/2016/12/13/boot2docker/</id>
    <published>2016-12-13T00:31:44.000Z</published>
    <updated>2016-12-13T03:30:40.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>osx下安装boot2docker</p>
<a id="more"></a>
<h2 id="下载安装包"><a class="header-anchor" href="#下载安装包"> </a>下载安装包</h2>
<p><a href="https://github.com/boot2docker/osx-installer/releases/" target="_blank" rel="external">github</a></p>
<h2 id="安装"><a class="header-anchor" href="#安装"> </a>安装</h2>
<h2 id="命令行启动"><a class="header-anchor" href="#命令行启动"> </a>命令行启动</h2>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><div class="line"><span class="keyword">boot2docker </span>init <span class="comment">#只需要执行一次</span></div><div class="line"><span class="keyword">boot2docker </span>start</div><div class="line"><span class="keyword">boot2docker </span><span class="keyword">shellinit</span></div><div class="line">eval <span class="string">"$(boot2docker shellinit)"</span> <span class="comment">#只对当前会话生效</span></div></pre></td></tr></table></figure>
<h2 id="验证是否安装成功"><a class="header-anchor" href="#验证是否安装成功"> </a>验证是否安装成功</h2>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><div class="line">docker <span class="keyword">run</span><span class="bash"> hello-world</span></div></pre></td></tr></table></figure>
<h2 id="基本练习"><a class="header-anchor" href="#基本练习"> </a>基本练习</h2>
<figure class="highlight applescript"><table><tr><td class="code"><pre><div class="line">boot2docker status</div><div class="line">docker <span class="built_in">version</span></div></pre></td></tr></table></figure>
<h3 id="在docker上启动一个nginx容器"><a class="header-anchor" href="#在docker上启动一个nginx容器"> </a>在docker上启动一个nginx容器</h3>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><div class="line">docker <span class="keyword">run</span><span class="bash"> <span class="_">-d</span> -P --name web nginx</span></div></pre></td></tr></table></figure>
<p>使用<code>docker ps</code>查看运行的容器</p>
<p>使用<code>docker port web</code>查看容器端口</p>
<p>获取boot2docker主机地址</p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><div class="line"><span class="keyword">boot2docker </span><span class="built_in">ip</span></div></pre></td></tr></table></figure>
<p>停止并删除容器</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><div class="line">docker <span class="built_in">stop</span> web</div><div class="line">docker rm web</div></pre></td></tr></table></figure>
<h2 id="安装compose"><a class="header-anchor" href="#安装compose"> </a>安装compose</h2>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line">curl -L https:<span class="regexp">//gi</span>thub.com<span class="regexp">/docker/</span>compose<span class="regexp">/releases/</span>download<span class="regexp">/1.3.1/</span>docker-compose-`uname -s`-`uname -m` &gt; <span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>docker-compose</div><div class="line">chmod +x <span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>docker-compose</div></pre></td></tr></table></figure>
<h2 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h2>
<p><a href="http://www.widuu.com/docker/compose/install.html" target="_blank" rel="external">http://www.widuu.com/docker/compose/install.html</a>
<a href="http://www.widuu.com/docker/installation/mac.html" target="_blank" rel="external">http://www.widuu.com/docker/installation/mac.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;osx下安装boot2docker&lt;/p&gt;
    
    </summary>
    
      <category term="docker" scheme="http://2le.me/categories/docker/"/>
    
    
      <category term="docker" scheme="http://2le.me/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>hexo-tag-demo-demo</title>
    <link href="http://2le.me/2016/12/07/hexo-tag-demo-demo/"/>
    <id>http://2le.me/2016/12/07/hexo-tag-demo-demo/</id>
    <published>2016-12-07T05:44:49.000Z</published>
    <updated>2016-12-07T08:45:36.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><link rel="stylesheet" href="/css/demobox.css">
<p>hexo里创建html代码demo</p>
<a id="more"></a>

    <div class="demobox">
      <div class="demobox-result">
  <div id="colorbox"></div>
  <button id="demo-button">Click Me</button>
<script>(function(){
  document.getElementById('demo-button').onclick = function() {
    var randomColor = '#' + Math.random().toString().substr(2,6);
    document.getElementById('colorbox').innerHTML = randomColor;
    document.getElementById('colorbox').style.background = randomColor;
  }
})();</script><style>
  #colorbox {
    border: 1px solid #ddd;
    height: 150px;
    width: 200px;
    line-height: 150px;
    text-align: center;
    margin-bottom: 20px;
    color: #fff;
  }
  #demo-button {
    padding: 5px 10px;
  }
</style></div>
    <div class="demobox-meta"><span class="demobox-meta-collapse" onclick="jQuery(this).parents(&apos;.demobox&apos;).toggleClass(&apos;demobox-expand&apos;)"></span><div class="demobox-name">hexo-tag-demo</div><div class="demobox-intro"><p>An example for hexo-tag-demo.</p>
<p>The <code>intro</code> tag supports <strong>markdown</strong>.</p>
</div></div><div class="demobox-code-wrap"><div class="demobox-code demobox-html"><figure class="highlight html"><figcaption><span>html</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;colorbox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;demo-button&quot;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure></div><div class="demobox-code demobox-script"><figure class="highlight javascript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">&apos;demo-button&apos;</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</div><div class="line">  <span class="keyword">var</span> randomColor = <span class="string">&apos;#&apos;</span> + <span class="built_in">Math</span>.random().toString().substr(<span class="number">2</span>,<span class="number">6</span>);</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&apos;colorbox&apos;</span>).innerHTML = randomColor;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&apos;colorbox&apos;</span>).style.background = randomColor;</div><div class="line">}</div></pre></td></tr></table></figure></div><div class="demobox-code demobox-style"><figure class="highlight css"><figcaption><span>css</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="selector-id">#colorbox</span> {</div><div class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</div><div class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</div><div class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</div><div class="line">  <span class="attribute">line-height</span>: <span class="number">150px</span>;</div><div class="line">  <span class="attribute">text-align</span>: center;</div><div class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</div><div class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</div><div class="line">}</div><div class="line"><span class="selector-id">#demo-button</span> {</div><div class="line">  <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</div><div class="line">}</div></pre></td></tr></table></figure></div></div></div>
  
]]></content>
    
    <summary type="html">
    
      &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/demobox.css&quot; /&gt;
&lt;p&gt;hexo里创建html代码demo&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="http://2le.me/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://2le.me/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>emacs-macros</title>
    <link href="http://2le.me/2016/12/06/emacs-macros/"/>
    <id>http://2le.me/2016/12/06/emacs-macros/</id>
    <published>2016-12-06T09:50:09.000Z</published>
    <updated>2016-12-20T05:49:55.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>又学一招：eamcs<ruby>宏<rp> (</rp><rt>macros</rt><rp>) </rp></ruby> , emacs带你装逼带你飞！</p>
<a id="more"></a>
<h2 id="背景"><a class="header-anchor" href="#背景"> </a>背景</h2>
<p>emacs利用宏在每行尾插入固定字符(两个空格)</p>
<h2 id="开始录制"><a class="header-anchor" href="#开始录制"> </a>开始录制</h2>
<p><code>C-x (</code></p>
<h2 id="录制"><a class="header-anchor" href="#录制"> </a>录制</h2>
<p><code>C-e &lt;spc&gt; &lt;spc&gt; C-n</code></p>
<h2 id="停止录制"><a class="header-anchor" href="#停止录制"> </a>停止录制</h2>
<p><code>C-x )</code></p>
<h2 id="回放"><a class="header-anchor" href="#回放"> </a>回放</h2>
<p><code>C-x e</code> 然后一直<code>e</code></p>
<h2 id="效果"><a class="header-anchor" href="#效果"> </a>效果</h2>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/06/emacs-macros.gif" alt="emacs-macos"><span class="image-caption">emacs-macos</span></p>
<h2 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h2>
<p><a href="http://stackoverflow.com/questions/4870704/appending-characters-to-the-end-of-each-line-in-emacs" target="_blank" rel="external">http://stackoverflow.com/questions/4870704/appending-characters-to-the-end-of-each-line-in-emacs</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;又学一招：eamcs&lt;ruby&gt;宏&lt;rp&gt; (&lt;/rp&gt;&lt;rt&gt;macros&lt;/rt&gt;&lt;rp&gt;) &lt;/rp&gt;&lt;/ruby&gt; , emacs带你装逼带你飞！&lt;/p&gt;
    
    </summary>
    
      <category term="eamcs" scheme="http://2le.me/categories/eamcs/"/>
    
    
      <category term="emacs" scheme="http://2le.me/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>python-eyeD3</title>
    <link href="http://2le.me/2016/12/06/python-eyeD3/"/>
    <id>http://2le.me/2016/12/06/python-eyeD3/</id>
    <published>2016-12-06T09:16:55.000Z</published>
    <updated>2016-12-09T05:37:15.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>用python都去mp3文件内嵌的封面</p>
<a id="more"></a>
<h2 id="背景"><a class="header-anchor" href="#背景"> </a>背景</h2>
<p>读取mp3封面</p>
<h2 id="指路人"><a class="header-anchor" href="#指路人"> </a>指路人</h2>
<blockquote>
<p>You can use eyed3 which is a great utility for handling id3 tags. To extract all images from an mp3 file you can use:</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><div class="line">&gt;eyeD3 <span class="comment">--write-images=DIR mp3_file</span></div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>This will write all embedded images from the mp3 file to the specified directory.</p>
</blockquote>
<blockquote>
<p>I just found out that ffmpeg will do the trick!</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&gt;ffmpeg -<span class="selector-tag">i</span> file<span class="selector-class">.mp3</span> file<span class="selector-class">.jpg</span></div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p><a href="http://unix.stackexchange.com/questions/41287/how-to-extract-album-cover-image-from-mp3-file" target="_blank" rel="external">http://unix.stackexchange.com/questions/41287/how-to-extract-album-cover-image-from-mp3-file</a></p>
<h2 id="eyed3试用"><a class="header-anchor" href="#eyed3试用"> </a>eyeD3试用</h2>
<h3 id="安装"><a class="header-anchor" href="#安装"> </a>安装</h3>
<p>eyeD3是个python模块可以通过<code>pip</code>安装，命令为：</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><div class="line">pip <span class="keyword">install</span> eyeD3</div></pre></td></tr></table></figure>
<p>如果没安装<code>pip</code>，提前安装<code>sudo easy_install pip</code></p>
<h2 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h2>
<p><a href="http://eyed3.nicfit.net/" target="_blank" rel="external">官网</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;用python都去mp3文件内嵌的封面&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://2le.me/categories/python/"/>
    
    
      <category term="python" scheme="http://2le.me/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>追梦赤子心</title>
    <link href="http://2le.me/2016/12/06/zhuimengchizixin/"/>
    <id>http://2le.me/2016/12/06/zhuimengchizixin/</id>
    <published>2016-12-06T08:06:22.000Z</published>
    <updated>2016-12-12T05:41:30.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>看段子『横空出世』里的一个片段，<s>可能是</s>段友加的一段背景音乐，很好听！</p>
<a id="more"></a>
<blockquote>
<p>鲜花的世界到底在哪里<br>
如果它真的存在那么我一定会去<br>
我想在那里最高的山峰矗立<br>
不在乎它是不是悬崖峭壁</p>
<p>用力活着用力爱哪怕肝脑涂地<br>
不求任何人满意只要对得起自己<br>
关于理想我从来没选择放弃<br>
即使在灰头土脸的日子里</p>
<p>也许我没有天分<br>
但我有梦的天真<br>
我将会去证明用我的一生<br>
也许我手比脚笨<br>
但我愿不停探寻<br>
付出所有的青春不留遗憾</p>
<p>向前跑 迎着冷眼和嘲笑<br>
生命的广阔不历经磨难怎能感到<br>
命运它无法让我们跪地求饶<br>
就算鲜血洒满了怀抱</p>
<p>继续跑 带着赤子的骄傲<br>
生命的闪耀不坚持到底怎能看到<br>
与其苟延残喘不如纵情燃烧吧<br>
有一天会再发芽</p>
<p>未来迷人绚烂总在向我召唤<br>
哪怕只有痛苦作伴也要勇往直前<br>
我想在那里最蓝的大海扬帆<br>
绝不管自己能不能回还</p>
<p>失败后郁郁寡欢<br>
那是懦夫的表现<br>
只要一息尚存请握紧双拳<br>
在天色破晓之前<br>
我们要更加勇敢<br>
等待日出时最耀眼的瞬间</p>
<p>向前跑 迎着冷眼和嘲笑<br>
生命的广阔不历经磨难怎能感到<br>
命运它无法让我们跪地求饶<br>
就算鲜血洒满了怀抱</p>
<p>继续跑 带着赤子的骄傲<br>
生命的闪耀不坚持到底怎能看到<br>
与其苟延残喘不如纵情燃烧<br>
为了心中的美好<br>
不妥协直到变老</p>
</blockquote>
<div id="aplayer1" class="aplayer" style="margin-bottom: 20px;"></div><script>var aplayer1 = new APlayer({element: document.getElementById("aplayer1"),narrow: false,autoplay: false,showlrc: 0,music : {title: "追梦赤子心",author: "GALA",url: "http://7xlbo3.com1.z0.glb.clouddn.com/music/%E8%BF%BD%E6%A2%A6%E8%B5%A4%E5%AD%90%E5%BF%83.mp3",pic: "http://7xlbo3.com1.z0.glb.clouddn.com/music/%E8%BF%BD%E6%A2%A6%E8%B5%A4%E5%AD%90%E5%BF%83.jpg"}});aplayer1.init();</script>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;看段子『横空出世』里的一个片段，&lt;s&gt;可能是&lt;/s&gt;段友加的一段背景音乐，很好听！&lt;/p&gt;
    
    </summary>
    
      <category term="music" scheme="http://2le.me/categories/music/"/>
    
    
      <category term="music" scheme="http://2le.me/tags/music/"/>
    
  </entry>
  
  <entry>
    <title>小技巧 - svn篇</title>
    <link href="http://2le.me/2016/12/02/svn-tip/"/>
    <id>http://2le.me/2016/12/02/svn-tip/</id>
    <published>2016-12-02T01:31:02.000Z</published>
    <updated>2016-12-14T03:51:37.000Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>svn的一些小技巧</p>
<a id="more"></a>
<h2 id="svn部分检出"><a class="header-anchor" href="#svn部分检出"> </a>svn部分检出</h2>
<figure class="highlight vim"><table><tr><td class="code"><pre><div class="line">svn <span class="keyword">co</span> --depth <span class="built_in">empty</span> http://xxx.xxx.xxx.xxx/svn/RedMaster RedMaster</div><div class="line">svn <span class="keyword">update</span> --<span class="keyword">set</span>-depth infinity RedMaster/<span class="number">1.3</span>需求管理</div></pre></td></tr></table></figure>
<blockquote>
<p><em>–depth empty</em><br>
<strong>Include only the immediate target of the operation, not any of its file or directory children.</strong><br>
<em>–depth files</em><br>
<strong>Include the immediate target of the operation and any of its immediate file children.</strong><br>
<em>–depth immediates</em><br>
<strong>Include the immediate target of the operation and any of its immediate file or directory children. The directory children will themselves be empty.</strong><br>
<em>–depth infinity</em><br>
<strong>Include the immediate target, its file and directory children, its children’s children, and so on to full recursion.</strong></p>
</blockquote>
<blockquote>
<p><em>–set-depth ARG</em><br>
<strong>Sets the sticky depth on a directory in a working copy to one of empty, files, immediates,or infinit.</strong></p>
</blockquote>
<h3 id="参考"><a class="header-anchor" href="#参考"> </a>参考</h3>
<p>svn-book <a href="https://pan.baidu.com/s/1kU7vD2Z" target="_blank" rel="external">百度云</a> 密码: bian</p>
<h2 id="svn比较本地副本修改内容"><a class="header-anchor" href="#svn比较本地副本修改内容"> </a>svn比较本地副本修改内容</h2>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><div class="line"><span class="attribute">svn diff</span></div></pre></td></tr></table></figure>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/14/20161214112527.png" alt="svn diff"><span class="image-caption">svn diff</span></p>
<p>可以指定diff客户端</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><div class="line">svn diff --diff-<span class="keyword">cmd</span><span class="bash">=meld</span></div></pre></td></tr></table></figure>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/14/20161214112724.png" alt="svn diff meld"><span class="image-caption">svn diff meld</span></p>
<p>也可以直接修改svn配置文件<code>~/.subversion/config</code>中<code>diff-cmd</code>选项,这样就不用每次都输入参数了</p>
<p><img src="http://7xlbo3.com1.z0.glb.clouddn.com/2016/12/14/20161214114317.png" alt="svn config"><span class="image-caption">svn config</span></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;svn的一些小技巧&lt;/p&gt;
    
    </summary>
    
      <category term="svn" scheme="http://2le.me/categories/svn/"/>
    
    
      <category term="svn" scheme="http://2le.me/tags/svn/"/>
    
  </entry>
  
</feed>
