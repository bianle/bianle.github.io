<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.proxy.ustclug.org/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Bianle's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Bianle's Blog">
<meta property="og:url" content="http://2le.me/page/22/index.html">
<meta property="og:site_name" content="Bianle's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bianle's Blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://2le.me/page/22/"/>


  <title> Bianle's Blog </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  



  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?3519f77bf8b5b1d5a98cc671b3a83214";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Bianle's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">The quieter you become, the more you are able to hear.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/07/04/game-dnf/" itemprop="url">
                  我看了很感人
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-07-04T18:09:17+08:00" content="2012-07-04">
              2012-07-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/游戏/" itemprop="url" rel="index">
                    <span itemprop="name">游戏</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/07/04/game-dnf/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/07/04/game-dnf/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>傻子很少去网吧也从来没有玩过网络游戏，在网吧里看见很多人玩地下城与勇士，于是他也加入其中。傻子选了个神枪手的职业，因为他觉得很帅。 ­
就这样开始了DNF之旅，傻子进游戏后不知道怎么开枪，陪哥布林玩了好久捉迷藏，终于通关后救出赛丽亚MM。NPC赛丽亚习惯的说谢谢你了勇士，傻子还傻傻的打字说不用谢。 ­
傻子很笨花了几个小时才进了赫尔马顿城镇。一路上很多NPC和他打招呼，他很开心。他很高兴认识这么多新朋友。 ­
过了几天傻子慢慢的16级了，学会了去凯丽师傅那学技能，还很认真的帮大家完成任务。每当完成任务回来NPC送他一些装备他都会高兴的不得了。 ­
这天他正要进图，忽然看见一个小个子MM在那喊：有哪位哥哥能带带我啊？我才3级。。喊了半天没人理他。傻子觉得她很可怜走过去说：我带你吧。就这样傻子带她刷猛毒雷鸣废墟，因为傻子16级了打这的怪很轻松，傻子叫MM站远会伤到你的。MM说傻子真体贴。傻子呵呵的笑了。傻子说你小心点，走着也会摔倒，真是个孩子。MM说那你就叫我孩子吧。我喜欢听你叫我孩子。孩子说喜欢树上打下来的草莓，傻子说那我摘给你。孩子说你真好。孩子傻子心里感觉很开心。 ­
第二天傻子早饭也没吃急急的跑去网吧上了游戏，因为他们约了明天一起组队升级…孩子还没来，傻子在游戏上发呆。到中午快一点的时候孩子上游戏了说不好意思来晚了问傻子吃了饭没？下午可要好好战斗。。傻子说早吃了就等你了。就这样傻子带孩子练级去了，孩子说冰姐姐和火姐姐好漂亮阿。傻子笑着说没有你可爱，孩子打了个可爱的表情<sup>-</sup>。在大街上孩子看见别的魔法师穿了一套时装嚷着说要是穿在我身上肯定比她们漂亮.傻子在屏幕前红着脸不说话了，他真想为孩子买一套时装，可是傻子真的很穷，穷的连上网费都没。更别说游戏里那么贵的时装虽然他不知道要多少钱。傻子决定一定要为孩子买一套傻子这么想。傻子感觉第一次喜欢一个人了，只要有她在身边就是件幸福的事。 ­
就这样他们边打怪边聊天孩子告诉傻子很多游戏里的知识：在西海岸的那一边有着一座美丽的天空之城，在天帷巨兽遗迹里住着一位邪恶的教主控制着善良的GBL，在白雪岂岂的万年雪山有一位迷失心智的冰心少年，在暗黑城堡有着一位昔日讨伐恶魔，而战死无法得到安息的无头骑士很多很多……傻子认真的听着，原来DNF的世界是那么大，傻子说以后的路我们一起走吧。嗯孩子轻轻的说。孩子还告诉傻子自己有个50多级的大号，等你级高点了送你点装备，傻子眼眶湿湿的，第一次有人对他这么好。 ­
从没干过什么的傻子去找工作，别人问傻子能做什么，傻子摇摇头。他们看傻子呆头呆脑的都拒绝了他都说你到别处看看去吧，傻子跑了很多地方，在一个送桶装矿泉水的地方傻子苦苦的哀求老板说用他吧，自己不要很多钱，只要能赚到上网费就行了。大叔看傻子挺真诚的也很可怜对他说，每个月三百块，送一桶水提成5毛。明天来上班吧，傻子不停的谢老板，傻子很开心找到了自己的第一份工作。。 ­
孩子是傻子的第7个qq好友，孩子发个视频过来说想看看帅哥，傻子不敢接他怕孩子看到自己傻样子会不理他了，于是对孩子说网吧里没视频。孩子说那算了有空去空间给我踩踩。傻子点进孩子空间里面很好看，对孩子说里面很漂亮，孩子说都是自己弄的花了很多时间心思，傻子夸孩子真用心。傻子无意中点进孩子的相册看到了孩子的照片，梳着马尾辫的孩子笑的很灿烂人也漂亮。傻子认为她就是一个天使，傻子偷偷的把照片下到自己手机上。晚上睡觉的时候傻子心里想的都是孩子，看着孩子的照片傻子第一次失眠了…. ­
这时傻子17级，孩子15级了。。孩子说我们去杀僵尸吧这里没经验了，傻子呵呵大笑说没问题，于是进图傻子操作很菜技能也不懂的怎么用，挂了出来。孩子说你真笨，傻子不好意思的对孩子说对不起，再来一次吧。第二次也虚弱了出来，孩子嘟着嘴说我18级的时候能过王者级别的了。傻子红着脸不说话了。他认为现在还不能保护好孩子决定等练厉害了在来找她，于是傻子对孩子说等我。把身上仅有的4万金币交易给了孩子，她没说话转身走了。。­
傻子望着孩子柔弱的背影消失后转身也进了暗黑雷鸣废墟…­
因为没钱买药傻子不知道自己虚弱了多少次，一次次的冲进去副本里，开始从普通到冒险。傻子到18级的时候毅然选择了转漫游，因为他知道孩子的大号也是漫游，转职任务上傻子花了一天时间终于自己完成了。傻子认为只要自己努力没什么完不成的。 ­
慢慢的…傻子打勇士级的僵尸图了还是很吃力。在路上边采集树上的草莓，既使自己快挂了也舍不得吃草莓，因为他还没忘记孩子喜欢草莓，他要送给她。 ­
过了两天当傻子到19级的时候他已经能轻松的过JS王者了。傻子认为现在能找孩子能保护她了，发消息过去没不用回复。。一连几天傻子都没见孩子上线，发了好多邮件，,也去空间留了好多言，傻子没心情打怪去哪儿都虚弱回来。那时，孩子是傻子的一切。就这样傻子还是每天等孩子。过了几天傻子看见孩子上线了，傻子跑过去找孩子，远远的看见孩子身边有一位高等级时装的大将军，他们正一起走向西海岸的天空之城…傻子想跑过去叫孩子，可是脚步却停住了。傻子心里酸酸的第一次感受到吃醋的味道。。­
第二天傻子见到孩子，问她怎么这些天没上线。孩子说玩大号去了。傻子傻傻地说：走，孩子我现在能通JS王了可以保护你了。孩子对傻子说你自己去吧<code>我要去天空之城了有一个朋友在西海岸等她，并在交易栏里放了把20级紫色的左轮枪。转身要走。傻子知道是昨天那个人在等她，忽然间好像明白了什么，他怕失去她怕再也见不到她了。在赫尔马顿大街上傻子用这生从未有过的勇气大喊：等等，孩子我一直喜欢你。 ­ 孩子愣了愣对傻子说道：我不会喜欢一个低级的穷傻子，当初只是为了让你带我练级才和你在一起而已…­ 傻子哀求的说：给我一次机会吧。 ­ 孩子讽刺的说：等你有枪神的称号在来找我吧。孩子想让傻子知难而退，她认为傻子那么笨是不可能完成的。因为她知道枪神之路是多少艰难。一个人，一把枪。 ­ 傻子知道枪神是漫游48级转职的称号，傻子交易她放上去99颗草莓和余下的金币，傻子只说了句等我。转身就走了。孩子看着草莓心里感到有点内疚… ­ 没有孩子的陪伴，傻子有点孤单，当傻子到20级时拿着孩子送的武器心里暖暖的，这一天傻子正要去完成诺顿大叔交给他最后一次消灭僵尸王的任务。在进图的时候看见一个小个子魔法师喊着找人带JS王，看着她傻子不由想起孩子，密她说我带你去。那女孩说你能行吗，多少钱？傻子说不要钱。傻子心肠总是热心的几盘下来帮那女孩任务都做了。傻子PL用完了，对女孩说要下了再见。女孩感到惊讶现在游戏里还有这种人不是傻子吧。傻子被加了好友，成了女孩的第一个好友…­ 第二天傻子上线向赫尔城镇的朋友们告别踏上去西海岸天空之城的路，面对新的副本傻子很努力，一个人从普通到王者因为他不想再让孩子说他笨。 ­ 女孩转的是召唤师因为她觉得这个职业很安逸，宝宝一出来自己可以不用打怪。时间长了女孩一个人练级也会觉得无聊，于是想找人组队一起练，可是别人见她是召唤都不愿意组女孩，说她招宝宝会卡，女孩觉得委屈。。 ­ 一天，女孩翻了下好友名单看见傻子在线想起了是他， ­ 发了个消息过去：你好！­ 傻子见有个窗口密他，傻子不记得女孩了只好发说了句你好。 ­ 女孩以为傻子记得自己，很高兴就对傻子说一起组队练级吧。 ­ 傻子很意外，还没有谁组过自己呢，都说漫游刷图垃圾。就对女孩说好。 ­ 女孩迈着大步过去找傻子，傻子23级.女孩21级.­ 傻子说女孩你怎么养这么多怪物，女孩嚷着说是自己的宝宝，不是怪物= =。傻子知道了女孩是召唤师。女孩这一天很开心，傻子没嫌弃自己卡，还帮自己完成任务，就这样傻子和女孩重新认识了。 ­ 傻子在路上打到一个学者护腕，女孩羡慕的说那个值很多钱，以后自己有钱也想买一个。傻子说那送你吧。女孩看着一身垃圾装备的傻子说你还是卖了自己买装备吧。傻子说以后还可以打的到。女孩不好意思的接过护腕说以后有钱了还你。傻子呵呵大笑。女孩心里想原来他真的是个傻子。。。 ­ 以后女孩每天上线就找傻子一起练级。觉得和傻子在一起很塌实。女孩对傻子说做我师傅吧。傻子说我没什么本领教给你，女孩说你能带我练级帮我过任务，虽然女孩一个人也能完成。傻子第一次感觉被人需要，于是女孩成了傻子的徒弟。 ­ 傻子和女孩成功登上最后的悬空城后，女孩说真是座美丽的天空之城，傻子想起了孩子的话，原本他们约好一起走，可是现在却不在他身边，傻子有点伤心。 ­ 女孩问傻子说师傅你怎么玩一个难练的漫游，傻子说为了一个孩子，他喜欢的人，还说她在等他。女孩听了傻子讲他和她的故事，觉得傻子好傻也很感动，就对傻子说如果有人对我这么好，我马上嫁给他。傻子笑笑说你会遇见喜欢你的人的。女孩决定帮师傅快点到48级。 ­ 来到天帏巨兽,他们一起穿过丛林越过炼欲翻过第一山脊，傻子觉得很轻松，女孩说师傅你真厉害。傻子笑笑说谁叫我是你师傅，傻子只是不知道，因为有女孩在。在打怪的时候女孩心疼的拿着皮鞭抽她的宝宝，叫他们打快点。。这时傻子35级.女孩34级. ­ 傻子这天上班还没来，女孩在逛街时看见一把很精美的35左轮，虽然有点贵，女孩还是买下来了，并把它加到7。傻子上线的时候女孩把左轮交到傻子手里说送师傅的。傻子说不用了，我有武器。女孩知道傻子舍不得孩子送的那把武器，女孩生气了说师傅心里没有她这个徒弟。傻子见女孩生气不知道怎么办只好换上她送的武器，把孩子送他的左轮小心的装进背包。女孩这才笑了。 ­ 女孩对傻子说想看看你师傅长什么样。傻子只把女孩当徒弟所以接了视频，女孩看到的是一个瘦瘦很清秀的男孩，女孩觉得自己脸有点红。 ­ 傻子对女孩说徒弟你真可爱。 ­ 女孩说只是可爱吗，难道我不漂亮？ ­ 傻子说也漂亮。女孩说了句笨蛋。 ­ 女孩是很漂亮，甚至比孩子还漂亮。 ­ 女孩对傻子说以后不许在找其他徒弟了，傻子问为什么。女孩说如果你有10个徒弟了就没什么时间陪我练级了。 ­ 傻子说谁会找我这个又穷等级又低的人做师傅，也只有你这个傻徒弟了，女孩笑了。 ­ 女孩心里喜欢上傻子了，可是她知道傻子心里只有孩子。 ­ 斯顿雪域，傻子救出查理班图族长给予傻子勇士称号。时间过的很快，转眼傻子到45级了，傻子很高兴离枪神是那么近了，女孩更加珍惜和傻子在一起的时间。- ­ 女孩问傻子说：师傅以后如果你和孩子在一起了，还会陪我练级么。 ­ 傻子说：傻徒弟你不能老跟着师傅呀，你以后也会有喜欢的人和喜欢你的人。 ­ 女孩喃喃说：他有喜欢的人了， ­ 傻子说你这么好，谁不喜欢是他的损失。女孩：……­ 傻子快到48级的时候，女孩为了祝贺傻子成为枪神决定给傻子一份礼物，她要亲手给傻子强化一把+11的速射左轮，女孩从来舍不得给自己买装备，虽然很便宜。女孩用她存来的金币买了武器，可是强化11不是那么简单，失败了几次后女孩包里的金币所剩无几，她只好把仓库辛苦攒来的材料晶体什么的都卖了，最后一次成功了，女孩很欣慰。 ­ 今天傻子升级到48级，满心欢喜的去找凯丽师傅觉醒枪神，可是凯丽对傻子说虽然你已经获得勇士证明，可是对于枪神来说远远不够，等你打倒对手获得1000胜点在来吧。傻子从来没有去过PK场，单纯的傻子怎么打的赢那些钩心斗角的人，只能一点一点的赚胜点，女孩为了让傻子早点完成帮傻子刷胜点，整整一个通宵傻子终于觉醒了，女孩却感冒病倒了。下的时候对傻子说师傅恭喜你成为枪神，徒弟送你的礼物祝你和喜欢的人幸福。傻子走了去找孩子了。。女孩望着傻子.. ­ 傻子已经三个多月没见到孩子，傻子找到孩子再次见到她的时候孩子已经50多级了，穿着一身漂亮的时装的元素法师。傻子说好久不见，我完成约定来找你了。 ­ 孩子见到傻子很惊讶，甚至有点忘记他了，孩子想不到傻子能成为枪神还会来找自己，孩子看着傻子一身垃圾装备，却有一把好武器，她不知道傻子是怎么过来的。，孩子默默不语。傻子说孩子以后我们一起吧。孩子认为傻子只是凑巧罢了，成为枪神只要有耐性谁都可以，傻子只有傻劲。孩子扔下冰冷冷的一句话：等你有墨竹手镯，贤哲戒指，尼玛神兽项链在来找我吧。孩子认为这次傻子该知道什么意思了吧…. ­ 傻子只是个单纯的人，傻子对女孩说这3样东西哪里打，女孩听了傻子的话告诉傻子说那孩子根本不喜欢你。傻子说没有，她在等我。女孩说你别傻了，你知道这3样东西多珍贵吗，她只是个骗子。傻子第一次对女孩生气说不许说孩子坏话，并解除了师徒关系。女孩哭了。 ­ 好几天傻子和女孩都没有说话，女孩很想傻子，主动找到傻子说师傅我错了。傻子也说了句对不起。于是又重新拜了师。傻子很穷连一个墨竹的钱也没，更别谈其他的了，女孩说买不起我们自己打，他们查了资料悬空出墨竹手镯，于是刷悬空，第七天出了墨竹。 ­ 网上说禁地出贤哲戒指图，于是又去刷禁地，一星期，二星期，很幸运第20天出了图纸。 ­ 傻子高兴的对女孩说，只要努力没什么做不到的。女孩说也许是吧… ­ 最后一个是尼玛项链，傻子和孩子刷过蜘蛛山脊墓地，一个月.两个月. ­ 傻子还是相信只要努力没什么做不到。 ­ 有的东西就算在怎么努力也是没结果，就像我和你有缘无份，女孩心里说道。­ 女孩去网上花几百元买了一条，在刷图的时候趁傻子不注意把项链扔到地上。女孩对傻子说哇</code>师傅打到项链了。傻子笑呵呵的拣起项链对女孩说：终于打到了，明天可以去找孩子，谢谢你徒弟陪我打这么久。女孩心里祝福傻子。这时傻子和女孩都50级了。( ­
傻子再一次找到孩子，这时候她已经60级了，傻子把3样首饰交到她手里，孩子吃惊的看着傻子，感到愧疚原来傻子是真的喜欢自己，可是孩子有老公了那个大将军他们很久以前就在一起了。 ­
孩子不想在骗傻子了就对他说：你找个好女孩吧，我只是个坏孩子。并把东西还给傻子。 ­
傻子说：我只要和你在一起，没有谁能代替你。 ­
女孩说：我已经有老公了，对不起.你走吧. ­
傻子说是我做的不好还是什么？只要你说的我一定做的到。 ­
女孩狠了狠心对傻子说：如果你能收集到99999颗草莓，我就答应嫁给你。 ­
傻子还是傻傻的说了句等我，就转身走了。孩子望着傻子只说了句忘记我吧。 ­
以后的日子，在格兰之森总是有着一个50多级的傻子在喊着收草莓，有些人看见傻子每天在喊着收草莓故意把草莓卖的很贵，即便如此傻子还是买了，很快以前存的金币用完了。 ­
女孩知道了这事以后没说什么，只是默默的陪在傻子身边，如果能早点遇见傻子该多好。­
傻子在刷草莓的时候也会带那些新人，只是要求把掉落的草莓给他，也会无私的把打到的一些低级装备和金币送给他们 ­
可是99999个草莓是那么遥遥无期，可是傻子还是一如既往的坚持着，望着仓库里慢慢堆起来的草莓，傻子相信努力的话没什么做不到。新手们问傻子为什么收集草莓？ ­
傻子呵呵的说有个女孩在等他，等他娶她。因为他们约定好了，他们都说你好傻，傻子笑笑。日子久了大家也会把拣到的草莓送给傻子。 ­
不知过了多久，傻子依然收着草莓，有一天，格兰这来了两个很高级的人-一个元素和一个大将军。在那喊着公会收人，傻子呆呆着望着那个元素，那个元素也望着傻子回忆着什么。公会老大指着傻子说老婆你看那个傻子，不知道干什么的每天带人不收钱只要草莓真是傻子哈哈。­
那个元素对他说不许叫他傻子。男人和她吵。他火了，叫了会里几个人来刷频骂傻子。 ­
傻子傻傻的站那被一群人骂，不知道怎么办好。女孩跑过去和一群男人评理。那些人连骂女孩一起骂。 ­
就在这时，不知道谁发了个喇叭，说傻子和女孩在10频道被人欺负了，不多久，格兰这来了好多人，有十多级的新手，也有五六十级的高级号还有一些名气很大的工会老大都来了，原来他们都是新人时期受到过傻子和女孩帮助过的人，傻子一直把他们带到格兰毕业，对他们来说傻子和女孩就是他们的师傅一样。好多人指责那个骂傻子的工会老大，服务器喇叭也一直没停过，有的人刷频的骂那工会老大，有的喊谁欺负傻子和女孩他就别想在这服混下去，有的提议说把那人拉黑。不一会刚才欺负傻子的那群人头顶上出现全民公敌的称号，灰溜溜的下线了。­
漫骂声结束后，大家又说了很多鼓励傻子的话，祝福傻子能找日和孩子在一起祝他们幸福“““ ­
傻子沉默了很久，买了个喇叭只写了句谢谢大家“`然后下线了。 ­
女孩找到孩子问为什么对这么对傻子，如果不喜欢可以直接说出来没必要老欺骗他的感情。孩子说没有，只是他没理解我话的意思而已。­
女孩说傻子哪里不好了。 ­
孩子说他很好，可惜他级不高，带不了我升级，也不会给我买漂亮的时装。女孩气愤的说傻子很努力的升级，可是你为什么都不等等他，他给你冲的QB都可以买好几套时装了，你还不知足。 ­
孩子说。。。。QB？我不知道。 ­
女孩说傻子每个月都有给你冲，都是他辛苦工作赚来的。自己都舍不得买时装都给你了。 ­
孩子查询了下qq帐户，吃惊的望着上面的1080个QB….­
女孩哭着说还她的师傅，还她的傻子。 ­
很长时间傻子再也没有上过线，女孩也走了，没有了傻子游戏对她来说也没意义。 ­
她终于明白了那句话：世界上最遥远的距离不是生与死，而是我站在你面前,你却不知道我喜欢你…… ­
孩子依旧在游戏，她在等傻子，等他娶她。为什么失去才懂的珍惜？只是她明白的是不是晚了点。 ­
很多人都说傻子对孩子彻底失望了，离开了游戏。 ­
也有人传言说傻子的号给盗了，据盗号的说清楚的看到满仓库的草莓.99998个­
谁知道呢，傻子也许是累了.对游戏…对爱情…­
只是傻子不知道一直陪在他身边的是女孩… ­
也许若干年后.傻子回忆过往.想起女孩…会明白至尊宝对紫霞仙子说过的那段话： ­
曾经有一份真诚的爱情摆在我面前，我没有珍惜，等失去的时候，才后悔莫及。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/07/04/web-gxt-desktop/" itemprop="url">
                  gxt desktop
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-07-04T18:09:17+08:00" content="2012-07-04">
              2012-07-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/07/04/web-gxt-desktop/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/07/04/web-gxt-desktop/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><figure class="highlight lasso"><table><tr><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * Ext GWT - Ext for GWT</div><div class="line"> * Copyright(c) 2007-2009, Ext JS, LLC.</div><div class="line"> * licensing@extjs.com</div><div class="line"> *</div><div class="line"> * http://extjs.com/license</div><div class="line"> */</div><div class="line">package com.google.gwt.sample.hello.client;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.<span class="built_in">Date</span>;</div><div class="line"><span class="keyword">import</span> java.util.<span class="built_in">List</span>;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.Desktop;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.Shortcut;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.StartMenu;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.TaskBar;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.Style.Scroll;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.BaseModel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.BaseModelData;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.ModelData;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.ModelIconProvider;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.event.ComponentEvent;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.event.MenuEvent;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.event.SelectionListener;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.store.GroupingStore;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.store.TreeStore;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.util.IconHelper;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.ContentPanel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.Info;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.TabItem;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.TabPanel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.Window;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.button.Button;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.button.ToolButton;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.ColumnConfig;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.ColumnModel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.Grid;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.GridGroupRenderer;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.GroupColumnData;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.GroupingView;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.layout.AccordionLayout;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.layout.FitLayout;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.menu.Menu;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.menu.MenuItem;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.toolbar.SeparatorToolItem;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.toolbar.ToolBar;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.treepanel.TreePanel;</div><div class="line"><span class="keyword">import</span> com.google.gwt.core.client.EntryPoint;</div><div class="line"><span class="keyword">import</span> com.google.gwt.i18n.client.DateTimeFormat;</div><div class="line"><span class="keyword">import</span> com.google.gwt.i18n.client.NumberFormat;</div><div class="line"><span class="keyword">import</span> com.google.gwt.user.client.ui.AbstractImagePrototype;</div><div class="line"></div><div class="line"><span class="keyword">public</span> class Hello implements EntryPoint &#123;</div><div class="line">	<span class="keyword">private</span> Desktop desktop = <span class="literal">new</span> Desktop();</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="literal">void</span> itemSelected(ComponentEvent ce) &#123;</div><div class="line">		Window w;</div><div class="line">		<span class="keyword">if</span> (ce instanceof MenuEvent) &#123;</div><div class="line">			MenuEvent me = (MenuEvent) ce;</div><div class="line">			w = me.getItem().getData(<span class="string">"window"</span>);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			w = ce.getComponent().getData(<span class="string">"window"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (!desktop.getWindows().contains(w)) &#123;</div><div class="line">			desktop.addWindow(w);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (w != <span class="built_in">null</span> &amp;&amp; !w.isVisible()) &#123;</div><div class="line">			w.show();</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			w.toFront();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="literal">void</span> onModuleLoad() &#123;</div><div class="line">		SelectionListener&lt;MenuEvent&gt; menuListener = <span class="literal">new</span> SelectionListener&lt;MenuEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(MenuEvent me) &#123;</div><div class="line">				itemSelected(me);</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">		SelectionListener&lt;ComponentEvent&gt; shortcutListener = <span class="literal">new</span> SelectionListener&lt;ComponentEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(ComponentEvent ce) &#123;</div><div class="line">				itemSelected(ce);</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">		Window gridWindow = createGridWindow();</div><div class="line">		Window accordionWindow = createAccordionWindow();</div><div class="line">		Shortcut s1 = <span class="literal">new</span> Shortcut();</div><div class="line">		s1.setText(<span class="string">"Grid Window"</span>);</div><div class="line">		s1.setId(<span class="string">"grid-win-shortcut"</span>);</div><div class="line">		s1.setData(<span class="string">"window"</span>, gridWindow);</div><div class="line">		s1.addSelectionListener(shortcutListener);</div><div class="line">		desktop.addShortcut(s1);</div><div class="line">		Shortcut s2 = <span class="literal">new</span> Shortcut();</div><div class="line">		s2.setText(<span class="string">"Accordion Window"</span>);</div><div class="line">		s2.setId(<span class="string">"acc-win-shortcut"</span>);</div><div class="line">		s2.setData(<span class="string">"window"</span>, accordionWindow);</div><div class="line">		s2.addSelectionListener(shortcutListener);</div><div class="line">		desktop.addShortcut(s2);</div><div class="line">		TaskBar taskBar = desktop.getTaskBar();</div><div class="line">		StartMenu menu = taskBar.getStartMenu();</div><div class="line">		menu.setHeading(<span class="string">"Darrell Meyer"</span>);</div><div class="line">		menu.setIconStyle(<span class="string">"user"</span>);</div><div class="line">		MenuItem menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Grid Window"</span>);</div><div class="line">		menuItem.setData(<span class="string">"window"</span>, gridWindow);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"icon-grid"</span>));</div><div class="line">		menuItem.addSelectionListener(menuListener);</div><div class="line">		menu.add(menuItem);</div><div class="line">		menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Tab Window"</span>);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"tabs"</span>));</div><div class="line">		menuItem.addSelectionListener(menuListener);</div><div class="line">		menuItem.setData(<span class="string">"window"</span>, createTabWindow());</div><div class="line">		menu.add(menuItem);</div><div class="line">		menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Accordion Window"</span>);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"accordion"</span>));</div><div class="line">		menuItem.addSelectionListener(menuListener);</div><div class="line">		menuItem.setData(<span class="string">"window"</span>, accordionWindow);</div><div class="line">		menu.add(menuItem);</div><div class="line">		menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Bogus Submenu"</span>);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"bogus"</span>));</div><div class="line">		Menu sub = <span class="literal">new</span> Menu();</div><div class="line">		for (int i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">			MenuItem item = <span class="literal">new</span> MenuItem(<span class="string">"Bogus Window "</span> + (i + <span class="number">1</span>));</div><div class="line">			item.setData(<span class="string">"window"</span>, createBogusWindow(i));</div><div class="line">			item.addSelectionListener(menuListener);</div><div class="line">			sub.add(item);</div><div class="line">		&#125;</div><div class="line">		menuItem.setSubMenu(sub);</div><div class="line">		menu.add(menuItem);</div><div class="line">		<span class="comment">// tools</span></div><div class="line">		MenuItem tool = <span class="literal">new</span> MenuItem(<span class="string">"Settings"</span>);</div><div class="line">		tool.setIcon(IconHelper.createStyle(<span class="string">"settings"</span>));</div><div class="line">		tool.addSelectionListener(<span class="literal">new</span> SelectionListener&lt;MenuEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(MenuEvent ce) &#123;</div><div class="line">				Info.display(<span class="string">"Event"</span>, <span class="string">"The 'Settings' tool was clicked"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		menu.addTool(tool);</div><div class="line">		menu.addToolSeperator();</div><div class="line">		tool = <span class="literal">new</span> MenuItem(<span class="string">"Logout"</span>);</div><div class="line">		tool.setIcon(IconHelper.createStyle(<span class="string">"logout"</span>));</div><div class="line">		tool.addSelectionListener(<span class="literal">new</span> SelectionListener&lt;MenuEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(MenuEvent ce) &#123;</div><div class="line">				Info.display(<span class="string">"Event"</span>, <span class="string">"The 'Logout' tool was clicked"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		menu.addTool(tool);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createAccordionWindow() &#123;</div><div class="line">		final Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"accordion"</span>));</div><div class="line">		w.setHeading(<span class="string">"Accordion Window"</span>);</div><div class="line">		w.setWidth(<span class="number">200</span>);</div><div class="line">		w.setHeight(<span class="number">350</span>);</div><div class="line">		ToolBar toolBar = <span class="literal">new</span> ToolBar();</div><div class="line">		Button item = <span class="literal">new</span> Button();</div><div class="line">		item.setIcon(IconHelper.createStyle(<span class="string">"icon-connect"</span>));</div><div class="line">		toolBar.add(item);</div><div class="line">		toolBar.add(<span class="literal">new</span> SeparatorToolItem());</div><div class="line">		w.setTopComponent(toolBar);</div><div class="line">		item = <span class="literal">new</span> Button();</div><div class="line">		item.setIcon(IconHelper.createStyle(<span class="string">"icon-user-add"</span>));</div><div class="line">		toolBar.add(item);</div><div class="line">		item = <span class="literal">new</span> Button();</div><div class="line">		item.setIcon(IconHelper.createStyle(<span class="string">"icon-user-delete"</span>));</div><div class="line">		toolBar.add(item);</div><div class="line">		w.setLayout(<span class="literal">new</span> AccordionLayout());</div><div class="line">		ContentPanel cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"Online Users"</span>);</div><div class="line">		cp.setScrollMode(Scroll.AUTO);</div><div class="line">		cp.getHeader().addTool(<span class="literal">new</span> ToolButton(<span class="string">"x-tool-refresh"</span>));</div><div class="line">		w.add(cp);</div><div class="line">		TreeStore&lt;ModelData&gt; store = <span class="literal">new</span> TreeStore&lt;ModelData&gt;();</div><div class="line">		TreePanel&lt;ModelData&gt; tree = <span class="literal">new</span> TreePanel&lt;ModelData&gt;(store);</div><div class="line">		tree.setIconProvider(<span class="literal">new</span> ModelIconProvider&lt;ModelData&gt;() &#123;</div><div class="line">			<span class="keyword">public</span> AbstractImagePrototype getIcon(ModelData model) &#123;</div><div class="line">				<span class="keyword">if</span> (model.get(<span class="string">"icon"</span>) != <span class="built_in">null</span>) &#123;</div><div class="line">					<span class="keyword">return</span> IconHelper.createStyle((<span class="built_in">String</span>) model.get(<span class="string">"icon"</span>));</div><div class="line">				&#125; <span class="keyword">else</span> &#123;</div><div class="line">					<span class="keyword">return</span> <span class="built_in">null</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		tree.setDisplayProperty(<span class="string">"name"</span>);</div><div class="line">		ModelData m = newItem(<span class="string">"Family"</span>, <span class="built_in">null</span>);</div><div class="line">		store.add(m, <span class="literal">false</span>);</div><div class="line">		tree.setExpanded(m, <span class="literal">true</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Darrell"</span>, <span class="string">"user"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Maro"</span>, <span class="string">"user-girl"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Lia"</span>, <span class="string">"user-kid"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Alec"</span>, <span class="string">"user-kid"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Andrew"</span>, <span class="string">"user-kid"</span>), <span class="literal">false</span>);</div><div class="line">		m = newItem(<span class="string">"Friends"</span>, <span class="built_in">null</span>);</div><div class="line">		store.add(m, <span class="literal">false</span>);</div><div class="line">		tree.setExpanded(m, <span class="literal">true</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Bob"</span>, <span class="string">"user"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Mary"</span>, <span class="string">"user-girl"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Sally"</span>, <span class="string">"user-girl"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Jack"</span>, <span class="string">"user"</span>), <span class="literal">false</span>);</div><div class="line">		cp.add(tree);</div><div class="line">		cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"Settings"</span>);</div><div class="line">		cp.setBodyStyleName(<span class="string">"pad-text"</span>);</div><div class="line">		cp.addText(<span class="string">"DUMMY_TEXT_SHORT"</span>);</div><div class="line">		w.add(cp);</div><div class="line">		cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"Stuff"</span>);</div><div class="line">		cp.setBodyStyleName(<span class="string">"pad-text"</span>);</div><div class="line">		cp.addText(<span class="string">"DUMMY_TEXT_SHORT"</span>);</div><div class="line">		w.add(cp);</div><div class="line">		cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"More Stuff"</span>);</div><div class="line">		cp.setBodyStyleName(<span class="string">"pad-text"</span>);</div><div class="line">		cp.addText(<span class="string">"DUMMY_TEXT_SHORT"</span>);</div><div class="line">		w.add(cp);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createGridWindow() &#123;</div><div class="line">		Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"icon-grid"</span>));</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setHeading(<span class="string">"Grid Window"</span>);</div><div class="line">		w.setSize(<span class="number">500</span>, <span class="number">400</span>);</div><div class="line">		w.setLayout(<span class="literal">new</span> FitLayout());</div><div class="line">		GroupingStore&lt;Stock&gt; store = <span class="literal">new</span> GroupingStore&lt;Stock&gt;();</div><div class="line">		store.add(getCompanies());</div><div class="line">		store.groupBy(<span class="string">"industry"</span>);</div><div class="line">		ColumnConfig company = <span class="literal">new</span> ColumnConfig(<span class="string">"name"</span>, <span class="string">"Company"</span>, <span class="number">60</span>);</div><div class="line">		ColumnConfig price = <span class="literal">new</span> ColumnConfig(<span class="string">"open"</span>, <span class="string">"Price"</span>, <span class="number">20</span>);</div><div class="line">		price.setNumberFormat(NumberFormat.getCurrencyFormat());</div><div class="line">		ColumnConfig change = <span class="literal">new</span> ColumnConfig(<span class="string">"change"</span>, <span class="string">"Change"</span>, <span class="number">20</span>);</div><div class="line">		ColumnConfig industry = <span class="literal">new</span> ColumnConfig(<span class="string">"industry"</span>, <span class="string">"Industry"</span>, <span class="number">20</span>);</div><div class="line">		ColumnConfig last = <span class="literal">new</span> ColumnConfig(<span class="string">"date"</span>, <span class="string">"Last Updated"</span>, <span class="number">20</span>);</div><div class="line">		last.setDateTimeFormat(DateTimeFormat.getFormat(<span class="string">"MM/dd/y"</span>));</div><div class="line">		<span class="built_in">List</span>&lt;ColumnConfig&gt; config = <span class="literal">new</span> ArrayList&lt;ColumnConfig&gt;();</div><div class="line">		config.add(company);</div><div class="line">		config.add(price);</div><div class="line">		config.add(change);</div><div class="line">		config.add(industry);</div><div class="line">		config.add(last);</div><div class="line">		final ColumnModel cm = <span class="literal">new</span> ColumnModel(config);</div><div class="line">		GroupingView view = <span class="literal">new</span> GroupingView();</div><div class="line">		view.setForceFit(<span class="literal">true</span>);</div><div class="line">		view.setGroupRenderer(<span class="literal">new</span> GridGroupRenderer() &#123;</div><div class="line">			<span class="keyword">public</span> <span class="built_in">String</span> render(GroupColumnData <span class="built_in">data</span>) &#123;</div><div class="line">				<span class="built_in">String</span> f = cm.getColumnById(<span class="built_in">data</span>.field).getHeader();</div><div class="line">				<span class="built_in">String</span> l = <span class="built_in">data</span>.models.size() == <span class="number">1</span> ? <span class="string">"Item"</span> : <span class="string">"Items"</span>;</div><div class="line">				<span class="keyword">return</span> f + <span class="string">": "</span> + <span class="built_in">data</span>.<span class="keyword">group</span> + <span class="string">" ("</span> + <span class="built_in">data</span>.models.size() + <span class="string">" "</span></div><div class="line">						+ l + <span class="string">")"</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		Grid&lt;Stock&gt; grid = <span class="literal">new</span> Grid&lt;Stock&gt;(store, cm);</div><div class="line">		grid.setView(view);</div><div class="line">		grid.setBorders(<span class="literal">true</span>);</div><div class="line">		w.add(grid);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createTabWindow() &#123;</div><div class="line">		Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setSize(<span class="number">740</span>, <span class="number">480</span>);</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"tabs"</span>));</div><div class="line">		w.setHeading(<span class="string">"Tab Window"</span>);</div><div class="line">		w.setLayout(<span class="literal">new</span> FitLayout());</div><div class="line">		TabPanel panel = <span class="literal">new</span> TabPanel();</div><div class="line">		for (int i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">			TabItem item = <span class="literal">new</span> TabItem(<span class="string">"Tab Item "</span> + (i + <span class="number">1</span>));</div><div class="line">			item.addText(<span class="string">"Something useful would be here"</span>);</div><div class="line">			panel.add(item);</div><div class="line">		&#125;</div><div class="line">		w.add(panel);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createBogusWindow(int index) &#123;</div><div class="line">		Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"bogus"</span>));</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setHeading(<span class="string">"Bogus Window "</span> + ++index);</div><div class="line">		w.setSize(<span class="number">400</span>, <span class="number">300</span>);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> ModelData newItem(<span class="built_in">String</span> text, <span class="built_in">String</span> iconStyle) &#123;</div><div class="line">		ModelData m = <span class="literal">new</span> BaseModelData();</div><div class="line">		m.<span class="built_in">set</span>(<span class="string">"name"</span>, text);</div><div class="line">		m.<span class="built_in">set</span>(<span class="string">"icon"</span>, iconStyle);</div><div class="line">		<span class="keyword">return</span> m;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> static <span class="built_in">List</span>&lt;Stock&gt; getCompanies() &#123;</div><div class="line">		DateTimeFormat f = DateTimeFormat.getFormat(<span class="string">"M/d h:mma"</span>);</div><div class="line">		<span class="built_in">List</span>&lt;Stock&gt; stocks = <span class="literal">new</span> ArrayList&lt;Stock&gt;();</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"3m Co"</span>, <span class="number">71.72</span>, <span class="number">0.02</span>, <span class="number">0.03</span>,</div><div class="line">				f.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Alcoa Inc"</span>, <span class="number">29.01</span>, <span class="number">0.42</span>, <span class="number">1.47</span>, f</div><div class="line">				.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Altria Group Inc"</span>, <span class="number">83.81</span>, <span class="number">0.28</span>, <span class="number">0.34</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"American Express Company"</span>, <span class="number">52.55</span>, <span class="number">0.01</span>, <span class="number">0.02</span>, f</div><div class="line">				.parse(<span class="string">"4/8 12:00am"</span>), <span class="string">"Finance"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"American International Group, Inc."</span>, <span class="number">64.13</span>, <span class="number">0.31</span>,</div><div class="line">				<span class="number">0.49</span>, f.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Services"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"AT&amp;T Inc."</span>, <span class="number">31.61</span>, <span class="number">-0.48</span>, <span class="number">-1.54</span>, f</div><div class="line">				.parse(<span class="string">"4/8 12:00am"</span>), <span class="string">"Services"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Boeing Co."</span>, <span class="number">75.43</span>, <span class="number">0.53</span>, <span class="number">0.71</span>, f</div><div class="line">				.parse(<span class="string">"4/8 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Caterpillar Inc."</span>, <span class="number">67.27</span>, <span class="number">0.92</span>, <span class="number">1.39</span>, f</div><div class="line">				.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Services"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Citigroup, Inc."</span>, <span class="number">49.37</span>, <span class="number">0.02</span>, <span class="number">0.04</span>, f</div><div class="line">				.parse(<span class="string">"4/4 12:00am"</span>), <span class="string">"Finance"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"E.I. du Pont de Nemours and Company"</span>, <span class="number">40.48</span>,</div><div class="line">				<span class="number">0.51</span>, <span class="number">1.28</span>, f.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Exxon Mobil Corp"</span>, <span class="number">68.1</span>, <span class="number">-0.43</span>, <span class="number">-0.64</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"General Electric Company"</span>, <span class="number">34.14</span>, <span class="number">-0.08</span>, <span class="number">-0.23</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"General Motors Corporation"</span>, <span class="number">30.27</span>, <span class="number">1.09</span>, <span class="number">3.74</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Automotive"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Hewlett-Packard Co."</span>, <span class="number">36.53</span>, <span class="number">-0.03</span>, <span class="number">-0.08</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Computer"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Honeywell Intl Inc"</span>, <span class="number">38.77</span>, <span class="number">0.05</span>, <span class="number">0.13</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Intel Corporation"</span>, <span class="number">19.88</span>, <span class="number">0.31</span>, <span class="number">1.58</span>, f</div><div class="line">				.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Computer"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"International Business Machines"</span>, <span class="number">81.41</span>, <span class="number">0.44</span>,</div><div class="line">				<span class="number">0.54</span>, f.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Computer"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Johnson &amp; Johnson"</span>, <span class="number">64.72</span>, <span class="number">0.06</span>, <span class="number">0.09</span>, f</div><div class="line">				.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Medical"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"JP Morgan &amp; Chase &amp; Co"</span>, <span class="number">45.73</span>, <span class="number">0.07</span>, <span class="number">0.15</span>, f</div><div class="line">				.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Finance"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"McDonald/"</span>s Corporation<span class="string">", 36.76, 0.86, 2.40, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">2</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Food<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Merck &amp; Co., Inc.<span class="string">", 40.96, 0.41, 1.01, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">2</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Medical<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Microsoft Corporation<span class="string">", 25.84, 0.14, 0.54, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">2</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Computer<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Pfizer Inc<span class="string">", 27.96, 0.4, 1.45, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">8</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Services<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("The Coca<span class="params">-Cola</span> Company<span class="string">", 45.07, 0.26, 0.58, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Food<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("The Home Depot, Inc.<span class="string">", 34.64, 0.35, 1.02, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">8</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Retail<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("The Procter &amp; Gamble Company<span class="string">", 61.91, 0.01, 0.02,</span></div><div class="line">				f.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Manufacturing<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("United Technologies Corporation<span class="string">", 63.26, 0.55,</span></div><div class="line">				0.88, f.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Computer<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Verizon Communications<span class="string">", 35.57, 0.39, 1.11, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">3</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Services<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Wal<span class="params">-Mart</span> Stores, Inc.<span class="string">", 45.45, 0.73, 1.63, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">3</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Retail<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Walt Disney Company (The) (Holding Company)<span class="string">",</span></div><div class="line">				29.89, 0.24, 0.81, f.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Services<span class="string">"));</span></div><div class="line">		return stocks;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Stock extends BaseModel &#123;</div><div class="line">	public Stock() &#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Stock(String name, String symbol, double open, double last) &#123;</div><div class="line">		set("name<span class="string">", name);</span></div><div class="line">		set("symbol<span class="string">", symbol);</span></div><div class="line">		set("open<span class="string">", open);</span></div><div class="line">		set("last<span class="string">", last);</span></div><div class="line">		set("<span class="built_in">date</span><span class="string">", new Date());</span></div><div class="line">		set("change<span class="string">", last - open);</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Stock(String name, double open, double change, double pctChange,</div><div class="line">			Date date, String industry) &#123;</div><div class="line">		set("name<span class="string">", name);</span></div><div class="line">		set("open<span class="string">", open);</span></div><div class="line">		set("change<span class="string">", change);</span></div><div class="line">		set("percentChange<span class="string">", pctChange);</span></div><div class="line">		set("<span class="built_in">date</span><span class="string">", date);</span></div><div class="line">		set("industry<span class="string">", industry);</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getIndustry() &#123;</div><div class="line">		return get("industry<span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setIndustry(String industry) &#123;</div><div class="line">		set("industry<span class="string">", industry);</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Date getLastTrans() &#123;</div><div class="line">		return (Date) get("<span class="built_in">date</span><span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getName() &#123;</div><div class="line">		return (String) get("name<span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getSymbol() &#123;</div><div class="line">		return (String) get("symbol<span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getOpen() &#123;</div><div class="line">		Double open = (Double) get("open<span class="string">");</span></div><div class="line">		return open.doubleValue();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getLast() &#123;</div><div class="line">		Double open = (Double) get("last<span class="string">");</span></div><div class="line">		return open.doubleValue();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getChange() &#123;</div><div class="line">		return getLast() - getOpen();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getPercentChange() &#123;</div><div class="line">		return getChange() / getOpen();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String toString() &#123;</div><div class="line">		return getName();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>gxt环境搭建参考http://wenku.baidu.com/view/29dfff030740be1e650e9ae5.html</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/07/04/linux-nano-vim-vi/" itemprop="url">
                  文本编辑器：nano vim/vi
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-07-04T17:30:33+08:00" content="2012-07-04">
              2012-07-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/07/04/linux-nano-vim-vi/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/07/04/linux-nano-vim-vi/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>1.Nano是一个简单的没有花梢及华丽效果的文本编辑器。Nano在做简单文本文件编辑时相当不错,可以满足一些基本操作.
直接在命令行模式下输入nano 文件名，就可以对文件进行简单的编辑。
文件编辑中常用快捷键：ctrl+X 离开nano软件，若有修改过的文件会提示是否保存；
ctrl+O 保存文件； Ctrl+W 查询字符串；
ctrl +C 说明目前光标所在处的行数和列数等信息；
ctrl+ _ 可以直接输入行号，让光标快速移到该行；
<a href="http://2.vi" target="_blank" rel="external">2.vi</a> ：vi编辑器是所有Unix及Linux系统下标准的编辑器 ，功能强大，vim可视作vi的高级版本。
1） vi可以分为三种模式：命令行模式，输入模式，末行模式。
命令行模式—&gt;输入模式： i，a，A,o，O，c，C，r，R均可从命令行切换到输入行；
i:在当前光标所在处插入； a：当前光标所在行的后面插入； A：当前光标所在行行尾插入；
o:在当前光标所在处的下一行插入新的一行； O:在当前光标所在处的上一行插入新的一行；
c:先删除在载入新的一行； C:删除光标所在一行在插入；
r:替换光标所在那一个字符一次； R:一直替换光标所在处的文字；
输入模式—&gt;命令行模式：Esc
命令行模式—&gt;末行模式：：
末行模式-—&gt;命令行模式：Esc
2） 光标移动： h(&lt;—) 左移光标一个字符 ；
l（—&gt;） 右移光标一个字符 ；
k(↑) 光标上移一行 ;
j (↓) 光标下移一行
「ctrl」+「b」：屏幕往”后”移动一页。
「ctrl」+「f」：屏幕往”前”移动一页。
「ctrl」+「u」：屏幕往”后”移动半页。
「ctrl」+「d」：屏幕往”前”移动半页
3)行内移动：^ 移动到非空白行的行首
0 绝对位置的行首
$移动到行尾
4）以单词为单位移动：
w：一次移动一个单词，到下一个单词的词尾
b：移到当前单词词首（向回跳）
e：跳到词尾
5）行间移动：
n(数字）G ：n数值为几，就移到这个文件的第几行；当n=1时，相当于gg的功能，移到该文件的第一行；
G：移到这个文件的最后一行；
6）删除命令：
x：向后删除一个字符，使用del键同样功能；
X:向后删除一个字符；
nx：连续向后删除n个字符；
dd：删除光标所在的那一整行；
ndd：删除光标所在的向下n行；
d1G：删除光标所在到第一行的所有数据；
dG：删除从光标所在到最后易方达额所有数据；
7）复制，粘贴
yy：复制光标所在的那一整行；
nyy：复制光标所在的向下n行；
y0：复制光标所在的那一个字符到该行行首的所有数据；
y$:复制光标所在的那一个字符到该行行尾的所有数据；
p：将已经复制的数据在光标的下一行粘贴；
P：粘在光标的上一行；
8）查找，替换
/word:向下查找一个名称为word的字符串；
？word：向上查找一个名称为word的字符串；
：n1，n2 s/word1/word2/g ：在n1与n2行之间寻找一个word1的字符串，并将其替换为word2
：1，$ s/word1/word2/g:从第一行到最后一行查找word1字符串，并将其替换为word2
9）文件的保存与退出：
w：在冒号输入字母「w」就可以将文件保存起来；
q：退出；
q!:强制退出；
wq ：保存退出；
wq！：强制保存退出
10）显示行号：在末行模式输入：set nu
取消行号：在末行模式输入：set nonu</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/07/02/it-beauty-code/" itemprop="url">
                  一段惊艳的代码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-07-02T18:09:17+08:00" content="2012-07-02">
              2012-07-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/07/02/it-beauty-code/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/07/02/it-beauty-code/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><figure class="highlight scilab"><table><tr><td class="code"><pre><div class="line">with(m=Math)C=<span class="built_in">cos</span>,S=<span class="built_in">sin</span>,P=pow,R=random;c.width=c.height=f=<span class="number">500</span>;h=<span class="number">-250</span>;<span class="function"><span class="keyword">function</span> <span class="title">p</span><span class="params">(a,b,c)</span>&#123;<span class="title">if</span><span class="params">(c&gt;60)</span><span class="title">return</span>[<span class="title">S</span><span class="params">(a*7)</span>*<span class="params">(13+5/(.2+P(b*4,4)</span>))-<span class="title">S</span><span class="params">(b)</span>*50,<span class="title">b</span>*<span class="title">f</span>+50,625+<span class="title">C</span><span class="params">(a*7)</span>*<span class="params">(13+5/(.2+P(b*4,4)</span>))+<span class="title">b</span>*400,<span class="title">a</span>*1-<span class="title">b</span>/2,<span class="title">a</span>];<span class="title">A</span>=<span class="title">a</span>*2-1;<span class="title">B</span>=<span class="title">b</span>*2-1;<span class="title">if</span><span class="params">(A*A+B*B&lt;1)</span>&#123;<span class="title">if</span><span class="params">(c&gt;37)</span>&#123;<span class="title">n</span>=<span class="params">(j=c&amp;1)</span>?6:4;<span class="title">o</span>=.5/<span class="params">(a+.01)</span>+<span class="title">C</span><span class="params">(b*125)</span>*3-<span class="title">a</span>*300;<span class="title">w</span>=<span class="title">b</span>*<span class="title">h</span>;<span class="title">return</span>[<span class="title">o</span>*<span class="title">C</span><span class="params">(n)</span>+<span class="title">w</span>*<span class="title">S</span><span class="params">(n)</span>+<span class="title">j</span>*610-390,<span class="title">o</span>*<span class="title">S</span><span class="params">(n)</span>-<span class="title">w</span>*<span class="title">C</span><span class="params">(n)</span>+550-<span class="title">j</span>*350,1180+<span class="title">C</span><span class="params">(B+A)</span>*99-<span class="title">j</span>*300,.4-<span class="title">a</span>*.1+<span class="title">P</span><span class="params">(1-B*B,-h*6)</span>*.15-<span class="title">a</span>*<span class="title">b</span>*.4+<span class="title">C</span><span class="params">(a+b)</span>/5+<span class="title">P</span><span class="params">(C((o*(a+1)</span>+<span class="params">(B&gt;0?w:-w)</span>)/25),30)*.1*<span class="params">(1-B*B)</span>,<span class="title">o</span>/1<span class="title">e3</span>+.7-<span class="title">o</span>*<span class="title">w</span>*3<span class="title">e</span>-6]&#125;<span class="title">if</span><span class="params">(c&gt;32)</span>&#123;<span class="title">c</span>=<span class="title">c</span>*1.16-.15;<span class="title">o</span>=<span class="title">a</span>*45-20;<span class="title">w</span>=<span class="title">b</span>*<span class="title">b</span>*<span class="title">h</span>;<span class="title">z</span>=<span class="title">o</span>*<span class="title">S</span><span class="params">(c)</span>+<span class="title">w</span>*<span class="title">C</span><span class="params">(c)</span>+620;<span class="title">return</span>[<span class="title">o</span>*<span class="title">C</span><span class="params">(c)</span>-<span class="title">w</span>*<span class="title">S</span><span class="params">(c)</span>,28+<span class="title">C</span><span class="params">(B*.5)</span>*99-<span class="title">b</span>*<span class="title">b</span>*<span class="title">b</span>*60-<span class="title">z</span>/2-<span class="title">h</span>,<span class="title">z</span>,<span class="params">(b*b*.3+P((1-(A*A)</span>),7)*.15+.3)*<span class="title">b</span>,<span class="title">b</span>*.7]&#125;<span class="title">o</span>=<span class="title">A</span>*<span class="params">(2-b)</span>*<span class="params">(80-c*2)</span>;<span class="title">w</span>=99-<span class="title">C</span><span class="params">(A)</span>*120-<span class="title">C</span><span class="params">(b)</span>*<span class="params">(-h-c*4.9)</span>+<span class="title">C</span><span class="params">(P(1-b,7)</span>)*50+<span class="title">c</span>*2;<span class="title">z</span>=<span class="title">o</span>*<span class="title">S</span><span class="params">(c)</span>+<span class="title">w</span>*<span class="title">C</span><span class="params">(c)</span>+700;<span class="title">return</span>[<span class="title">o</span>*<span class="title">C</span><span class="params">(c)</span>-<span class="title">w</span>*<span class="title">S</span><span class="params">(c)</span>,<span class="title">B</span>*99-<span class="title">C</span><span class="params">(P(b, 7)</span>)*50-<span class="title">c</span>/3-<span class="title">z</span>/1.35+450,<span class="title">z</span>,<span class="params">(1-b/1.2)</span>*.9+<span class="title">a</span>*.1, <span class="title">P</span><span class="params">((1-b)</span>,20)/4+.05]&#125;&#125;<span class="title">setInterval</span><span class="params">('for(i=0;i&lt;1e4;i++)</span><span class="title">if</span><span class="params">(s=p(R()</span>,<span class="title">R</span><span class="params">()</span>,<span class="title">i</span>%46/.74))&#123;<span class="title">z</span>=<span class="title">s</span>[2];<span class="title">x</span>=~~<span class="params">(s[0]*f/z-h)</span>;<span class="title">y</span>=~~<span class="params">(s[1]*f/z-h)</span>;<span class="title">if</span><span class="params">(!m[q=y*f+x]|m[q]&gt;z)</span><span class="title">m</span>[<span class="title">q</span>]=<span class="title">z</span>,<span class="title">a</span>.<span class="title">fillStyle</span>="<span class="title">rgb</span><span class="params">("+~(s[3]*h)</span>+","+~<span class="params">(s[4]*h)</span>+","+~<span class="params">(s[3]*s[3]*-80)</span>+")",<span class="title">a</span>.<span class="title">fillRect</span><span class="params">(x,y,1,1)</span>&#125;',0)</span></div></pre></td></tr></table></figure>
<p>上面这段JavaScript代码一共有1018个字符，每个字符占一个字节，一共1018B，约等于1K。这1K大小的js能做什么，点一下这面这个按钮就知道了（需要使用最新版的谷歌浏览器、IE9或火狐浏览器等支持html5的浏览器才能看到效果）。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/06/30/php-zip/" itemprop="url">
                  php在线解压工具
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-06-30T18:09:17+08:00" content="2012-06-30">
              2012-06-30
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/06/30/php-zip/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/06/30/php-zip/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>部分空间不支持在线解压，造成ftp上传文件量大的文件夹很慢，于是网上找到了一个不错的php在线解压工具，本地xampp环境下测试通过，收藏备用。所有代码均为转载，版权归原作者。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"></div><div class="line"><span class="comment">//设定密码</span></div><div class="line">$password = <span class="string">"bianle"</span>;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">profile</span>=<span class="string">"http://gmpg.org/xfn/11"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Language"</span> <span class="attr">content</span>=<span class="string">"zh-CN"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>在线解压ZIP - PhpUnZip<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">    &lt;!<span class="selector-tag">--</span></div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">		<span class="attribute">margin</span>:<span class="number">0</span>;</div><div class="line">		<span class="attribute">padding</span>:<span class="number">0</span>;</div><div class="line">		<span class="attribute">background</span>:<span class="number">#ccc</span>;</div><div class="line">		<span class="attribute">font</span>:<span class="number">14px</span>/<span class="number">24px</span> <span class="string">"Microsoft Yahei"</span>,Verdana, Geneva, sans-serif</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#wrapper</span> &#123;</div><div class="line">		<span class="attribute">width</span>:<span class="number">760px</span>;</div><div class="line">		<span class="attribute">margin</span>:<span class="number">0</span> auto;</div><div class="line">		<span class="attribute">margin-top</span>:<span class="number">10px</span>;</div><div class="line">		<span class="attribute">background</span>:<span class="number">#fff</span>;</div><div class="line">		<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#888</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#header</span> &#123;</div><div class="line">		<span class="attribute">background</span>:<span class="number">#f7f7f7</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#header</span> <span class="selector-tag">h1</span> &#123;</div><div class="line">		<span class="attribute">font</span>:<span class="number">20px</span>/<span class="number">30px</span> Verdana, Geneva, sans-serif;</div><div class="line">		<span class="attribute">font-weight</span>:bold;</div><div class="line">		<span class="attribute">text-shadow</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="number">#DDD</span>;</div><div class="line">		<span class="attribute">text-align</span>:center;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#main</span> &#123;</div><div class="line">		<span class="attribute">margin</span>:<span class="number">20px</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#footer</span> &#123;</div><div class="line">		<span class="attribute">text-align</span>:center;</div><div class="line">		<span class="attribute">font-size</span>:<span class="number">12px</span>;</div><div class="line">		<span class="attribute">color</span>:<span class="number">#666</span>;</div><div class="line">		<span class="attribute">border-top</span>:<span class="number">1px</span> solid <span class="number">#ccc</span>;</div><div class="line">		<span class="attribute">position</span>:relative;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#footer</span> <span class="selector-tag">a</span> &#123;</div><div class="line">		<span class="attribute">text-decoration</span>:none;</div><div class="line">		<span class="attribute">color</span>:<span class="number">#666</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#footer</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">		<span class="attribute">text-decoration</span>:underline;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#eincy</span> &#123;</div><div class="line">		<span class="attribute">width</span>:<span class="number">82px</span>;</div><div class="line">		<span class="attribute">height</span>:<span class="number">36px</span>;</div><div class="line">		<span class="attribute">background</span>:<span class="built_in">url</span>(http://www.eincy.com/logo/s.png);</div><div class="line">		<span class="attribute">position</span>:absolute;</div><div class="line">		<span class="attribute">right</span>:<span class="number">3px</span>;</div><div class="line">		<span class="attribute">top</span>:<span class="number">3px</span>;</div><div class="line">	&#125;</div><div class="line">    <span class="selector-tag">--</span>&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrapper"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>PHP在线解压ZIP工具 - PHPUnZip<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"myform"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?=$_SERVER[PHP_SELF];?&gt;"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">onSubmit</span>=<span class="string">"return check_uploadObject(this);"</span>&gt;</span></div><div class="line">            <span class="php"><span class="meta">&lt;?</span></span></div><div class="line">                <span class="keyword">if</span>(!$_REQUEST[<span class="string">"myaction"</span>]):</div><div class="line">            <span class="meta">?&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">check_uploadObject</span><span class="params">(form)</span></span>&#123;</div><div class="line">                <span class="keyword">if</span>(form.password.value==<span class="string">''</span>)&#123;</div><div class="line">                    alert(<span class="string">'请输入密码.'</span>);</div><div class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"choose"</span>&gt;</span> </div><div class="line">            选择ZIP文件:</div><div class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"zipfile"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">selected</span>&gt;</span>- 请选择 -<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">            <span class="php"><span class="meta">&lt;?</span></span></div><div class="line">                $fdir = opendir(<span class="string">'./'</span>);</div><div class="line">                <span class="keyword">while</span>($file=readdir($fdir))&#123;</div><div class="line">                    <span class="keyword">if</span>(!is_file($file)) <span class="keyword">continue</span>;</div><div class="line">                    <span class="keyword">if</span>(preg_match(<span class="string">'/\.zip$/mis'</span>,$file))&#123;</div><div class="line">                        <span class="keyword">echo</span> <span class="string">"&lt;option value='$file'&gt;$file&lt;/option&gt;\r\n"</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            <span class="meta">?&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">            或上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"upfile"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"upfile"</span> <span class="attr">size</span>=<span class="string">"20"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"dir"</span>&gt;</span></div><div class="line">            解压到目录: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"todir"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"todir"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">size</span>=<span class="string">"15"</span>&gt;</span> </div><div class="line">                  (留空为本目录,必须有写入权限)</div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"password"</span>&gt;</span></div><div class="line">        	验证密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">size</span>=<span class="string">"15"</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"unzip"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"myaction"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"myaction"</span> <span class="attr">value</span>=<span class="string">"dounzip"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"Submit"</span> <span class="attr">value</span>=<span class="string">" 解 压 "</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="php"><span class="meta">&lt;?</span></span></div><div class="line"></div><div class="line">		<span class="keyword">elseif</span>($_REQUEST[<span class="string">"myaction"</span>]==<span class="string">"dounzip"</span>):</div><div class="line"></div><div class="line">		<span class="class"><span class="keyword">class</span> <span class="title">zip</span></span></div><div class="line">		&#123;</div><div class="line"></div><div class="line">		 <span class="keyword">var</span> $total_files = <span class="number">0</span>;</div><div class="line">		 <span class="keyword">var</span> $total_folders = <span class="number">0</span>; </div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">Extract</span> <span class="params">( $zn, $to, $index = Array<span class="params">(<span class="number">-1</span>)</span> )</span></span></div><div class="line">		 &#123;</div><div class="line">		   $ok = <span class="number">0</span>; $zip = @fopen($zn,<span class="string">'rb'</span>);</div><div class="line">		   <span class="keyword">if</span>(!$zip) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">		   $cdir = <span class="keyword">$this</span>-&gt;ReadCentralDir($zip,$zn);</div><div class="line">		   $pos_entry = $cdir[<span class="string">'offset'</span>];</div><div class="line"></div><div class="line">		   <span class="keyword">if</span>(!is_array($index))&#123; $index = <span class="keyword">array</span>($index);  &#125;</div><div class="line">		   <span class="keyword">for</span>($i=<span class="number">0</span>; $index[$i];$i++)&#123;</div><div class="line">				<span class="keyword">if</span>(intval($index[$i])!=$index[$i]||$index[$i]&gt;$cdir[<span class="string">'entries'</span>])</div><div class="line">				<span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">		   &#125;</div><div class="line">		   <span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$cdir[<span class="string">'entries'</span>]; $i++)</div><div class="line">		   &#123;</div><div class="line">			 @fseek($zip, $pos_entry);</div><div class="line">			 $header = <span class="keyword">$this</span>-&gt;ReadCentralFileHeaders($zip);</div><div class="line">			 $header[<span class="string">'index'</span>] = $i; $pos_entry = ftell($zip);</div><div class="line">			 @rewind($zip); fseek($zip, $header[<span class="string">'offset'</span>]);</div><div class="line">			 <span class="keyword">if</span>(in_array(<span class="string">"-1"</span>,$index)||in_array($i,$index))</div><div class="line">				$stat[$header[<span class="string">'filename'</span>]]=<span class="keyword">$this</span>-&gt;ExtractFile($header, $to, $zip);</div><div class="line">		   &#125;</div><div class="line">		   fclose($zip);</div><div class="line">		   <span class="keyword">return</span> $stat;</div><div class="line">		 &#125;</div><div class="line"></div><div class="line">		  <span class="function"><span class="keyword">function</span> <span class="title">ReadFileHeader</span><span class="params">($zip)</span></span></div><div class="line">		  &#123;</div><div class="line">			$binary_data = fread($zip, <span class="number">30</span>);</div><div class="line">			$data = unpack(<span class="string">'vchk/vid/vversion/vflag/vcompression/vmtime/vmdate/Vcrc/Vcompressed_size/Vsize/vfilename_len/vextra_len'</span>, $binary_data);</div><div class="line"></div><div class="line">			$header[<span class="string">'filename'</span>] = fread($zip, $data[<span class="string">'filename_len'</span>]);</div><div class="line">			<span class="keyword">if</span> ($data[<span class="string">'extra_len'</span>] != <span class="number">0</span>) &#123;</div><div class="line">			  $header[<span class="string">'extra'</span>] = fread($zip, $data[<span class="string">'extra_len'</span>]);</div><div class="line">			&#125; <span class="keyword">else</span> &#123; $header[<span class="string">'extra'</span>] = <span class="string">''</span>; &#125;</div><div class="line"></div><div class="line">			$header[<span class="string">'compression'</span>] = $data[<span class="string">'compression'</span>];$header[<span class="string">'size'</span>] = $data[<span class="string">'size'</span>];</div><div class="line">			$header[<span class="string">'compressed_size'</span>] = $data[<span class="string">'compressed_size'</span>];</div><div class="line">			$header[<span class="string">'crc'</span>] = $data[<span class="string">'crc'</span>]; $header[<span class="string">'flag'</span>] = $data[<span class="string">'flag'</span>];</div><div class="line">			$header[<span class="string">'mdate'</span>] = $data[<span class="string">'mdate'</span>];$header[<span class="string">'mtime'</span>] = $data[<span class="string">'mtime'</span>];</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'mdate'</span>] &amp;&amp; $header[<span class="string">'mtime'</span>])&#123;</div><div class="line">			 $hour=($header[<span class="string">'mtime'</span>]&amp;<span class="number">0xF800</span>)&gt;&gt;<span class="number">11</span>;$minute=($header[<span class="string">'mtime'</span>]&amp;<span class="number">0x07E0</span>)&gt;&gt;<span class="number">5</span>;</div><div class="line">			 $seconde=($header[<span class="string">'mtime'</span>]&amp;<span class="number">0x001F</span>)*<span class="number">2</span>;$year=(($header[<span class="string">'mdate'</span>]&amp;<span class="number">0xFE00</span>)&gt;&gt;<span class="number">9</span>)+<span class="number">1980</span>;</div><div class="line">			 $month=($header[<span class="string">'mdate'</span>]&amp;<span class="number">0x01E0</span>)&gt;&gt;<span class="number">5</span>;$day=$header[<span class="string">'mdate'</span>]&amp;<span class="number">0x001F</span>;</div><div class="line">			 $header[<span class="string">'mtime'</span>] = mktime($hour, $minute, $seconde, $month, $day, $year);</div><div class="line">			&#125;<span class="keyword">else</span>&#123;$header[<span class="string">'mtime'</span>] = time();&#125;</div><div class="line"></div><div class="line">			$header[<span class="string">'stored_filename'</span>] = $header[<span class="string">'filename'</span>];</div><div class="line">			$header[<span class="string">'status'</span>] = <span class="string">"ok"</span>;</div><div class="line">			<span class="keyword">return</span> $header;</div><div class="line">		  &#125;</div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">ReadCentralFileHeaders</span><span class="params">($zip)</span></span>&#123;</div><div class="line">			$binary_data = fread($zip, <span class="number">46</span>);</div><div class="line">			$header = unpack(<span class="string">'vchkid/vid/vversion/vversion_extracted/vflag/vcompression/vmtime/vmdate/Vcrc/Vcompressed_size/Vsize/vfilename_len/vextra_len/vcomment_len/vdisk/vinternal/Vexternal/Voffset'</span>, $binary_data);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'filename_len'</span>] != <span class="number">0</span>)</div><div class="line">			  $header[<span class="string">'filename'</span>] = fread($zip,$header[<span class="string">'filename_len'</span>]);</div><div class="line">			<span class="keyword">else</span> $header[<span class="string">'filename'</span>] = <span class="string">''</span>;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'extra_len'</span>] != <span class="number">0</span>)</div><div class="line">			  $header[<span class="string">'extra'</span>] = fread($zip, $header[<span class="string">'extra_len'</span>]);</div><div class="line">			<span class="keyword">else</span> $header[<span class="string">'extra'</span>] = <span class="string">''</span>;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'comment_len'</span>] != <span class="number">0</span>)</div><div class="line">			  $header[<span class="string">'comment'</span>] = fread($zip, $header[<span class="string">'comment_len'</span>]);</div><div class="line">			<span class="keyword">else</span> $header[<span class="string">'comment'</span>] = <span class="string">''</span>;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'mdate'</span>] &amp;&amp; $header[<span class="string">'mtime'</span>])</div><div class="line">			&#123;</div><div class="line">			  $hour = ($header[<span class="string">'mtime'</span>] &amp; <span class="number">0xF800</span>) &gt;&gt; <span class="number">11</span>;</div><div class="line">			  $minute = ($header[<span class="string">'mtime'</span>] &amp; <span class="number">0x07E0</span>) &gt;&gt; <span class="number">5</span>;</div><div class="line">			  $seconde = ($header[<span class="string">'mtime'</span>] &amp; <span class="number">0x001F</span>)*<span class="number">2</span>;</div><div class="line">			  $year = (($header[<span class="string">'mdate'</span>] &amp; <span class="number">0xFE00</span>) &gt;&gt; <span class="number">9</span>) + <span class="number">1980</span>;</div><div class="line">			  $month = ($header[<span class="string">'mdate'</span>] &amp; <span class="number">0x01E0</span>) &gt;&gt; <span class="number">5</span>;</div><div class="line">			  $day = $header[<span class="string">'mdate'</span>] &amp; <span class="number">0x001F</span>;</div><div class="line">			  $header[<span class="string">'mtime'</span>] = mktime($hour, $minute, $seconde, $month, $day, $year);</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">			  $header[<span class="string">'mtime'</span>] = time();</div><div class="line">			&#125;</div><div class="line">			$header[<span class="string">'stored_filename'</span>] = $header[<span class="string">'filename'</span>];</div><div class="line">			$header[<span class="string">'status'</span>] = <span class="string">'ok'</span>;</div><div class="line">			<span class="keyword">if</span> (substr($header[<span class="string">'filename'</span>], <span class="number">-1</span>) == <span class="string">'/'</span>)</div><div class="line">			  $header[<span class="string">'external'</span>] = <span class="number">0x41FF0010</span>;</div><div class="line">			<span class="keyword">return</span> $header;</div><div class="line">		 &#125;</div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">ReadCentralDir</span><span class="params">($zip,$zip_name)</span></span>&#123;</div><div class="line">			$size = filesize($zip_name);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($size &lt; <span class="number">277</span>) $maximum_size = $size;</div><div class="line">			<span class="keyword">else</span> $maximum_size=<span class="number">277</span>;</div><div class="line"></div><div class="line">			@fseek($zip, $size-$maximum_size);</div><div class="line">			$pos = ftell($zip); $bytes = <span class="number">0x00000000</span>;</div><div class="line"></div><div class="line">			<span class="keyword">while</span> ($pos &lt; $size)&#123;</div><div class="line">				$byte = @fread($zip, <span class="number">1</span>); $bytes=($bytes &lt;&lt; <span class="number">8</span>) | ord($byte);</div><div class="line">				<span class="keyword">if</span> ($bytes == <span class="number">0x504b0506</span> <span class="keyword">or</span> $bytes == <span class="number">0x2e706870504b0506</span>)&#123; $pos++;<span class="keyword">break</span>;&#125; $pos++;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			$fdata=fread($zip,<span class="number">18</span>);</div><div class="line"></div><div class="line">			$data=@unpack(<span class="string">'vdisk/vdisk_start/vdisk_entries/ventries/Vsize/Voffset/vcomment_size'</span>,$fdata);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($data[<span class="string">'comment_size'</span>] != <span class="number">0</span>) $centd[<span class="string">'comment'</span>] = fread($zip, $data[<span class="string">'comment_size'</span>]);</div><div class="line">			<span class="keyword">else</span> $centd[<span class="string">'comment'</span>] = <span class="string">''</span>; $centd[<span class="string">'entries'</span>] = $data[<span class="string">'entries'</span>];</div><div class="line">			$centd[<span class="string">'disk_entries'</span>] = $data[<span class="string">'disk_entries'</span>];</div><div class="line">			$centd[<span class="string">'offset'</span>] = $data[<span class="string">'offset'</span>];$centd[<span class="string">'disk_start'</span>] = $data[<span class="string">'disk_start'</span>];</div><div class="line">			$centd[<span class="string">'size'</span>] = $data[<span class="string">'size'</span>];  $centd[<span class="string">'disk'</span>] = $data[<span class="string">'disk'</span>];</div><div class="line">			<span class="keyword">return</span> $centd;</div><div class="line">		  &#125;</div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">ExtractFile</span><span class="params">($header,$to,$zip)</span></span>&#123;</div><div class="line">			$header = <span class="keyword">$this</span>-&gt;readfileheader($zip);</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(substr($to,<span class="number">-1</span>)!=<span class="string">"/"</span>) $to.=<span class="string">"/"</span>;</div><div class="line">			<span class="keyword">if</span>($to==<span class="string">'./'</span>) $to = <span class="string">''</span>;	</div><div class="line">			$pth = explode(<span class="string">"/"</span>,$to.$header[<span class="string">'filename'</span>]);</div><div class="line">			$mydir = <span class="string">''</span>;</div><div class="line">			<span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;count($pth)<span class="number">-1</span>;$i++)&#123;</div><div class="line">				<span class="keyword">if</span>(!$pth[$i]) <span class="keyword">continue</span>;</div><div class="line">				$mydir .= $pth[$i].<span class="string">"/"</span>;</div><div class="line">				<span class="keyword">if</span>((!is_dir($mydir) &amp;&amp; @mkdir($mydir,<span class="number">0777</span>)) || (($mydir==$to.$header[<span class="string">'filename'</span>] || ($mydir==$to &amp;&amp; <span class="keyword">$this</span>-&gt;total_folders==<span class="number">0</span>)) &amp;&amp; is_dir($mydir)) )&#123;</div><div class="line">					@chmod($mydir,<span class="number">0777</span>);</div><div class="line">					<span class="keyword">$this</span>-&gt;total_folders ++;</div><div class="line">					<span class="keyword">echo</span> <span class="string">"&lt;br /&gt;&lt;input name='dfile[]' type='checkbox' value='$mydir' checked&gt; &lt;a href='$mydir' target='_blank'&gt;目录: $mydir&lt;/a&gt;</span></div><div class="line">		";</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(strrchr($header[<span class="string">'filename'</span>],<span class="string">'/'</span>)==<span class="string">'/'</span>) <span class="keyword">return</span>;	</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (!($header[<span class="string">'external'</span>]==<span class="number">0x41FF0010</span>)&amp;&amp;!($header[<span class="string">'external'</span>]==<span class="number">16</span>))&#123;</div><div class="line">				<span class="keyword">if</span> ($header[<span class="string">'compression'</span>]==<span class="number">0</span>)&#123;</div><div class="line">					$fp = @fopen($to.$header[<span class="string">'filename'</span>], <span class="string">'wb'</span>);</div><div class="line">					<span class="keyword">if</span>(!$fp) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">					$size = $header[<span class="string">'compressed_size'</span>];</div><div class="line"></div><div class="line">					<span class="keyword">while</span> ($size != <span class="number">0</span>)&#123;</div><div class="line">						$read_size = ($size &lt; <span class="number">2048</span> ? $size : <span class="number">2048</span>);</div><div class="line">						$buffer = fread($zip, $read_size);</div><div class="line">						$binary_data = pack(<span class="string">'a'</span>.$read_size, $buffer);</div><div class="line">						@fwrite($fp, $binary_data, $read_size);</div><div class="line">						$size -= $read_size;</div><div class="line">					&#125;</div><div class="line">					fclose($fp);</div><div class="line">					touch($to.$header[<span class="string">'filename'</span>], $header[<span class="string">'mtime'</span>]);</div><div class="line">				&#125;<span class="keyword">else</span>&#123;</div><div class="line">					$fp = @fopen($to.$header[<span class="string">'filename'</span>].<span class="string">'.gz'</span>,<span class="string">'wb'</span>);</div><div class="line">					<span class="keyword">if</span>(!$fp) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">					$binary_data = pack(<span class="string">'va1a1Va1a1'</span>, <span class="number">0x8b1f</span>, Chr($header[<span class="string">'compression'</span>]),</div><div class="line">					Chr(<span class="number">0x00</span>), time(), Chr(<span class="number">0x00</span>), Chr(<span class="number">3</span>));</div><div class="line"></div><div class="line">					fwrite($fp, $binary_data, <span class="number">10</span>);</div><div class="line">					$size = $header[<span class="string">'compressed_size'</span>];</div><div class="line"></div><div class="line">					<span class="keyword">while</span> ($size != <span class="number">0</span>)&#123;</div><div class="line">						$read_size = ($size &lt; <span class="number">1024</span> ? $size : <span class="number">1024</span>);</div><div class="line">						$buffer = fread($zip, $read_size);</div><div class="line">						$binary_data = pack(<span class="string">'a'</span>.$read_size, $buffer);</div><div class="line">						@fwrite($fp, $binary_data, $read_size);</div><div class="line">						$size -= $read_size;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">					$binary_data = pack(<span class="string">'VV'</span>, $header[<span class="string">'crc'</span>], $header[<span class="string">'size'</span>]);</div><div class="line">					fwrite($fp, $binary_data,<span class="number">8</span>); fclose($fp);</div><div class="line"></div><div class="line">					$gzp = @gzopen($to.$header[<span class="string">'filename'</span>].<span class="string">'.gz'</span>,<span class="string">'rb'</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">"Cette archive est compress閑"</span>);</div><div class="line">					<span class="keyword">if</span>(!$gzp) <span class="keyword">return</span>(<span class="number">-2</span>);</div><div class="line">					$fp = @fopen($to.$header[<span class="string">'filename'</span>],<span class="string">'wb'</span>);</div><div class="line">					<span class="keyword">if</span>(!$fp) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">					$size = $header[<span class="string">'size'</span>];</div><div class="line"></div><div class="line">					<span class="keyword">while</span> ($size != <span class="number">0</span>)&#123;</div><div class="line">						$read_size = ($size &lt; <span class="number">2048</span> ? $size : <span class="number">2048</span>);</div><div class="line">						$buffer = gzread($gzp, $read_size);</div><div class="line">						$binary_data = pack(<span class="string">'a'</span>.$read_size, $buffer);</div><div class="line">						@fwrite($fp, $binary_data, $read_size);</div><div class="line">						$size -= $read_size;</div><div class="line">					&#125;</div><div class="line">					fclose($fp); gzclose($gzp);</div><div class="line"></div><div class="line">					touch($to.$header[<span class="string">'filename'</span>], $header[<span class="string">'mtime'</span>]);</div><div class="line">					@unlink($to.$header[<span class="string">'filename'</span>].<span class="string">'.gz'</span>);</div><div class="line"></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">$this</span>-&gt;total_files ++;</div><div class="line">			<span class="keyword">echo</span> <span class="string">"&lt;br /&gt;&lt;input name='dfile[]' type='checkbox' value='$to$header[filename]' checked&gt; &lt;a href='$to$header[filename]' target='_blank'&gt;文件: $to$header[filename]&lt;/a&gt;</span></div><div class="line">		";</div><div class="line"></div><div class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		 &#125;</div><div class="line"></div><div class="line">		<span class="comment">// end class</span></div><div class="line">		&#125;</div><div class="line"></div><div class="line">			set_time_limit(<span class="number">0</span>);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($_POST[<span class="string">'password'</span>] != $password) <span class="keyword">die</span>(<span class="string">"输入的密码不正确，请重新输入。"</span>);</div><div class="line">			<span class="keyword">if</span>(!$_POST[<span class="string">"todir"</span>]) $_POST[<span class="string">"todir"</span>] = <span class="string">"."</span>;</div><div class="line">			$z = <span class="keyword">new</span> Zip;</div><div class="line">			$have_zip_file = <span class="number">0</span>;</div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">start_unzip</span><span class="params">($tmp_name,$new_name,$checked)</span></span>&#123;</div><div class="line">				<span class="keyword">global</span> $_POST,$z,$have_zip_file;</div><div class="line">				$upfile = <span class="keyword">array</span>(<span class="string">"tmp_name"</span>=&gt;$tmp_name,<span class="string">"name"</span>=&gt;$new_name);</div><div class="line">				<span class="keyword">if</span>(is_file($upfile[tmp_name]))&#123;</div><div class="line">					$have_zip_file = <span class="number">1</span>;</div><div class="line">					<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		正在解压: &lt;br /&gt;&lt;input name='dfile[]' type='checkbox' value='$upfile[name]' ".($checked?<span class="string">"checked"</span>:<span class="string">""</span>).<span class="string">"&gt; $upfile[name]</span></div><div class="line"></div><div class="line">		";</div><div class="line">					<span class="keyword">if</span>(preg_match(<span class="string">'/\.zip$/mis'</span>,$upfile[name]))&#123;</div><div class="line">						$result=$z-&gt;Extract($upfile[tmp_name],$_POST[<span class="string">"todir"</span>]);</div><div class="line">						<span class="keyword">if</span>($result==<span class="number">-1</span>)&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		文件 $upfile[name] 错误.</div><div class="line">		";</div><div class="line">						&#125;</div><div class="line">						<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		&lt;br /&gt;完成,共建立 $z-&gt;total_folders 个目录,$z-&gt;total_files 个文件.</div><div class="line"></div><div class="line">		";</div><div class="line">					&#125;<span class="keyword">else</span>&#123;</div><div class="line">						<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		$upfile[name] 不是 zip 文件.</div><div class="line"></div><div class="line">		";			</div><div class="line">					&#125;</div><div class="line">					<span class="keyword">if</span>(realpath($upfile[name])!=realpath($upfile[tmp_name]))&#123;</div><div class="line">						@unlink($upfile[name]);</div><div class="line">						rename($upfile[tmp_name],$upfile[name]);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			clearstatcache();</div><div class="line"></div><div class="line">			start_unzip($_POST[<span class="string">"zipfile"</span>],$_POST[<span class="string">"zipfile"</span>],<span class="number">0</span>);</div><div class="line">			start_unzip($_FILES[<span class="string">"upfile"</span>][tmp_name],$_FILES[<span class="string">"upfile"</span>][name],<span class="number">1</span>);</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(!$have_zip_file)&#123;</div><div class="line">				<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		请选择或上传文件.</div><div class="line">		";</div><div class="line">			&#125;</div><div class="line">		<span class="meta">?&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"&lt;?=$_POST['password'];?&gt;"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"myaction"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"myaction"</span> <span class="attr">value</span>=<span class="string">"dodelete"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"按钮"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"返回"</span> <span class="attr">onClick</span>=<span class="string">"window.location='&lt;?=$_SERVER[PHP_SELF];?&gt;';"</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'button'</span> <span class="attr">value</span>=<span class="string">'反选'</span> <span class="attr">onclick</span>=<span class="string">'selrev();'</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'submit'</span> <span class="attr">onclick</span>=<span class="string">'return confirm("删除选定文件?");'</span> <span class="attr">value</span>=<span class="string">'删除选定'</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">'javascript'</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">selrev</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">with</span>(<span class="built_in">document</span>.myform) &#123;</div><div class="line">				<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;elements.length;i++) &#123;</div><div class="line">					thiselm = elements[i];</div><div class="line">					<span class="keyword">if</span>(thiselm.name.match(<span class="regexp">/dfile\[]/</span>))	thiselm.checked = !thiselm.checked;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		alert(<span class="string">'完成.'</span>);</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="php"><span class="meta">&lt;?</span></span></div><div class="line"></div><div class="line">		<span class="keyword">elseif</span>($_REQUEST[<span class="string">"myaction"</span>]==<span class="string">"dodelete"</span>):</div><div class="line">			set_time_limit(<span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span> ($_POST[<span class="string">'password'</span>] != $password) <span class="keyword">die</span>(<span class="string">"输入的密码不正确，请重新输入。"</span>);</div><div class="line"></div><div class="line">			$dfile = $_POST[<span class="string">"dfile"</span>]; </div><div class="line">			<span class="keyword">echo</span> <span class="string">"正在删除文件...</span></div><div class="line"></div><div class="line">		";</div><div class="line">			<span class="keyword">if</span>(is_array($dfile))&#123;</div><div class="line">				<span class="keyword">for</span>($i=count($dfile)<span class="number">-1</span>;$i&gt;=<span class="number">0</span>;$i--)&#123;</div><div class="line">					<span class="keyword">if</span>(is_file($dfile[$i]))&#123;</div><div class="line">						<span class="keyword">if</span>(@unlink($dfile[$i]))&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"已删除文件: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;<span class="keyword">else</span>&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"删除文件失败: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;</div><div class="line">					&#125;<span class="keyword">else</span>&#123;</div><div class="line">						<span class="keyword">if</span>(@rmdir($dfile[$i]))&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"已删除目录: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;<span class="keyword">else</span>&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"删除目录失败: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;				</div><div class="line">					&#125;</div><div class="line"></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		完成.</div><div class="line"></div><div class="line">		&lt;input type='button' value='返回' onclick=\"window.location='$_SERVER[PHP_SELF]';\"&gt;</div><div class="line"></div><div class="line">				 &lt;script language='javascript'&gt;('完成.');&lt;/script&gt;";</div><div class="line"></div><div class="line">		<span class="keyword">endif</span>;</div><div class="line"></div><div class="line">		<span class="meta">?&gt;</span></div><div class="line">		  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;copy; 2011 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.eincy.com"</span>&gt;</span>EinCy<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"eincy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/06/20/web-js-lightbox/" itemprop="url">
                  全屏屏蔽、自动居中的lightBox
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-06-20T18:09:17+08:00" content="2012-06-20">
              2012-06-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/06/20/web-js-lightbox/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/06/20/web-js-lightbox/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"Chomo"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"start"</span> <span class="attr">href</span>=<span class="string">"http://www.14px.com"</span> <span class="attr">title</span>=<span class="string">"Home"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>全屏屏蔽、自动居中的lightBox<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">* &#123; margin:0; padding:0; &#125;</div><div class="line">html,body &#123; height:100%; overflow:hidden; font:12px/1.5 simsun;&#125;</div><div class="line">.myPage &#123; line-height:3; overflow:auto; width:100%; height:100%;&#125;</div><div class="line">.lightBox,</div><div class="line">.popupCover,</div><div class="line">.popupIframe,</div><div class="line">.popupComponent &#123; position:absolute; left:0; top:0; width:100%; height:100%;&#125;</div><div class="line">.popupComponent &#123; z-index:2; display:none;&#125;</div><div class="line">.popupIframe &#123; display:none; _display:block; _filter:alpha(opacity=0);&#125;</div><div class="line">.popupCover &#123; background:#000; opacity:0.7; *filter:alpha(opacity=70);&#125;</div><div class="line">.lightBox &#123; text-align:center; overflow:auto;&#125;</div><div class="line">.lightBoxContent &#123; display:inline-block; *display:inline; zoom:1; width:300px; padding:10px; background:#fff; border:5px solid #00b4ff; vertical-align:middle;&#125;</div><div class="line">.lightBoxMaxHeight &#123; display:inline-block; vertical-align:middle; height:100%; *height:99.5%; width:1px; overflow:hidden; margin-left:-1px;&#125;</div><div class="line">.lightBoxWrapper &#123; display:inline-block; *display:inline; zoom:1; text-align:left;&#125;</div><div class="line">.lightBoxClose &#123; color:#f00;&#125;</div><div class="line">.lightBoxSubmit &#123; margin-top:10px; padding-top:5px; border-top:1px solid #ccc;&#125;</div><div class="line">.lightBoxSubmit input &#123; font-size:12px; padding:0 10px; overflow:visible; margin:0 5px;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupComponent"</span> <span class="attr">id</span>=<span class="string">"lightBox"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">class</span>=<span class="string">"popupIframe"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupCover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBox"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"lightBoxMaxHeight"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxContent"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxWrapper"</span>&gt;</span></div><div class="line">                当提示小于一行时文字居中<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxSubmit"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"确定"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox')"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"取消"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox')"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupComponent"</span> <span class="attr">id</span>=<span class="string">"lightBox2"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">class</span>=<span class="string">"popupIframe"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupCover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBox"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxContent"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxWrapper"</span>&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxSubmit"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"确定"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox2')"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"取消"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox2')"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"lightBoxMaxHeight"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"myPage"</span>&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"位于第一屏的按钮"</span> <span class="attr">onclick</span>=<span class="string">"showLayer('lightBox')"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">option</span>&gt;</span>一个用于测试IE6中是否能覆盖住的select<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">option</span>&gt;</span>又一个用于测试IE6中是否能覆盖住的select<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"位于第二屏中的按钮"</span> <span class="attr">onclick</span>=<span class="string">"showLayer('lightBox')"</span> /&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"当内容已经超过了一屏的高度"</span> <span class="attr">onclick</span>=<span class="string">"showLayer('lightBox2')"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showLayer</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(id).style.display = <span class="string">"block"</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideLayer</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(id).style.display = <span class="string">"none"</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/06/20/web-js-call/" itemprop="url">
                  js call
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-06-20T18:09:17+08:00" content="2012-06-20">
              2012-06-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/06/20/web-js-call/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/06/20/web-js-call/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="actionscript"></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyObj</span><span class="params">()</span></span>&#123;  &#125;</div><div class="line"></div><div class="line">MyObj.prototype.myMethod = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">alert(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">new</span> MyObj().myMethod(<span class="number">1</span>);</div><div class="line"></div><div class="line">MyObj.prototype.myMethod(<span class="number">1</span>);</div><div class="line"></div><div class="line">MyObj.prototype.myMethod.call(<span class="number">1</span>);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>运行结果是：</p>
<blockquote>
<p>[object Object]
[object Object]
1</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/06/20/web-js-dnd/" itemprop="url">
                  js拖动
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-06-20T18:09:17+08:00" content="2012-06-20">
              2012-06-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/06/20/web-js-dnd/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/06/20/web-js-dnd/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"&lt;a href="</span><span class="attr">http:</span>//<span class="attr">www.w3.org</span>/<span class="attr">1999</span>/<span class="attr">xhtml</span>"&gt;</span>http://www.w3.org/1999/xhtml<span class="tag">&lt;/<span class="name">a</span>&gt;</span>"&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">runat</span>=<span class="string">"server"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">javascript</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> intX;</div><div class="line"></div><div class="line"><span class="keyword">var</span> intY;</div><div class="line"></div><div class="line"><span class="keyword">var</span> blnDrag = <span class="literal">false</span>; <span class="comment">//鼠标是否已经按下</span></div><div class="line"></div><div class="line"><span class="comment">//鼠标按下</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MouseDown</span>(<span class="params">event,id</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">//鼠标按下</span></div><div class="line"></div><div class="line">blnDrag = <span class="literal">true</span>;</div><div class="line"></div><div class="line">intX = event.clientX - GetDiv(id).style.pixelLeft;</div><div class="line"></div><div class="line">intY = event.clientY - GetDiv(id).style.pixelTop;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//鼠标拖动</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">DragDiv</span>(<span class="params">event,id</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">//判断鼠标是否已经按下</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> (!blnDrag) &#123;</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">GetDiv(id).style.pixelLeft = event.clientX - intX;</div><div class="line"></div><div class="line">GetDiv(id).style.pixelTop = event.clientY - intY;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//鼠标松开时</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mouseUp</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">//鼠标没有按下</span></div><div class="line"></div><div class="line">blnDrag = <span class="literal">false</span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//得到DIV</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetDiv</span>(<span class="params">id</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form1"</span> <span class="attr">runat</span>=<span class="string">"server"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">style</span>=<span class="string">"CURSOR: move; POSITION: absolute;  WIDTH: 140px; HEIGHT: 112px; background-color:Red"</span>     <span class="attr">onmousemove</span>=<span class="string">"DragDiv(event,this.id)"</span>     <span class="attr">onmousedown</span>=<span class="string">"MouseDown(event,this.id)"</span>     <span class="attr">onmouseup</span>=<span class="string">"mouseUp()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/06/20/web-js-callback/" itemprop="url">
                  js回调函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-06-20T10:26:00+08:00" content="2012-06-20">
              2012-06-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web前端/" itemprop="url" rel="index">
                    <span itemprop="name">web前端</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/06/20/web-js-callback/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/06/20/web-js-callback/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>回调函数(callback)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span><span class="params">(callback)</span>  </span>&#123;</div><div class="line"></div><div class="line">alert(<span class="string">"我是parent函数a！"</span>);</div><div class="line"></div><div class="line">alert(<span class="string">"调用回调函数"</span>);</div><div class="line"></div><div class="line">callback();</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">alert(<span class="string">"我是回调函数b"</span>);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">alert(<span class="string">"我是回调函数c"</span>);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span>  </span>&#123;</div><div class="line"></div><div class="line">a(b);</div><div class="line"></div><div class="line">a(c);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>学习js回调函数<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">test()</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>应该能看到调用了两个回调函数<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/06/05/java-xpath-api/" itemprop="url">
                  Java 语言的 XPath API
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-06-05T17:58:51+08:00" content="2012-06-05">
              2012-06-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/06/05/java-xpath-api/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/06/05/java-xpath-api/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><p>如果要告诉别人买一加仑牛奶，您会怎么说？“请去买一加仑牛奶回来” 还是 “从前门出去，向左转，走三个街区向右转，再走半个街区向右转进入商店。走向四号通道，沿通道走五米向左，拿一瓶一加仑装的牛奶然后到收银台付款。再沿原路回家。” 简直太可笑了。只要在 “请去买一加仑牛奶回来” 的基础上稍加指示，多数成人都能自己买回牛奶来。
查询语言和计算机搜索与此类似。直接说 “找一个 Cryptonomicon 的副本” 要比编写搜索某个数据库的详细逻辑容易得多。由于搜索操作的逻辑非常相似，可以发明一种通用语言让您使用 “找到 Neal Stephenson 的所有著作” 这样的命令，然后编写对特定数据存储执行此类查询的引擎。</p>
<h1 id="xpath"><a class="header-anchor" href="#xpath"> </a>XPath</h1>
<p>在众多查询语言之中，结构化查询语言（SQL）是一种针对查询特定类型的关系库而设计和优化的语言。其他不那么常见的查询语言还有对象查询语言（OQL）和 XQuery。但本文的主题是 XPath，一种为查询 XML 文档而设计的查询语言。比如，下面这个简单的 XPath 查询可以在文档中找到作者为 Neal Stephenson 的所有图书的标题：</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><div class="line"><span class="regexp">//</span>book[author=<span class="string">"Neal Stephenson"</span>]<span class="regexp">/title</span></div></pre></td></tr></table></figure>
<p>作为对照，查询同样信息的纯 DOM 搜索代码如下所示：</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><div class="line">ArrayList result = <span class="keyword">new</span> ArrayList();</div><div class="line">NodeList books = doc.getElementsByTagName(<span class="string">"book"</span>);</div><div class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; books.getLength(); i++) &#123;</div><div class="line">    <span class="built_in">Element</span> book = (<span class="built_in">Element</span>) books.item(i);</div><div class="line">    NodeList authors = book.getElementsByTagName(<span class="string">"author"</span>);</div><div class="line">    boolean stephenson = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; authors.getLength(); j++) &#123;</div><div class="line">        <span class="built_in">Element</span> author = (<span class="built_in">Element</span>) authors.item(j);</div><div class="line">        NodeList children = author.getChildNodes();</div><div class="line">        <span class="built_in">StringBuffer</span> sb = <span class="keyword">new</span> <span class="built_in">StringBuffer</span>();</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> k = <span class="number">0</span>; k &lt; children.getLength(); k++) &#123;</div><div class="line">            Node child = children.item(k);</div><div class="line">            <span class="comment">// really should to do this recursively</span></div><div class="line">            <span class="keyword">if</span> (child.getNodeType() == Node.TEXT_NODE) &#123;</div><div class="line">                sb.append(child.getNodeValue());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (sb.toString().equals(<span class="string">"Neal Stephenson"</span>)) &#123;</div><div class="line">            stephenson = <span class="keyword">true</span>;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (stephenson) &#123;</div><div class="line">        NodeList titles = book.getElementsByTagName(<span class="string">"title"</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; titles.getLength(); j++) &#123;</div><div class="line">            result.add(titles.item(j));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不论您是否相信，以上代码中的 DOM 显然不如简单的 XPath 表达式通用或者健壮。您愿意编写、调试和维护哪一个？我想答案很明显。
但是虽然有很强的表达能力，XPath 并不是 Java 语言，事实上 XPath 不是一种完整的编程语言。有很多东西用 XPath 表达不出来，甚至有些查询也无法表达。比方说，XPath 不能查找国际标准图书编码（ISBN）检验码不匹配的所有图书，或者找出境外帐户数据库显示欠帐的所有作者。幸运的是，可以把 XPath 结合到 Java 程序中，这样就能发挥两者的优势了：Java 做 Java 所擅长的，XPath 做 XPath 所擅长的。
直到最近，Java 程序执行 XPath 查询所需要的应用程序编程接口（API）还因形形色色的 XPath 引擎而各不相同。Xalan 有一种 API，Saxon 使用另一种，其他引擎则使用其他的 API。这意味着代码往往把您限制到一种产品上。理想情况下，最好能够试验具有不同性能特点的各种引擎，而不会带来不适当的麻烦或者重新编写代码。
于是，Java 5 推出了 javax.xml.xpath 包，提供一个引擎和对象模型独立的 XPath 库。这个包也可用于 Java 1.3 及以后的版本，但需要单独安装 Java API for XML Processing (JAXP) 1.3。Xalan 2.7 和 Saxon 8 以及其他产品包含了这个库的实现。</p>
<p>一个简单的例子
我将举例说明如何使用它。然后再讨论一些细节问题。假设要查询一个图书列表，寻找 Neal Stephenson 的著作。具体来说，这个图书列表的形式如 清单 2 所示：
清单 2. 包含图书信息的 XML 文档</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">inventory</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">year</span>=<span class="string">"2000"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Snow Crash<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Neal Stephenson<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">publisher</span>&gt;</span>Spectra<span class="tag">&lt;/<span class="name">publisher</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">isbn</span>&gt;</span>0553380958<span class="tag">&lt;/<span class="name">isbn</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>14.95<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">book</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">year</span>=<span class="string">"2005"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Burning Tower<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Larry Niven<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Jerry Pournelle<span class="tag">&lt;/<span class="name">author</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">publisher</span>&gt;</span>Pocket<span class="tag">&lt;/<span class="name">publisher</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">isbn</span>&gt;</span>0743416910<span class="tag">&lt;/<span class="name">isbn</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>5.99<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">book</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">book</span> <span class="attr">year</span>=<span class="string">"1995"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Zodiac<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">author</span>&gt;</span>Neal Stephenson<span class="tag">&lt;<span class="name">author</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">publisher</span>&gt;</span>Spectra<span class="tag">&lt;/<span class="name">publisher</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">isbn</span>&gt;</span>0553573862<span class="tag">&lt;/<span class="name">isbn</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">price</span>&gt;</span>7.50<span class="tag">&lt;/<span class="name">price</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">book</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- more books... --&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;/<span class="name">inventory</span>&gt;</span></div></pre></td></tr></table></figure>
<p>查找所有图书的 XPath 查询非常简单：//book[author=“Neal Stephenson”]。为了找出这些图书的标题，只要增加一步，表达式就变成了 //book[author=“Neal Stephenson”]/title。最后，真正需要的是 title 元素的文本节点孩子。这就要求再增加一步，完整的表达式就是 //book[author=“Neal Stephenson”]/title/text()。
现在我提供一个简单的程序，它从 Java 语言中执行这个查询，然后把找到的所有图书的标题打印出来。首先，需要将文档加载到一个 DOM Document 对象中。为了简化起见，假设该文档在当前工作目录的 books.xml 文件中。下面的简单代码片段解析文档并建立对应的 Document 对象：
清单 3. 用 JAXP 解析文档</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><div class="line">DocumentBuilderFactory <span class="keyword">factory</span> = DocumentBuilderFactory.newInstance();</div><div class="line">        <span class="keyword">factory</span>.setNamespaceAware(<span class="keyword">true</span>); <span class="comment">// never forget this!</span></div><div class="line">        DocumentBuilder builder = <span class="keyword">factory</span>.newDocumentBuilder();</div><div class="line">        Document doc = builder.parse(<span class="string">"books.xml"</span>);</div></pre></td></tr></table></figure>
<p>到目前为止，这仅仅是标准的 JAXP 和 DOM，没有什么新鲜的。
接下来创建 XPathFactory：
XPathFactory factory = XPathFactory.newInstance();
然后使用这个工厂创建 XPath 对象：
XPath xpath = factory.newXPath();
XPath 对象编译 XPath 表达式：
PathExpression expr = xpath.compile(&quot;//book[author=‘Neal Stephenson’]/title/text()&quot;);
直接求值
如果 XPath 表达式只使用一次，可以跳过编译步骤直接对 XPath 对象调用 evaluate() 方法。但是，如果同一个表达式要重复使用多次，编译可能更快一些。
最后，计算 XPath 表达式得到结果。表达式是针对特定的上下文节点计算的，在这个例子中是整个文档。还必须指定返回类型。这里要求返回一个节点集：
Object result = expr.evaluate(doc, XPathConstants.NODESET);
可以将结果强制转化成 DOM NodeList，然后遍历列表得到所有的标题：
NodeList nodes = (NodeList) result;
for (int i = 0; i &lt; nodes.getLength(); i++) {
System.out.println(nodes.item(i).getNodeValue());
}
清单 4 把上述片段组合到了一个程序中。还要注意，这些方法可能抛出一些检查异常，这些异常必须在 throws 子句中声明，但是我在上面把它们掩盖起来了：
清单 4. 用固定的 XPath 表达式查询 XML 文档的完整程序
import java.io.IOException;
import org.w3c.dom.<em>;
import org.xml.sax.SAXException;
import javax.xml.parsers.</em>;
import javax.xml.xpath.*;</p>
<p>public class XPathExample {</p>
<p>public static void main(String[] args)
throws ParserConfigurationException, SAXException,
IOException, XPathExpressionException {</p>
<pre><code>DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true); // never forget this!
DocumentBuilder builder = domFactory.newDocumentBuilder();
Document doc = builder.parse(&quot;books.xml&quot;);

XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
XPathExpression expr 
 = xpath.compile(&quot;//book[author='Neal Stephenson']/title/text()&quot;);

Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i &lt; nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getNodeValue()); 
}
</code></pre>
<p>}</p>
<p>}
XPath 数据模型
每当混合使用诸如 XPath 和 Java 这样两种不同的语言时，必定会有某些将两者粘合在一起的明显接缝。并非一切都很合拍。XPath 和 Java 语言没有同样的类型系统。XPath 1.0 只有四种基本数据类型：
node-set
number
boolean
string
当然，Java 语言有更多的数据类型，包括用户定义的对象类型。
多数 XPath 表达式，特别是位置路径，都返回节点集。但是还有其他可能。比如，XPath 表达式 count(//book) 返回文档中的图书数量。XPath 表达式 count(//book[@author=“Neal Stephenson”]) &gt; 10 返回一个布尔值：如果文档中 Neal Stephenson 的著作超过 10 本则返回 true，否则返回 false。
evaluate() 方法被声明为返回 Object。实际返回什么依赖于 XPath 表达式的结果以及要求的类型。一般来说，XPath 的
number 映射为 java.lang.Double
string 映射为 java.lang.String
boolean 映射为 java.lang.Boolean
node-set 映射为 org.w3c.dom.NodeList
XPath 2
前面一直假设您使用的是 XPath 1.0。XPath 2 大大扩展和修改了类型系统。Java XPath API 支持 XPath 2 所需的主要修改是为返回 XPath 2 新数据类型增加常量。
在 Java 中计算 XPath 表达式时，第二个参数指定需要的返回类型。有五种可能，都在 javax.xml.xpath.XPathConstants 类中命名了常量：
XPathConstants.NODESET
XPathConstants.BOOLEAN
XPathConstants.NUMBER
XPathConstants.STRING
XPathConstants.NODE
最后一个 XPathConstants.NODE 实际上没有匹配的 XPath 类型。只有知道 XPath 表达式只返回一个节点或者只需要一个节点时才使用它。如果 XPath 表达式返回了多个节点并且指定了 XPathConstants.NODE，则 evaluate() 按照文档顺序返回第一个节点。如果 XPath 表达式选择了一个空集并指定了 XPathConstants.NODE，则 evaluate() 返回 null。
如果不能完成要求的转换，evaluate() 将抛出 XPathException。
回页首
名称空间上下文
若 XML 文档中的元素在名称空间中，查询该文档的 XPath 表达式必须使用相同的名称空间。XPath 表达式不一定要使用相同的前缀，只需要名称空间 URI 相同即可。事实上，如果 XML 文档使用默认名称空间，那么尽管目标文档没有使用前缀，XPath 表达式也必须使用前缀。
但是，Java 程序不是 XML 文档，因此不能用一般的名称空间解析。必须提供一个对象将前缀映射到名称空间 URI。该对象是 javax.xml.namespace.NamespaceContext 接口的实例。比如，假设图书文档放在 <a href="http://www.example.com/books" target="_blank" rel="external">http://www.example.com/books</a> 名称空间中，如 清单 5 所示：
清单 5. 使用默认名称空间的 XML 文档
<inventory xmlns="http://www.example.com/books">
<book year="2000">
<title>Snow Crash</title>
<author>Neal Stephenson</author>
<publisher>Spectra</publisher>
<isbn>0553380958</isbn>
<price>14.95<price>
</price></price></book></inventory></p>
<pre><code>&lt;!-- more books... --&gt;
</code></pre>
<inventory>
查找 Neal Stephenson 全部著作标题的 XPath 表达式就要改为 //pre:book[pre:author="Neal Stephenson"]/pre:title/text()。但是，必须将前缀 pre 映射到 URI http://www.example.com/books。NamespaceContext 接口在 Java 软件开发工具箱（JDK）或 JAXP 中没有默认实现似乎有点笨，但确实如此。不过，自己实现也不难。清单 6 对一个名称空间给出了简单的实现。还需要映射 xml 前缀。
清单 6. 绑定一个名称空间和默认名称空间的简单上下文
import java.util.Iterator;
import javax.xml.*;
import javax.xml.namespace.NamespaceContext;
<p>public class PersonalNamespaceContext implements NamespaceContext {</p>
<pre><code>public String getNamespaceURI(String prefix) {
    if (prefix == null) throw new NullPointerException(&quot;Null prefix&quot;);
    else if (&quot;pre&quot;.equals(prefix)) return &quot;http://www.example.org/books&quot;;
    else if (&quot;xml&quot;.equals(prefix)) return XMLConstants.XML_NS_URI;
    return XMLConstants.NULL_NS_URI;
}

// This method isn't necessary for XPath processing.
public String getPrefix(String uri) {
    throw new UnsupportedOperationException();
}

// This method isn't necessary for XPath processing either.
public Iterator getPrefixes(String uri) {
    throw new UnsupportedOperationException();
}
</code></pre>
<p>}
使用映射存储绑定和增加 setter 方法实现名称空间上下文的重用也不难。
创建 NamespaceContext 对象后，在编译表达式之前将其安装到 XPath 对象上。以后就可以像以前一样是用这些前缀查询了。比如：
清单 7. 使用名称空间的 XPath 查询
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
xpath.setNamespaceContext(new PersonalNamespaceContext());
XPathExpression expr
= xpath.compile(&quot;//pre:book[pre:author=‘Neal Stephenson’]/pre:title/text()&quot;);</p>
<p>Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i &lt; nodes.getLength(); i++) {
System.out.println(nodes.item(i).getNodeValue());
}
回页首
函数求解器
有时候，在 Java 语言中定义用于 XPath 表达式的扩展函数很有用。这些函数可以执行用纯 XPath 很难或者无法执行的任务。不过必须是真正的函数，而不是随意的方法。就是说不能有副作用。（XPath 函数可以按照任意的顺序求值任意多次。）
通过 Java XPath API 访问的扩展函数必须实现 javax.xml.xpath.XPathFunction 接口。这个接口只声明了一个方法 evaluate：
public Object evaluate(List args) throws XPathFunctionException
该方法必须返回 Java 语言能够转换到 XPath 的五种类型之一：
String
Double
Boolean
Nodelist
Node
比如，清单 8 显示了一个扩展函数，它检查 ISBN 的校验和并返回 Boolean。这个校验和的基本规则是前九位数的每一位乘上它的位置（即第一位数乘上 1，第二位数乘上 2，依次类推）。将这些数加起来然后取除以 11 的余数。如果余数是 10，那么最后一位数就是 X。
清单 8. 检查 ISBN 的 XPath 扩展函数
import java.util.List;
import javax.xml.xpath.<em>;
import org.w3c.dom.</em>;</p>
<p>public class ISBNValidator implements XPathFunction {</p>
<p>// This class could easily be implemented as a Singleton.</p>
<p>public Object evaluate(List args) throws XPathFunctionException {</p>
<pre><code>if (args.size() != 1) {
  throw new XPathFunctionException(&quot;Wrong number of arguments to valid-isbn()&quot;);
}

String isbn;
Object o = args.get(0);

// perform conversions
if (o instanceof String) isbn = (String) args.get(0);
else if (o instanceof Boolean) isbn = o.toString();
else if (o instanceof Double) isbn = o.toString();
else if (o instanceof NodeList) {
    NodeList list = (NodeList) o;
    Node node = list.item(0);
    // getTextContent is available in Java 5 and DOM 3.
    // In Java 1.4 and DOM 2, you'd need to recursively 
    // accumulate the content.
    isbn= node.getTextContent();
}
else {
    throw new XPathFunctionException(&quot;Could not convert argument type&quot;);
}

char[] data = isbn.toCharArray();
if (data.length != 10) return Boolean.FALSE;
int checksum = 0;
for (int i = 0; i &lt; 9; i++) {
    checksum += (i+1) * (data[i]-'0');
}
int checkdigit = checksum % 11;

if (checkdigit + '0' == data[9] || (data[9] == 'X' &amp;&amp; checkdigit == 10)) {
    return Boolean.TRUE;
}
return Boolean.FALSE;
</code></pre>
<p>}</p>
<p>}
下一步让这个扩展函数能够在 Java 程序中使用。为此，需要在编译表达式之前向 XPath 对象安装 javax.xml.xpath.XPathFunctionResolver。函数求解器将函数的 XPath 名称和名称空间 URI 映射到实现该函数的 Java 类。清单 9 是一个简单的函数求解器，将扩展函数 valid-isbn 和名称空间 <a href="http://www.example.org/books" target="_blank" rel="external">http://www.example.org/books</a> 映射到 清单 8 中的类。比如，XPath 表达式 //book[not(pre:valid-isbn(isbn))] 可以找到 ISBN 校验和不匹配的所有图书。
清单 9. 识别 valid-isbn 扩展函数的上下文
iimport javax.xml.namespace.QName;
import javax.xml.xpath.*;</p>
<p>public class ISBNFunctionContext implements XPathFunctionResolver {</p>
<p>private static final QName name
= new QName(“<a href="http://www.example.org/books" target="_blank" rel="external">http://www.example.org/books</a>”, “valid-isbn”);</p>
<p>public XPathFunction resolveFunction(QName name, int arity) {
if (name.equals(<a href="http://ISBNFunctionContext.name" target="_blank" rel="external">ISBNFunctionContext.name</a>) &amp;&amp; arity == 1) {
return new ISBNValidator();
}
return null;
}</p>
<p>}
由于扩展函数必须有名称空间，所以计算包含扩展函数的表达式时必须使用 NamespaceResolver，即便查询的文档没有使用任何名称空间。由于 XPathFunctionResolver、XPathFunction 和 NamespaceResolver 都是接口，如果方便的话可以将它们放在所有的类中。
回页首
结束语
用 SQL 和 XPath 这样的声明性语言编写查询，要比使用 Java 和 C 这样的命令式语言容易得多。但是，用 Java 和 C 这样的图灵完整语言编写复杂的逻辑，又比 SQL 和 XPath 这样的声明性语言容易得多。所幸的是，通过使用 Java Database Connectivity (JDBC) 和 javax.xml.xpath 之类的 API 可以将两者结合起来。随着世界上越来越多的数据转向 XML，javax.xml.xpath 将与 java.sql 一样变得越来越重要。</p>
</inventory>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/23/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars.githubusercontent.com/bianle"
               alt="bianle" />
          <p class="site-author-name" itemprop="name">bianle</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">234</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">160</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/bianle" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/bianlelpqi" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/i9erle" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://😇😈.ws" title="http://😇😈.ws" target="_blank">http://😇😈.ws</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://dzm.la" title="短怎么啦" target="_blank">短怎么啦</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.tunnel.ink" title="ngrok" target="_blank">ngrok</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://xingyetang.com" title="唐兴业的博客" target="_blank">唐兴业的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.panpan.lu" title="卢盼盼的博客" target="_blank">卢盼盼的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://yangjian.me" title="Alimon's Blog" target="_blank">Alimon's Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://hexo.io" title="Hexo" target="_blank">Hexo</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://timyang.net" title="Tim's Blog" target="_blank">Tim's Blog</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://lifegoo.pluskid.org/wiki/index.html" title="星黎殿" target="_blank">星黎殿</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://phl.iteye.com" title="猫头哥（朴海林）" target="_blank">猫头哥（朴海林）</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://zhaxiancheng" title="zxc" target="_blank">zxc</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2012 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bianle</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user">本站访客数</i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span>人次</span>
  

  
    <span class="site-pv"><i class="fa fa-eye">本站总访问量</i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"2le"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = false;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = decodeURIComponent(data.url);
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title >= 0 || index_content >= 0 ){
                                isMatch = true;
								if (i == 0) {
                                    first_occur = index_content;
                                }
                            } 
							
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->


  

  

  

  


</body>
</html>
