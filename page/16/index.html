<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://2le.me">
  <title>Hear</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hear">
<meta property="og:url" content="http://2le.me/page/16/index.html">
<meta property="og:site_name" content="Hear">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hear">
  
    <link rel="alternative" href="/atom.xml" title="Hear" type="application/atom+xml">
  
  
    <link rel="icon" href="/assets/img/favicon.ico">
  
  <link rel="stylesheet" href="/main.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  

</head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="https://avatars.githubusercontent.com/bianle" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">bianle</a></h1>
		</hgroup>

		
		<p class="header-subtitle">The quieter you become, the more you are able to hear.</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/photos">相册</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/bianle" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/i9erle" title="weibo">weibo</a>
		        
					<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">bianle</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="https://avatars.githubusercontent.com/bianle" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">bianle</h1>
			</hgroup>
			
			<p class="header-subtitle">The quieter you become, the more you are able to hear.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/photos">相册</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/bianle" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/i9erle" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-web-js-animate" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/04/web-js-animate/">js渐变效果</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html xmlns="&lt;a href="http://www.w3.org/1999/xhtml"&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span> new document <span class="tag">&lt;/<span class="name">title</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=gb2312"</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"fx"</span> <span class="attr">value</span>=<span class="string">"宽度渐变"</span> <span class="attr">id</span>=<span class="string">"wt-cg"</span>/&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"fx"</span> <span class="attr">value</span>=<span class="string">"高度渐变"</span> <span class="attr">id</span>=<span class="string">"hi-cg"</span>/&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"fx"</span> <span class="attr">value</span>=<span class="string">"透明度渐变"</span> <span class="attr">id</span>=<span class="string">"op-cg"</span>/&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"fx"</span> <span class="attr">value</span>=<span class="string">"边框渐变"</span> <span class="attr">id</span>=<span class="string">"bd-cg"</span>/&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">name</span>=<span class="string">"fx"</span> <span class="attr">value</span>=<span class="string">"综合渐变"</span> <span class="attr">id</span>=<span class="string">"zh-cg"</span>/&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demo"</span> <span class="attr">style</span>=<span class="string">"width:370px;height:100px;background-color:#00CC33;border:2px solid #990033; font-size:12px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">   </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animate</span>(<span class="params">el, prop, opts</span>) </span>&#123;   </div><div class="line"><span class="keyword">this</span>.el = el;   </div><div class="line"><span class="keyword">this</span>.prop = prop;   </div><div class="line"><span class="keyword">this</span>.from = opts.from;   </div><div class="line"><span class="keyword">this</span>.to = opts.to;   </div><div class="line"><span class="keyword">this</span>.time = opts.time;   </div><div class="line"><span class="keyword">this</span>.callback = opts.callback;   </div><div class="line"><span class="keyword">this</span>.animDiff = <span class="keyword">this</span>.to - <span class="keyword">this</span>.from;   </div><div class="line">&#125;   </div><div class="line">Animate.prototype._setStyle = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;   </div><div class="line"><span class="keyword">switch</span>(<span class="keyword">this</span>.prop) &#123;   </div><div class="line"><span class="keyword">case</span> <span class="string">'opacity'</span>:   </div><div class="line"><span class="keyword">this</span>.el.style[<span class="keyword">this</span>.prop] = val;   </div><div class="line"><span class="keyword">this</span>.el.style.filter = <span class="string">'alpha(opacity='</span> + val * <span class="number">100</span> + <span class="string">')'</span>;   </div><div class="line"><span class="keyword">break</span>;   </div><div class="line"><span class="keyword">default</span>:   </div><div class="line"><span class="keyword">this</span>.el.style[<span class="keyword">this</span>.prop] = val + <span class="string">'px'</span>;   </div><div class="line"><span class="keyword">break</span>;   </div><div class="line">&#125;   </div><div class="line">&#125;   </div><div class="line">Animate.prototype._animate = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> that = <span class="keyword">this</span>;   </div><div class="line"><span class="keyword">this</span>.now = <span class="keyword">new</span> <span class="built_in">Date</span>();   </div><div class="line"><span class="keyword">this</span>.diff = <span class="keyword">this</span>.now - <span class="keyword">this</span>.startTime;   </div><div class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.diff &gt; <span class="keyword">this</span>.time) &#123;   </div><div class="line"><span class="keyword">this</span>._setStyle(<span class="keyword">this</span>.to);   </div><div class="line"><span class="keyword">if</span> (<span class="keyword">this</span>.callback) &#123;   </div><div class="line"><span class="keyword">this</span>.callback.call(<span class="keyword">this</span>);   </div><div class="line">&#125;   </div><div class="line">clearInterval(<span class="keyword">this</span>.timer);   </div><div class="line"><span class="keyword">return</span>;   </div><div class="line">&#125;   </div><div class="line"><span class="keyword">this</span>.percentage = (<span class="built_in">Math</span>.floor((<span class="keyword">this</span>.diff / <span class="keyword">this</span>.time) * <span class="number">100</span>) / <span class="number">100</span>);   </div><div class="line"><span class="keyword">this</span>.val = (<span class="keyword">this</span>.animDiff * <span class="keyword">this</span>.percentage) + <span class="keyword">this</span>.from;   </div><div class="line"><span class="keyword">this</span>._setStyle(<span class="keyword">this</span>.val);   </div><div class="line">&#125;   </div><div class="line">Animate.prototype.start = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> that = <span class="keyword">this</span>;   </div><div class="line"><span class="keyword">this</span>.startTime = <span class="keyword">new</span> <span class="built_in">Date</span>();   </div><div class="line">clearInterval(<span class="keyword">this</span>.timer);   </div><div class="line"><span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line">that._animate.call(that);   </div><div class="line">&#125;, <span class="number">4</span>);   </div><div class="line">&#125;   </div><div class="line">Animate.canTransition = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> el = <span class="built_in">document</span>.createElement(<span class="string">'foo'</span>);   </div><div class="line">el.style.cssText = <span class="string">'-webkit-transition: all .5s linear;'</span>;   </div><div class="line"><span class="keyword">return</span> !!el.style.webkitTransitionProperty;   </div><div class="line">&#125;();   </div><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> T$ = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id); &#125;   </div><div class="line"><span class="keyword">var</span> T$$ = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">document</span>.getElementsByName(n); &#125;   </div><div class="line"><span class="keyword">var</span> demo = T$(<span class="string">'demo'</span>); <span class="keyword">var</span> btns = T$$(<span class="string">'fx'</span>);   </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">disableButton</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = btns.length; i &lt; len; ++i) &#123;   </div><div class="line">btns[i].disabled = <span class="string">'disabled'</span>;   </div><div class="line">&#125;   </div><div class="line">&#125;   </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">resetButton</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = btns.length; i &lt; len; ++i) &#123;   </div><div class="line">btns[i].disabled = <span class="string">''</span>;   </div><div class="line">&#125;   </div><div class="line">&#125;   </div><div class="line"><span class="comment">// 宽度渐变   </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeWidth</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> fx = <span class="string">'width'</span>, <span class="keyword">from</span> = demo.clientWidth, to = <span class="keyword">from</span> - <span class="number">270</span>, time = <span class="number">1000</span>;   </div><div class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">from</span> = demo.clientWidth; to = <span class="keyword">from</span> + <span class="number">270</span>;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123; <span class="attr">from</span>: <span class="keyword">from</span>, <span class="attr">to</span>: to, <span class="attr">time</span>: time, <span class="attr">callback</span>: resetButton &#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123;   </div><div class="line"><span class="attr">from</span>: <span class="keyword">from</span>,   </div><div class="line"><span class="attr">to</span>: to,   </div><div class="line"><span class="attr">time</span>: time,   </div><div class="line"><span class="attr">callback</span>: callback   </div><div class="line">&#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="comment">// 高度渐变   </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeHeight</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> fx = <span class="string">'height'</span>, <span class="keyword">from</span> = demo.clientHeight, to = <span class="keyword">from</span> + <span class="number">100</span>, time = <span class="number">1000</span>;   </div><div class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">from</span> = demo.clientHeight; to = <span class="keyword">from</span> - <span class="number">100</span>;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123; <span class="attr">from</span>: <span class="keyword">from</span>, <span class="attr">to</span>: to, <span class="attr">time</span>: time, <span class="attr">callback</span>: resetButton&#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123;   </div><div class="line"><span class="attr">from</span>: <span class="keyword">from</span>,   </div><div class="line"><span class="attr">to</span>: to,   </div><div class="line"><span class="attr">time</span>: time,   </div><div class="line"><span class="attr">callback</span>: callback   </div><div class="line">&#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="comment">// 透明度渐变   </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeOpacity</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> fx = <span class="string">'opacity'</span>, <span class="keyword">from</span> = <span class="number">1</span>, to = <span class="number">0</span>, time = <span class="number">1000</span>;   </div><div class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">from</span> = <span class="number">0</span>; to = <span class="number">1</span>;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123; <span class="attr">from</span>: <span class="keyword">from</span>, <span class="attr">to</span>: to, <span class="attr">time</span>: time, <span class="attr">callback</span>: resetButton&#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123;   </div><div class="line"><span class="attr">from</span>: <span class="keyword">from</span>,   </div><div class="line"><span class="attr">to</span>: to,   </div><div class="line"><span class="attr">time</span>: time,   </div><div class="line"><span class="attr">callback</span>: callback   </div><div class="line">&#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="comment">// 边框渐变   </span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeBorderWidth</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">var</span> fx = <span class="string">'borderWidth'</span>, <span class="keyword">from</span> = <span class="number">2</span>, to = <span class="number">10</span>, time = <span class="number">1000</span>;   </div><div class="line"><span class="keyword">var</span> callback = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line"><span class="keyword">from</span> = <span class="number">10</span>; to = <span class="number">2</span>;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123; <span class="attr">from</span>: <span class="keyword">from</span>, <span class="attr">to</span>: to, <span class="attr">time</span>: time, <span class="attr">callback</span>: resetButton &#125;).start();   </div><div class="line">&#125;   </div><div class="line"><span class="keyword">new</span> Animate(demo, fx, &#123;   </div><div class="line"><span class="attr">from</span>: <span class="keyword">from</span>,   </div><div class="line"><span class="attr">to</span>: to,   </div><div class="line"><span class="attr">time</span>: time,   </div><div class="line"><span class="attr">callback</span>: callback   </div><div class="line">&#125;).start();   </div><div class="line">&#125;   </div><div class="line">T$(<span class="string">'wt-cg'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line">disableButton(); changeWidth();   </div><div class="line">&#125;   </div><div class="line">T$(<span class="string">'hi-cg'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line">disableButton(); changeHeight();   </div><div class="line">&#125;   </div><div class="line">T$(<span class="string">'op-cg'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line">disableButton(); changeOpacity();   </div><div class="line">&#125;   </div><div class="line">T$(<span class="string">'bd-cg'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line">disableButton(); changeBorderWidth();   </div><div class="line">&#125;   </div><div class="line">T$(<span class="string">'zh-cg'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;   </div><div class="line">disableButton(); changeWidth(); changeHeight(); changeOpacity();   </div><div class="line">&#125;   </div><div class="line"><span class="comment">//if (Animate.canTransition) &#123;   </span></div><div class="line"><span class="comment">//demo.style.webkitTransition = 'opacity 3s ease-in';   </span></div><div class="line"><span class="comment">//demo.style.opacity = 0;   </span></div><div class="line"><span class="comment">//&#125; else &#123;   </span></div><div class="line"><span class="comment">//&#125;   </span></div><div class="line">&#125;   </div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>   </div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/04/web-js-animate/" class="archive-article-date">
  	<time datetime="2012-07-04T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/渐变/">渐变</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/web前端/">web前端</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-web-html-disable-copy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/04/web-html-disable-copy/">网页防止复制</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在body标签内加上一段代码，禁用右键菜单</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">body</span> oncontextmenu=<span class="string">"return false"</span></div><div class="line">onselectstart=<span class="string">"return false"</span></div><div class="line">ondragstart=<span class="string">"return false"</span></div><div class="line">onbeforecopy=<span class="string">"return false"</span></div><div class="line">oncopy=document<span class="selector-class">.selection</span><span class="selector-class">.empty</span>() </div><div class="line">onselect=document<span class="selector-class">.selection</span><span class="selector-class">.empty</span>()&gt;</div></pre></td></tr></table></figure>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input <span class="attr">type="text"</span> <span class="attr">id="username"</span> <span class="attr">name="username"</span> <span class="attr">value="禁止复制"</span> <span class="attr">onpaste="return</span> <span class="literal">false</span><span class="string">" oncontextmenu="</span>return <span class="literal">false</span><span class="string">" oncopy="</span>return <span class="literal">false</span><span class="string">" oncut="</span>return <span class="literal">false</span><span class="string">" &gt;</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/04/web-html-disable-copy/" class="archive-article-date">
  	<time datetime="2012-07-04T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/web前端/">web前端</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-web-gxt-desktop" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/04/web-gxt-desktop/">gxt desktop</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> * Ext GWT - Ext for GWT</div><div class="line"> * Copyright(c) 2007-2009, Ext JS, LLC.</div><div class="line"> * licensing@extjs.com</div><div class="line"> *</div><div class="line"> * http://extjs.com/license</div><div class="line"> */</div><div class="line">package com.google.gwt.sample.hello.client;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.<span class="built_in">Date</span>;</div><div class="line"><span class="keyword">import</span> java.util.<span class="built_in">List</span>;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.Desktop;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.Shortcut;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.StartMenu;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.desktop.client.TaskBar;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.Style.Scroll;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.BaseModel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.BaseModelData;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.ModelData;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.<span class="built_in">data</span>.ModelIconProvider;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.event.ComponentEvent;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.event.MenuEvent;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.event.SelectionListener;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.store.GroupingStore;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.store.TreeStore;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.util.IconHelper;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.ContentPanel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.Info;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.TabItem;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.TabPanel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.Window;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.button.Button;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.button.ToolButton;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.ColumnConfig;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.ColumnModel;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.Grid;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.GridGroupRenderer;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.GroupColumnData;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.grid.GroupingView;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.layout.AccordionLayout;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.layout.FitLayout;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.menu.Menu;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.menu.MenuItem;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.toolbar.SeparatorToolItem;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.toolbar.ToolBar;</div><div class="line"><span class="keyword">import</span> com.extjs.gxt.ui.client.widget.treepanel.TreePanel;</div><div class="line"><span class="keyword">import</span> com.google.gwt.core.client.EntryPoint;</div><div class="line"><span class="keyword">import</span> com.google.gwt.i18n.client.DateTimeFormat;</div><div class="line"><span class="keyword">import</span> com.google.gwt.i18n.client.NumberFormat;</div><div class="line"><span class="keyword">import</span> com.google.gwt.user.client.ui.AbstractImagePrototype;</div><div class="line"></div><div class="line"><span class="keyword">public</span> class Hello implements EntryPoint &#123;</div><div class="line">	<span class="keyword">private</span> Desktop desktop = <span class="literal">new</span> Desktop();</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="literal">void</span> itemSelected(ComponentEvent ce) &#123;</div><div class="line">		Window w;</div><div class="line">		<span class="keyword">if</span> (ce instanceof MenuEvent) &#123;</div><div class="line">			MenuEvent me = (MenuEvent) ce;</div><div class="line">			w = me.getItem().getData(<span class="string">"window"</span>);</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			w = ce.getComponent().getData(<span class="string">"window"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (!desktop.getWindows().contains(w)) &#123;</div><div class="line">			desktop.addWindow(w);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (w != <span class="built_in">null</span> &amp;&amp; !w.isVisible()) &#123;</div><div class="line">			w.show();</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			w.toFront();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="literal">void</span> onModuleLoad() &#123;</div><div class="line">		SelectionListener&lt;MenuEvent&gt; menuListener = <span class="literal">new</span> SelectionListener&lt;MenuEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(MenuEvent me) &#123;</div><div class="line">				itemSelected(me);</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">		SelectionListener&lt;ComponentEvent&gt; shortcutListener = <span class="literal">new</span> SelectionListener&lt;ComponentEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(ComponentEvent ce) &#123;</div><div class="line">				itemSelected(ce);</div><div class="line">			&#125;</div><div class="line">		&#125;;</div><div class="line">		Window gridWindow = createGridWindow();</div><div class="line">		Window accordionWindow = createAccordionWindow();</div><div class="line">		Shortcut s1 = <span class="literal">new</span> Shortcut();</div><div class="line">		s1.setText(<span class="string">"Grid Window"</span>);</div><div class="line">		s1.setId(<span class="string">"grid-win-shortcut"</span>);</div><div class="line">		s1.setData(<span class="string">"window"</span>, gridWindow);</div><div class="line">		s1.addSelectionListener(shortcutListener);</div><div class="line">		desktop.addShortcut(s1);</div><div class="line">		Shortcut s2 = <span class="literal">new</span> Shortcut();</div><div class="line">		s2.setText(<span class="string">"Accordion Window"</span>);</div><div class="line">		s2.setId(<span class="string">"acc-win-shortcut"</span>);</div><div class="line">		s2.setData(<span class="string">"window"</span>, accordionWindow);</div><div class="line">		s2.addSelectionListener(shortcutListener);</div><div class="line">		desktop.addShortcut(s2);</div><div class="line">		TaskBar taskBar = desktop.getTaskBar();</div><div class="line">		StartMenu menu = taskBar.getStartMenu();</div><div class="line">		menu.setHeading(<span class="string">"Darrell Meyer"</span>);</div><div class="line">		menu.setIconStyle(<span class="string">"user"</span>);</div><div class="line">		MenuItem menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Grid Window"</span>);</div><div class="line">		menuItem.setData(<span class="string">"window"</span>, gridWindow);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"icon-grid"</span>));</div><div class="line">		menuItem.addSelectionListener(menuListener);</div><div class="line">		menu.add(menuItem);</div><div class="line">		menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Tab Window"</span>);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"tabs"</span>));</div><div class="line">		menuItem.addSelectionListener(menuListener);</div><div class="line">		menuItem.setData(<span class="string">"window"</span>, createTabWindow());</div><div class="line">		menu.add(menuItem);</div><div class="line">		menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Accordion Window"</span>);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"accordion"</span>));</div><div class="line">		menuItem.addSelectionListener(menuListener);</div><div class="line">		menuItem.setData(<span class="string">"window"</span>, accordionWindow);</div><div class="line">		menu.add(menuItem);</div><div class="line">		menuItem = <span class="literal">new</span> MenuItem(<span class="string">"Bogus Submenu"</span>);</div><div class="line">		menuItem.setIcon(IconHelper.createStyle(<span class="string">"bogus"</span>));</div><div class="line">		Menu sub = <span class="literal">new</span> Menu();</div><div class="line">		for (int i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">			MenuItem item = <span class="literal">new</span> MenuItem(<span class="string">"Bogus Window "</span> + (i + <span class="number">1</span>));</div><div class="line">			item.setData(<span class="string">"window"</span>, createBogusWindow(i));</div><div class="line">			item.addSelectionListener(menuListener);</div><div class="line">			sub.add(item);</div><div class="line">		&#125;</div><div class="line">		menuItem.setSubMenu(sub);</div><div class="line">		menu.add(menuItem);</div><div class="line">		<span class="comment">// tools</span></div><div class="line">		MenuItem tool = <span class="literal">new</span> MenuItem(<span class="string">"Settings"</span>);</div><div class="line">		tool.setIcon(IconHelper.createStyle(<span class="string">"settings"</span>));</div><div class="line">		tool.addSelectionListener(<span class="literal">new</span> SelectionListener&lt;MenuEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(MenuEvent ce) &#123;</div><div class="line">				Info.display(<span class="string">"Event"</span>, <span class="string">"The 'Settings' tool was clicked"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		menu.addTool(tool);</div><div class="line">		menu.addToolSeperator();</div><div class="line">		tool = <span class="literal">new</span> MenuItem(<span class="string">"Logout"</span>);</div><div class="line">		tool.setIcon(IconHelper.createStyle(<span class="string">"logout"</span>));</div><div class="line">		tool.addSelectionListener(<span class="literal">new</span> SelectionListener&lt;MenuEvent&gt;() &#123;</div><div class="line">			@Override</div><div class="line">			<span class="keyword">public</span> <span class="literal">void</span> componentSelected(MenuEvent ce) &#123;</div><div class="line">				Info.display(<span class="string">"Event"</span>, <span class="string">"The 'Logout' tool was clicked"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		menu.addTool(tool);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createAccordionWindow() &#123;</div><div class="line">		final Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"accordion"</span>));</div><div class="line">		w.setHeading(<span class="string">"Accordion Window"</span>);</div><div class="line">		w.setWidth(<span class="number">200</span>);</div><div class="line">		w.setHeight(<span class="number">350</span>);</div><div class="line">		ToolBar toolBar = <span class="literal">new</span> ToolBar();</div><div class="line">		Button item = <span class="literal">new</span> Button();</div><div class="line">		item.setIcon(IconHelper.createStyle(<span class="string">"icon-connect"</span>));</div><div class="line">		toolBar.add(item);</div><div class="line">		toolBar.add(<span class="literal">new</span> SeparatorToolItem());</div><div class="line">		w.setTopComponent(toolBar);</div><div class="line">		item = <span class="literal">new</span> Button();</div><div class="line">		item.setIcon(IconHelper.createStyle(<span class="string">"icon-user-add"</span>));</div><div class="line">		toolBar.add(item);</div><div class="line">		item = <span class="literal">new</span> Button();</div><div class="line">		item.setIcon(IconHelper.createStyle(<span class="string">"icon-user-delete"</span>));</div><div class="line">		toolBar.add(item);</div><div class="line">		w.setLayout(<span class="literal">new</span> AccordionLayout());</div><div class="line">		ContentPanel cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"Online Users"</span>);</div><div class="line">		cp.setScrollMode(Scroll.AUTO);</div><div class="line">		cp.getHeader().addTool(<span class="literal">new</span> ToolButton(<span class="string">"x-tool-refresh"</span>));</div><div class="line">		w.add(cp);</div><div class="line">		TreeStore&lt;ModelData&gt; store = <span class="literal">new</span> TreeStore&lt;ModelData&gt;();</div><div class="line">		TreePanel&lt;ModelData&gt; tree = <span class="literal">new</span> TreePanel&lt;ModelData&gt;(store);</div><div class="line">		tree.setIconProvider(<span class="literal">new</span> ModelIconProvider&lt;ModelData&gt;() &#123;</div><div class="line">			<span class="keyword">public</span> AbstractImagePrototype getIcon(ModelData model) &#123;</div><div class="line">				<span class="keyword">if</span> (model.get(<span class="string">"icon"</span>) != <span class="built_in">null</span>) &#123;</div><div class="line">					<span class="keyword">return</span> IconHelper.createStyle((<span class="built_in">String</span>) model.get(<span class="string">"icon"</span>));</div><div class="line">				&#125; <span class="keyword">else</span> &#123;</div><div class="line">					<span class="keyword">return</span> <span class="built_in">null</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		tree.setDisplayProperty(<span class="string">"name"</span>);</div><div class="line">		ModelData m = newItem(<span class="string">"Family"</span>, <span class="built_in">null</span>);</div><div class="line">		store.add(m, <span class="literal">false</span>);</div><div class="line">		tree.setExpanded(m, <span class="literal">true</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Darrell"</span>, <span class="string">"user"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Maro"</span>, <span class="string">"user-girl"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Lia"</span>, <span class="string">"user-kid"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Alec"</span>, <span class="string">"user-kid"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Andrew"</span>, <span class="string">"user-kid"</span>), <span class="literal">false</span>);</div><div class="line">		m = newItem(<span class="string">"Friends"</span>, <span class="built_in">null</span>);</div><div class="line">		store.add(m, <span class="literal">false</span>);</div><div class="line">		tree.setExpanded(m, <span class="literal">true</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Bob"</span>, <span class="string">"user"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Mary"</span>, <span class="string">"user-girl"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Sally"</span>, <span class="string">"user-girl"</span>), <span class="literal">false</span>);</div><div class="line">		store.add(m, newItem(<span class="string">"Jack"</span>, <span class="string">"user"</span>), <span class="literal">false</span>);</div><div class="line">		cp.add(tree);</div><div class="line">		cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"Settings"</span>);</div><div class="line">		cp.setBodyStyleName(<span class="string">"pad-text"</span>);</div><div class="line">		cp.addText(<span class="string">"DUMMY_TEXT_SHORT"</span>);</div><div class="line">		w.add(cp);</div><div class="line">		cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"Stuff"</span>);</div><div class="line">		cp.setBodyStyleName(<span class="string">"pad-text"</span>);</div><div class="line">		cp.addText(<span class="string">"DUMMY_TEXT_SHORT"</span>);</div><div class="line">		w.add(cp);</div><div class="line">		cp = <span class="literal">new</span> ContentPanel();</div><div class="line">		cp.setAnimCollapse(<span class="literal">false</span>);</div><div class="line">		cp.setHeading(<span class="string">"More Stuff"</span>);</div><div class="line">		cp.setBodyStyleName(<span class="string">"pad-text"</span>);</div><div class="line">		cp.addText(<span class="string">"DUMMY_TEXT_SHORT"</span>);</div><div class="line">		w.add(cp);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createGridWindow() &#123;</div><div class="line">		Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"icon-grid"</span>));</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setHeading(<span class="string">"Grid Window"</span>);</div><div class="line">		w.setSize(<span class="number">500</span>, <span class="number">400</span>);</div><div class="line">		w.setLayout(<span class="literal">new</span> FitLayout());</div><div class="line">		GroupingStore&lt;Stock&gt; store = <span class="literal">new</span> GroupingStore&lt;Stock&gt;();</div><div class="line">		store.add(getCompanies());</div><div class="line">		store.groupBy(<span class="string">"industry"</span>);</div><div class="line">		ColumnConfig company = <span class="literal">new</span> ColumnConfig(<span class="string">"name"</span>, <span class="string">"Company"</span>, <span class="number">60</span>);</div><div class="line">		ColumnConfig price = <span class="literal">new</span> ColumnConfig(<span class="string">"open"</span>, <span class="string">"Price"</span>, <span class="number">20</span>);</div><div class="line">		price.setNumberFormat(NumberFormat.getCurrencyFormat());</div><div class="line">		ColumnConfig change = <span class="literal">new</span> ColumnConfig(<span class="string">"change"</span>, <span class="string">"Change"</span>, <span class="number">20</span>);</div><div class="line">		ColumnConfig industry = <span class="literal">new</span> ColumnConfig(<span class="string">"industry"</span>, <span class="string">"Industry"</span>, <span class="number">20</span>);</div><div class="line">		ColumnConfig last = <span class="literal">new</span> ColumnConfig(<span class="string">"date"</span>, <span class="string">"Last Updated"</span>, <span class="number">20</span>);</div><div class="line">		last.setDateTimeFormat(DateTimeFormat.getFormat(<span class="string">"MM/dd/y"</span>));</div><div class="line">		<span class="built_in">List</span>&lt;ColumnConfig&gt; config = <span class="literal">new</span> ArrayList&lt;ColumnConfig&gt;();</div><div class="line">		config.add(company);</div><div class="line">		config.add(price);</div><div class="line">		config.add(change);</div><div class="line">		config.add(industry);</div><div class="line">		config.add(last);</div><div class="line">		final ColumnModel cm = <span class="literal">new</span> ColumnModel(config);</div><div class="line">		GroupingView view = <span class="literal">new</span> GroupingView();</div><div class="line">		view.setForceFit(<span class="literal">true</span>);</div><div class="line">		view.setGroupRenderer(<span class="literal">new</span> GridGroupRenderer() &#123;</div><div class="line">			<span class="keyword">public</span> <span class="built_in">String</span> render(GroupColumnData <span class="built_in">data</span>) &#123;</div><div class="line">				<span class="built_in">String</span> f = cm.getColumnById(<span class="built_in">data</span>.field).getHeader();</div><div class="line">				<span class="built_in">String</span> l = <span class="built_in">data</span>.models.size() == <span class="number">1</span> ? <span class="string">"Item"</span> : <span class="string">"Items"</span>;</div><div class="line">				<span class="keyword">return</span> f + <span class="string">": "</span> + <span class="built_in">data</span>.<span class="keyword">group</span> + <span class="string">" ("</span> + <span class="built_in">data</span>.models.size() + <span class="string">" "</span></div><div class="line">						+ l + <span class="string">")"</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;);</div><div class="line">		Grid&lt;Stock&gt; grid = <span class="literal">new</span> Grid&lt;Stock&gt;(store, cm);</div><div class="line">		grid.setView(view);</div><div class="line">		grid.setBorders(<span class="literal">true</span>);</div><div class="line">		w.add(grid);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createTabWindow() &#123;</div><div class="line">		Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setSize(<span class="number">740</span>, <span class="number">480</span>);</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"tabs"</span>));</div><div class="line">		w.setHeading(<span class="string">"Tab Window"</span>);</div><div class="line">		w.setLayout(<span class="literal">new</span> FitLayout());</div><div class="line">		TabPanel panel = <span class="literal">new</span> TabPanel();</div><div class="line">		for (int i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">			TabItem item = <span class="literal">new</span> TabItem(<span class="string">"Tab Item "</span> + (i + <span class="number">1</span>));</div><div class="line">			item.addText(<span class="string">"Something useful would be here"</span>);</div><div class="line">			panel.add(item);</div><div class="line">		&#125;</div><div class="line">		w.add(panel);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> Window createBogusWindow(int index) &#123;</div><div class="line">		Window w = <span class="literal">new</span> Window();</div><div class="line">		w.setIcon(IconHelper.createStyle(<span class="string">"bogus"</span>));</div><div class="line">		w.setMinimizable(<span class="literal">true</span>);</div><div class="line">		w.setMaximizable(<span class="literal">true</span>);</div><div class="line">		w.setHeading(<span class="string">"Bogus Window "</span> + ++index);</div><div class="line">		w.setSize(<span class="number">400</span>, <span class="number">300</span>);</div><div class="line">		<span class="keyword">return</span> w;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> ModelData newItem(<span class="built_in">String</span> text, <span class="built_in">String</span> iconStyle) &#123;</div><div class="line">		ModelData m = <span class="literal">new</span> BaseModelData();</div><div class="line">		m.<span class="built_in">set</span>(<span class="string">"name"</span>, text);</div><div class="line">		m.<span class="built_in">set</span>(<span class="string">"icon"</span>, iconStyle);</div><div class="line">		<span class="keyword">return</span> m;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> static <span class="built_in">List</span>&lt;Stock&gt; getCompanies() &#123;</div><div class="line">		DateTimeFormat f = DateTimeFormat.getFormat(<span class="string">"M/d h:mma"</span>);</div><div class="line">		<span class="built_in">List</span>&lt;Stock&gt; stocks = <span class="literal">new</span> ArrayList&lt;Stock&gt;();</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"3m Co"</span>, <span class="number">71.72</span>, <span class="number">0.02</span>, <span class="number">0.03</span>,</div><div class="line">				f.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Alcoa Inc"</span>, <span class="number">29.01</span>, <span class="number">0.42</span>, <span class="number">1.47</span>, f</div><div class="line">				.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Altria Group Inc"</span>, <span class="number">83.81</span>, <span class="number">0.28</span>, <span class="number">0.34</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"American Express Company"</span>, <span class="number">52.55</span>, <span class="number">0.01</span>, <span class="number">0.02</span>, f</div><div class="line">				.parse(<span class="string">"4/8 12:00am"</span>), <span class="string">"Finance"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"American International Group, Inc."</span>, <span class="number">64.13</span>, <span class="number">0.31</span>,</div><div class="line">				<span class="number">0.49</span>, f.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Services"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"AT&amp;T Inc."</span>, <span class="number">31.61</span>, <span class="number">-0.48</span>, <span class="number">-1.54</span>, f</div><div class="line">				.parse(<span class="string">"4/8 12:00am"</span>), <span class="string">"Services"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Boeing Co."</span>, <span class="number">75.43</span>, <span class="number">0.53</span>, <span class="number">0.71</span>, f</div><div class="line">				.parse(<span class="string">"4/8 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Caterpillar Inc."</span>, <span class="number">67.27</span>, <span class="number">0.92</span>, <span class="number">1.39</span>, f</div><div class="line">				.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Services"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Citigroup, Inc."</span>, <span class="number">49.37</span>, <span class="number">0.02</span>, <span class="number">0.04</span>, f</div><div class="line">				.parse(<span class="string">"4/4 12:00am"</span>), <span class="string">"Finance"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"E.I. du Pont de Nemours and Company"</span>, <span class="number">40.48</span>,</div><div class="line">				<span class="number">0.51</span>, <span class="number">1.28</span>, f.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Exxon Mobil Corp"</span>, <span class="number">68.1</span>, <span class="number">-0.43</span>, <span class="number">-0.64</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"General Electric Company"</span>, <span class="number">34.14</span>, <span class="number">-0.08</span>, <span class="number">-0.23</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"General Motors Corporation"</span>, <span class="number">30.27</span>, <span class="number">1.09</span>, <span class="number">3.74</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Automotive"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Hewlett-Packard Co."</span>, <span class="number">36.53</span>, <span class="number">-0.03</span>, <span class="number">-0.08</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Computer"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Honeywell Intl Inc"</span>, <span class="number">38.77</span>, <span class="number">0.05</span>, <span class="number">0.13</span>, f</div><div class="line">				.parse(<span class="string">"4/3 12:00am"</span>), <span class="string">"Manufacturing"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Intel Corporation"</span>, <span class="number">19.88</span>, <span class="number">0.31</span>, <span class="number">1.58</span>, f</div><div class="line">				.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Computer"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"International Business Machines"</span>, <span class="number">81.41</span>, <span class="number">0.44</span>,</div><div class="line">				<span class="number">0.54</span>, f.parse(<span class="string">"4/1 12:00am"</span>), <span class="string">"Computer"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"Johnson &amp; Johnson"</span>, <span class="number">64.72</span>, <span class="number">0.06</span>, <span class="number">0.09</span>, f</div><div class="line">				.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Medical"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"JP Morgan &amp; Chase &amp; Co"</span>, <span class="number">45.73</span>, <span class="number">0.07</span>, <span class="number">0.15</span>, f</div><div class="line">				.parse(<span class="string">"4/2 12:00am"</span>), <span class="string">"Finance"</span>));</div><div class="line">		stocks.add(<span class="literal">new</span> Stock(<span class="string">"McDonald/"</span>s Corporation<span class="string">", 36.76, 0.86, 2.40, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">2</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Food<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Merck &amp; Co., Inc.<span class="string">", 40.96, 0.41, 1.01, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">2</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Medical<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Microsoft Corporation<span class="string">", 25.84, 0.14, 0.54, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">2</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Computer<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Pfizer Inc<span class="string">", 27.96, 0.4, 1.45, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">8</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Services<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("The Coca<span class="params">-Cola</span> Company<span class="string">", 45.07, 0.26, 0.58, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Food<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("The Home Depot, Inc.<span class="string">", 34.64, 0.35, 1.02, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">8</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Retail<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("The Procter &amp; Gamble Company<span class="string">", 61.91, 0.01, 0.02,</span></div><div class="line">				f.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Manufacturing<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("United Technologies Corporation<span class="string">", 63.26, 0.55,</span></div><div class="line">				0.88, f.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Computer<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Verizon Communications<span class="string">", 35.57, 0.39, 1.11, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">3</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Services<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Wal<span class="params">-Mart</span> Stores, Inc.<span class="string">", 45.45, 0.73, 1.63, f</span></div><div class="line">				.parse("<span class="number">4</span>/<span class="number">3</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Retail<span class="string">"));</span></div><div class="line">		stocks.add(new Stock("Walt Disney Company (The) (Holding Company)<span class="string">",</span></div><div class="line">				29.89, 0.24, 0.81, f.parse("<span class="number">4</span>/<span class="number">1</span> <span class="number">12</span>:<span class="number">00</span>am<span class="string">"), "</span>Services<span class="string">"));</span></div><div class="line">		return stocks;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Stock extends BaseModel &#123;</div><div class="line">	public Stock() &#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Stock(String name, String symbol, double open, double last) &#123;</div><div class="line">		set("name<span class="string">", name);</span></div><div class="line">		set("symbol<span class="string">", symbol);</span></div><div class="line">		set("open<span class="string">", open);</span></div><div class="line">		set("last<span class="string">", last);</span></div><div class="line">		set("<span class="built_in">date</span><span class="string">", new Date());</span></div><div class="line">		set("change<span class="string">", last - open);</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Stock(String name, double open, double change, double pctChange,</div><div class="line">			Date date, String industry) &#123;</div><div class="line">		set("name<span class="string">", name);</span></div><div class="line">		set("open<span class="string">", open);</span></div><div class="line">		set("change<span class="string">", change);</span></div><div class="line">		set("percentChange<span class="string">", pctChange);</span></div><div class="line">		set("<span class="built_in">date</span><span class="string">", date);</span></div><div class="line">		set("industry<span class="string">", industry);</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getIndustry() &#123;</div><div class="line">		return get("industry<span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setIndustry(String industry) &#123;</div><div class="line">		set("industry<span class="string">", industry);</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Date getLastTrans() &#123;</div><div class="line">		return (Date) get("<span class="built_in">date</span><span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getName() &#123;</div><div class="line">		return (String) get("name<span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getSymbol() &#123;</div><div class="line">		return (String) get("symbol<span class="string">");</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getOpen() &#123;</div><div class="line">		Double open = (Double) get("open<span class="string">");</span></div><div class="line">		return open.doubleValue();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getLast() &#123;</div><div class="line">		Double open = (Double) get("last<span class="string">");</span></div><div class="line">		return open.doubleValue();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getChange() &#123;</div><div class="line">		return getLast() - getOpen();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public double getPercentChange() &#123;</div><div class="line">		return getChange() / getOpen();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String toString() &#123;</div><div class="line">		return getName();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>gxt环境搭建参考http://wenku.baidu.com/view/29dfff030740be1e650e9ae5.html</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/04/web-gxt-desktop/" class="archive-article-date">
  	<time datetime="2012-07-04T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/extjs/">extjs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gwt/">gwt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gxt/">gxt</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/web前端/">web前端</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-linux-ubuntu-open-root-user" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/04/linux-ubuntu-open-root-user/">如何开启Ubuntu 的 root 用户</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Ubuntu安装后，root用户默认是被锁定了的，不允许登录，也不允许“su”到 root。有人说这是个不好的实践，特别是对于服务器来说。我觉得对于桌面用户来说，这样安全性更高一些，是应该的；但对于服务器可以设置成“允许 su 到root，但不允许root用户直接登录”。而我为了开发时的方便，则在桌面和服务器上都采用这种方式。
允许 su 到 root
非常简单，下面是设置的方法：
me@tipfoo:~$ sudo passwd
Password: &lt;— 输入安装时那个用户的密码
Enter new UNIX password: &lt;— 新的Root用户密码
Retype new UNIX password: &lt;— 重复新的Root用户密码
passwd：已成功更新密码
允许root登录
如果要允许root登录（不推荐），则这样操作：
me@tipfoo:~$ gksu /usr/sbin/gdmsetup
（或者使用桌面菜单：系统＞系统管理＞登录窗口）
点“安全”选项页，选择“允许本地管理员登录”。
注：这一步依赖上一步
不输入密码直接登录
在论坛上也看见有人抱怨，家中的Ubuntu不能像Window$那样──不用输入密码就能登录。其实同样能做到：
就在上一步的“安全”选项页中，勾选：
“启用自动登录”，“用户”选择（如：“me”）;
注意：公共用的计算机千万不能这么设置！
SSH登录远程服务器
如果远程服务器只允许root用户SSH到服务器时，在Ubuntu下，必须“su 到root”用户才能登录成功(具体是看服务器端的配置)。
首先，复制密钥到“/root/.ssh/”目录，
me@tipfoo:~$ su</p>
<p>Password:</p>
<p>root@tipfoo:/home/me# chmod 600 -R /root/.ssh/</p>
<p>root@tipfoo:/home/me# ssh -p 27482 11.22.33.44</p>
<p>Enter passphrase for key ‘/root/.ssh/id_rsa’:</p>
<p>Last login: Thu Jun 21 14:29:00 2007 from 11.22.33.45</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/04/linux-ubuntu-open-root-user/" class="archive-article-date">
  	<time datetime="2012-07-04T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/root/">root</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-java-http-download" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/04/java-http-download/">java实现http文件下载</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>许多用户可能会遇到这样的情况：在网站上发现一个很好的资源，但是这个资源是分成
了很多个文件存放的，如果想把它保存到本地，只有靠用户点击另存来完成保存，如果资源
分了几百甚至上千上万，那简直是个灾难。
　　在Internet上很多的资源分成多个文件存放时，它的文件命名是有一定的规则的；正因
如此，我们就可以用程序来完成这个资源的完全下载。
　　1. 基础知识
　　在Internet上，我们要下载网站上的某个资源，我们会获得一个URL（Uniform Resource
Locator），它是一个服务器资源定位的描述，下载的过程总是如下步骤:
　　步骤1:客户端发起连接请求一个URL
　　步骤2:服务器解析URL，并将指定的资源返回一个输入流给客户
　　步骤3:客户端接收输入流，将流中的内容存到文件
　　2. 网络连接的建立
　　Java提供了对URL访问和大量的流操作的的API，我们可以很容易的完成对网络上资源的
存取,下面的代码段就完成了对一个网站的资源进行访问:</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">destUrl</span>=<span class="string">"http://www.ebook.com/java/网络编程001.zip"</span><span class="comment">;</span></div><div class="line"><span class="attribute">url</span> = new URL(destUrl)<span class="comment">;</span></div><div class="line"><span class="attribute">httpUrl</span> = (HttpURLConnection) url.openConnection()<span class="comment">;</span></div><div class="line">//连接指定的网络资源</div><div class="line">httpUrl.connect()<span class="comment">;</span></div><div class="line">//获取网络输入流</div><div class="line"><span class="attribute">bis</span> = new BufferedInputStream(httpUrl.getInputStream())<span class="comment">;</span></div></pre></td></tr></table></figure>
<ol start="3">
<li>代理的访问
　　Java 中通过代理服务器访问外网的方法已经是世人皆知的秘密了。这里就不再多描述了
，访问的JAVA代码如下:</li>
</ol>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//设置代理服务器</span></div><div class="line"><span class="keyword">System</span>.getProperties().<span class="keyword">put</span>(<span class="string">"proxySet"</span>, <span class="string">"true"</span>);</div><div class="line"><span class="keyword">System</span>.getProperties().<span class="keyword">put</span>(<span class="string">"proxyHost"</span>, <span class="string">"10.154.134.110"</span>);</div><div class="line"><span class="keyword">System</span>.getProperties().<span class="keyword">put</span>(<span class="string">"proxyPort"</span>, <span class="string">"8080"</span>);</div></pre></td></tr></table></figure>
<ol start="4">
<li>网络资源的保存
　　在上节中，我们已经获取了指定网络资源的输入流，接下来我们要完成的就是读取输入
流中的所以内容，并将其保存在文件中。示例代码:</li>
</ol>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">fos = <span class="keyword">new</span> FileOutputStream(fileName);</div><div class="line"><span class="built_in">if</span> (<span class="keyword">this</span>.DEBUG)</div><div class="line">System.out.<span class="built_in">println</span>(<span class="string">"正在获取链接["</span> + destUrl + <span class="string">"]的内容.../n将其保存为文件["</span> +</div><div class="line">fileName +<span class="string">"]"</span>);</div><div class="line"><span class="comment">//保存文件</span></div><div class="line"><span class="built_in">while</span> ( (<span class="built_in">size</span> = bis.<span class="built_in">read</span>(buf)) != <span class="number">-1</span>)</div><div class="line">fos.<span class="built_in">write</span>(buf, <span class="number">0</span>, <span class="built_in">size</span>);</div></pre></td></tr></table></figure>
<p>上面的示例代码就将网络资源的内容保存到了本地指定的文件中。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.*;</div><div class="line"><span class="keyword">import</span> java.net.*;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * ＜p＞Description: 将指定的HTTP网络资源在本地以文件形式存放＜/p＞</div><div class="line"> **/</div><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> SaveFile &#123;</div><div class="line">	<span class="keyword">public</span> final <span class="keyword">static</span> <span class="keyword">boolean</span> DEBUG = true; <span class="comment">// 调试用</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> BUFFER_SIZE = <span class="number">8096</span>; <span class="comment">// 缓冲区大小</span></div><div class="line">	<span class="keyword">private</span> Vector vDownLoad = <span class="keyword">new</span> Vector(); <span class="comment">// URL列表</span></div><div class="line">	<span class="keyword">private</span> Vector vFileList = <span class="keyword">new</span> Vector(); <span class="comment">// 下载后的保存文件名列表</span></div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 　* 构造方法 　</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> SaveFile() &#123;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 　* 清除下载列表 　</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> resetList() &#123;</div><div class="line">		vDownLoad.<span class="built_in">clear</span>();</div><div class="line">		vFileList.<span class="built_in">clear</span>();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 　* 增加下载列表项 　* 　* @param url String 　* @param filename String 　</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> addItem(<span class="keyword">String</span> url, <span class="keyword">String</span> filename) &#123;</div><div class="line">		vDownLoad.add(url);</div><div class="line">		vFileList.add(filename);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 　* 根据列表下载资源 　</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> downLoadByList() &#123;</div><div class="line">		<span class="keyword">String</span> url = null;</div><div class="line">		<span class="keyword">String</span> filename = null;</div><div class="line">		<span class="comment">// 按列表顺序保存资源</span></div><div class="line">		<span class="built_in">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; vDownLoad.<span class="built_in">size</span>(); i++) &#123;</div><div class="line">			url = (<span class="keyword">String</span>) vDownLoad.<span class="built_in">get</span>(i);</div><div class="line">			filename = (<span class="keyword">String</span>) vFileList.<span class="built_in">get</span>(i);</div><div class="line">			<span class="built_in">try</span> &#123;</div><div class="line">				saveToFile(url, filename);</div><div class="line">			&#125; <span class="built_in">catch</span> (IOException err) &#123;</div><div class="line">				<span class="built_in">if</span> (DEBUG) &#123;</div><div class="line">					System.out.<span class="built_in">println</span>(<span class="string">"资源["</span> + url + <span class="string">"]下载失败!!!"</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="built_in">if</span> (DEBUG) &#123;</div><div class="line">			System.out.<span class="built_in">println</span>(<span class="string">"下载完成!!!"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 将HTTP资源另存为文件</div><div class="line">	 * </div><div class="line">	 * @param destUrl</div><div class="line">	 *            String</div><div class="line">	 * @param fileName</div><div class="line">	 *            String</div><div class="line">	 * @throws Exception</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> saveToFile(<span class="keyword">String</span> destUrl, <span class="keyword">String</span> fileName) throws IOException &#123;</div><div class="line">		FileOutputStream fos = null;</div><div class="line">		BufferedInputStream bis = null;</div><div class="line">		HttpURLConnection httpUrl = null;</div><div class="line">		URL url = null;</div><div class="line">		<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[BUFFER_SIZE];</div><div class="line">		<span class="keyword">int</span> <span class="built_in">size</span> = <span class="number">0</span>;</div><div class="line">		<span class="comment">// 建立链接</span></div><div class="line">		url = <span class="keyword">new</span> URL(destUrl);</div><div class="line">		httpUrl = (HttpURLConnection) url.openConnection();</div><div class="line">		<span class="comment">// 连接指定的资源</span></div><div class="line">		httpUrl.<span class="built_in">connect</span>();</div><div class="line">		<span class="comment">// 获取网络输入流</span></div><div class="line">		bis = <span class="keyword">new</span> BufferedInputStream(httpUrl.getInputStream());</div><div class="line">		<span class="comment">// 建立文件</span></div><div class="line">		fos = <span class="keyword">new</span> FileOutputStream(fileName);</div><div class="line">		<span class="built_in">if</span> (<span class="keyword">this</span>.DEBUG)</div><div class="line">			System.out.<span class="built_in">println</span>(<span class="string">"正在获取链接["</span> + destUrl + <span class="string">"]的内容.../n将其保存为文件["</span></div><div class="line">					+ fileName + <span class="string">"]"</span>);</div><div class="line">		<span class="comment">// 保存文件</span></div><div class="line">		<span class="built_in">while</span> ((<span class="built_in">size</span> = bis.<span class="built_in">read</span>(buf)) != <span class="number">-1</span>)</div><div class="line">			fos.<span class="built_in">write</span>(buf, <span class="number">0</span>, <span class="built_in">size</span>);</div><div class="line">		fos.<span class="built_in">close</span>();</div><div class="line">		bis.<span class="built_in">close</span>();</div><div class="line">		httpUrl.<span class="built_in">disconnect</span>();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 将HTTP资源另存为文件</div><div class="line">	 * </div><div class="line">	 * @param destUrl</div><div class="line">	 *            String</div><div class="line">	 * @param fileName</div><div class="line">	 *            String</div><div class="line">	 * @throws Exception</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> saveToFile2(<span class="keyword">String</span> destUrl, <span class="keyword">String</span> fileName) throws IOException &#123;</div><div class="line">		FileOutputStream fos = null;</div><div class="line">		BufferedInputStream bis = null;</div><div class="line">		HttpURLConnection httpUrl = null;</div><div class="line">		URL url = null;</div><div class="line">		<span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[BUFFER_SIZE];</div><div class="line">		<span class="keyword">int</span> <span class="built_in">size</span> = <span class="number">0</span>;</div><div class="line">		<span class="comment">// 建立链接</span></div><div class="line">		url = <span class="keyword">new</span> URL(destUrl);</div><div class="line">		httpUrl = (HttpURLConnection) url.openConnection();</div><div class="line">		<span class="comment">// String authString = "username" + ":" + "password";</span></div><div class="line">		<span class="keyword">String</span> authString = <span class="string">"50301"</span> + <span class="string">":"</span> + <span class="string">"88888888"</span>;</div><div class="line">		<span class="keyword">String</span> auth = <span class="string">"Basic "</span></div><div class="line">				+ <span class="keyword">new</span> sun.misc.BASE64Encoder().encode(authString.getBytes());</div><div class="line">		httpUrl.setRequestProperty(<span class="string">"Proxy-Authorization"</span>, auth);</div><div class="line">		<span class="comment">// 连接指定的资源</span></div><div class="line">		httpUrl.<span class="built_in">connect</span>();</div><div class="line">		<span class="comment">// 获取网络输入流</span></div><div class="line">		bis = <span class="keyword">new</span> BufferedInputStream(httpUrl.getInputStream());</div><div class="line">		<span class="comment">// 建立文件</span></div><div class="line">		fos = <span class="keyword">new</span> FileOutputStream(fileName);</div><div class="line">		<span class="built_in">if</span> (<span class="keyword">this</span>.DEBUG)</div><div class="line">			System.out.<span class="built_in">println</span>(<span class="string">"正在获取链接["</span> + destUrl + <span class="string">"]的内容.../n将其保存为文件["</span></div><div class="line">					+ fileName + <span class="string">"]"</span>);</div><div class="line">		<span class="comment">// 保存文件</span></div><div class="line">		<span class="built_in">while</span> ((<span class="built_in">size</span> = bis.<span class="built_in">read</span>(buf)) != <span class="number">-1</span>)</div><div class="line">			fos.<span class="built_in">write</span>(buf, <span class="number">0</span>, <span class="built_in">size</span>);</div><div class="line">		fos.<span class="built_in">close</span>();</div><div class="line">		bis.<span class="built_in">close</span>();</div><div class="line">		httpUrl.<span class="built_in">disconnect</span>();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 设置代理服务器</div><div class="line">	 * </div><div class="line">	 * @param proxy</div><div class="line">	 *            String</div><div class="line">	 * @param proxyPort</div><div class="line">	 *            String</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> setProxyServer(<span class="keyword">String</span> proxy, <span class="keyword">String</span> proxyPort) &#123;</div><div class="line">		<span class="comment">// 设置代理服务器</span></div><div class="line">		System.getProperties().<span class="built_in">put</span>(<span class="string">"proxySet"</span>, <span class="string">"true"</span>);</div><div class="line">		System.getProperties().<span class="built_in">put</span>(<span class="string">"proxyHost"</span>, proxy);</div><div class="line">		System.getProperties().<span class="built_in">put</span>(<span class="string">"proxyPort"</span>, proxyPort);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> setAuthenticator(<span class="keyword">String</span> uid, <span class="keyword">String</span> pwd) &#123;</div><div class="line">		Authenticator.setDefault(<span class="keyword">new</span> MyAuthenticator());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 主方法(用于测试)</div><div class="line">	 * </div><div class="line">	 * @param argv</div><div class="line">	 *            String[]</div><div class="line">	 */</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="keyword">String</span> argv[]) &#123;</div><div class="line">		HttpGet oInstance = <span class="keyword">new</span> HttpGet();</div><div class="line">		<span class="built_in">try</span> &#123;</div><div class="line">			<span class="comment">// //增加下载列表（此处用户可以写入自己代码来增加下载列表）</span></div><div class="line">			<span class="comment">// oInstance.addItem("http://www.ebook.com/java/网络编程001.zip","./网络编程1.zip");//</span></div><div class="line">			<span class="comment">// oInstance.addItem("http://www.ebook.com/java/网络编程002.zip","./网络编程2.zip");</span></div><div class="line">			<span class="comment">// oInstance.addItem("http://www.ebook.com/java/网络编程003.zip","./网络编程3.zip");</span></div><div class="line">			<span class="comment">// //开始下载</span></div><div class="line">			<span class="comment">// oInstance.downLoadByList();</span></div><div class="line">			oInstance.saveToFile(<span class="string">"http://www.ebook.com/java/网络编程001.zip"</span>,</div><div class="line">					<span class="string">"./down.zip"</span>);</div><div class="line">		&#125; <span class="built_in">catch</span> (Exception err) &#123;</div><div class="line">			System.out.<span class="built_in">println</span>(err.getMessage());</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/04/java-http-download/" class="archive-article-date">
  	<time datetime="2012-07-04T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/java/">java</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-linux-nano-vim-vi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/04/linux-nano-vim-vi/">文本编辑器：nano vim/vi</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.Nano是一个简单的没有花梢及华丽效果的文本编辑器。Nano在做简单文本文件编辑时相当不错,可以满足一些基本操作.
直接在命令行模式下输入nano 文件名，就可以对文件进行简单的编辑。
文件编辑中常用快捷键：ctrl+X 离开nano软件，若有修改过的文件会提示是否保存；
ctrl+O 保存文件； Ctrl+W 查询字符串；
ctrl +C 说明目前光标所在处的行数和列数等信息；
ctrl+ _ 可以直接输入行号，让光标快速移到该行；
<a href="http://2.vi" target="_blank" rel="external">2.vi</a> ：vi编辑器是所有Unix及Linux系统下标准的编辑器 ，功能强大，vim可视作vi的高级版本。
1） vi可以分为三种模式：命令行模式，输入模式，末行模式。
命令行模式—&gt;输入模式： i，a，A,o，O，c，C，r，R均可从命令行切换到输入行；
i:在当前光标所在处插入； a：当前光标所在行的后面插入； A：当前光标所在行行尾插入；
o:在当前光标所在处的下一行插入新的一行； O:在当前光标所在处的上一行插入新的一行；
c:先删除在载入新的一行； C:删除光标所在一行在插入；
r:替换光标所在那一个字符一次； R:一直替换光标所在处的文字；
输入模式—&gt;命令行模式：Esc
命令行模式—&gt;末行模式：：
末行模式-—&gt;命令行模式：Esc
2） 光标移动： h(&lt;—) 左移光标一个字符 ；
l（—&gt;） 右移光标一个字符 ；
k(↑) 光标上移一行 ;
j (↓) 光标下移一行
「ctrl」+「b」：屏幕往”后”移动一页。
「ctrl」+「f」：屏幕往”前”移动一页。
「ctrl」+「u」：屏幕往”后”移动半页。
「ctrl」+「d」：屏幕往”前”移动半页
3)行内移动：^ 移动到非空白行的行首
0 绝对位置的行首
$移动到行尾
4）以单词为单位移动：
w：一次移动一个单词，到下一个单词的词尾
b：移到当前单词词首（向回跳）
e：跳到词尾
5）行间移动：
n(数字）G ：n数值为几，就移到这个文件的第几行；当n=1时，相当于gg的功能，移到该文件的第一行；
G：移到这个文件的最后一行；
6）删除命令：
x：向后删除一个字符，使用del键同样功能；
X:向后删除一个字符；
nx：连续向后删除n个字符；
dd：删除光标所在的那一整行；
ndd：删除光标所在的向下n行；
d1G：删除光标所在到第一行的所有数据；
dG：删除从光标所在到最后易方达额所有数据；
7）复制，粘贴
yy：复制光标所在的那一整行；
nyy：复制光标所在的向下n行；
y0：复制光标所在的那一个字符到该行行首的所有数据；
y$:复制光标所在的那一个字符到该行行尾的所有数据；
p：将已经复制的数据在光标的下一行粘贴；
P：粘在光标的上一行；
8）查找，替换
/word:向下查找一个名称为word的字符串；
？word：向上查找一个名称为word的字符串；
：n1，n2 s/word1/word2/g ：在n1与n2行之间寻找一个word1的字符串，并将其替换为word2
：1，$ s/word1/word2/g:从第一行到最后一行查找word1字符串，并将其替换为word2
9）文件的保存与退出：
w：在冒号输入字母「w」就可以将文件保存起来；
q：退出；
q!:强制退出；
wq ：保存退出；
wq！：强制保存退出
10）显示行号：在末行模式输入：set nu
取消行号：在末行模式输入：set nonu</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/04/linux-nano-vim-vi/" class="archive-article-date">
  	<time datetime="2012-07-04T09:30:33.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-04</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nano/">nano</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vi/">vi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vim/">vim</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/linux/">linux</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-it-beauty-code" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/07/02/it-beauty-code/">一段惊艳的代码</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight scilab"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">with(m=Math)C=<span class="built_in">cos</span>,S=<span class="built_in">sin</span>,P=pow,R=random;c.width=c.height=f=<span class="number">500</span>;h=<span class="number">-250</span>;<span class="function"><span class="keyword">function</span> <span class="title">p</span><span class="params">(a,b,c)</span>&#123;<span class="title">if</span><span class="params">(c&gt;60)</span><span class="title">return</span>[<span class="title">S</span><span class="params">(a*7)</span>*<span class="params">(13+5/(.2+P(b*4,4)</span>))-<span class="title">S</span><span class="params">(b)</span>*50,<span class="title">b</span>*<span class="title">f</span>+50,625+<span class="title">C</span><span class="params">(a*7)</span>*<span class="params">(13+5/(.2+P(b*4,4)</span>))+<span class="title">b</span>*400,<span class="title">a</span>*1-<span class="title">b</span>/2,<span class="title">a</span>];<span class="title">A</span>=<span class="title">a</span>*2-1;<span class="title">B</span>=<span class="title">b</span>*2-1;<span class="title">if</span><span class="params">(A*A+B*B&lt;1)</span>&#123;<span class="title">if</span><span class="params">(c&gt;37)</span>&#123;<span class="title">n</span>=<span class="params">(j=c&amp;1)</span>?6:4;<span class="title">o</span>=.5/<span class="params">(a+.01)</span>+<span class="title">C</span><span class="params">(b*125)</span>*3-<span class="title">a</span>*300;<span class="title">w</span>=<span class="title">b</span>*<span class="title">h</span>;<span class="title">return</span>[<span class="title">o</span>*<span class="title">C</span><span class="params">(n)</span>+<span class="title">w</span>*<span class="title">S</span><span class="params">(n)</span>+<span class="title">j</span>*610-390,<span class="title">o</span>*<span class="title">S</span><span class="params">(n)</span>-<span class="title">w</span>*<span class="title">C</span><span class="params">(n)</span>+550-<span class="title">j</span>*350,1180+<span class="title">C</span><span class="params">(B+A)</span>*99-<span class="title">j</span>*300,.4-<span class="title">a</span>*.1+<span class="title">P</span><span class="params">(1-B*B,-h*6)</span>*.15-<span class="title">a</span>*<span class="title">b</span>*.4+<span class="title">C</span><span class="params">(a+b)</span>/5+<span class="title">P</span><span class="params">(C((o*(a+1)</span>+<span class="params">(B&gt;0?w:-w)</span>)/25),30)*.1*<span class="params">(1-B*B)</span>,<span class="title">o</span>/1<span class="title">e3</span>+.7-<span class="title">o</span>*<span class="title">w</span>*3<span class="title">e</span>-6]&#125;<span class="title">if</span><span class="params">(c&gt;32)</span>&#123;<span class="title">c</span>=<span class="title">c</span>*1.16-.15;<span class="title">o</span>=<span class="title">a</span>*45-20;<span class="title">w</span>=<span class="title">b</span>*<span class="title">b</span>*<span class="title">h</span>;<span class="title">z</span>=<span class="title">o</span>*<span class="title">S</span><span class="params">(c)</span>+<span class="title">w</span>*<span class="title">C</span><span class="params">(c)</span>+620;<span class="title">return</span>[<span class="title">o</span>*<span class="title">C</span><span class="params">(c)</span>-<span class="title">w</span>*<span class="title">S</span><span class="params">(c)</span>,28+<span class="title">C</span><span class="params">(B*.5)</span>*99-<span class="title">b</span>*<span class="title">b</span>*<span class="title">b</span>*60-<span class="title">z</span>/2-<span class="title">h</span>,<span class="title">z</span>,<span class="params">(b*b*.3+P((1-(A*A)</span>),7)*.15+.3)*<span class="title">b</span>,<span class="title">b</span>*.7]&#125;<span class="title">o</span>=<span class="title">A</span>*<span class="params">(2-b)</span>*<span class="params">(80-c*2)</span>;<span class="title">w</span>=99-<span class="title">C</span><span class="params">(A)</span>*120-<span class="title">C</span><span class="params">(b)</span>*<span class="params">(-h-c*4.9)</span>+<span class="title">C</span><span class="params">(P(1-b,7)</span>)*50+<span class="title">c</span>*2;<span class="title">z</span>=<span class="title">o</span>*<span class="title">S</span><span class="params">(c)</span>+<span class="title">w</span>*<span class="title">C</span><span class="params">(c)</span>+700;<span class="title">return</span>[<span class="title">o</span>*<span class="title">C</span><span class="params">(c)</span>-<span class="title">w</span>*<span class="title">S</span><span class="params">(c)</span>,<span class="title">B</span>*99-<span class="title">C</span><span class="params">(P(b, 7)</span>)*50-<span class="title">c</span>/3-<span class="title">z</span>/1.35+450,<span class="title">z</span>,<span class="params">(1-b/1.2)</span>*.9+<span class="title">a</span>*.1, <span class="title">P</span><span class="params">((1-b)</span>,20)/4+.05]&#125;&#125;<span class="title">setInterval</span><span class="params">('for(i=0;i&lt;1e4;i++)</span><span class="title">if</span><span class="params">(s=p(R()</span>,<span class="title">R</span><span class="params">()</span>,<span class="title">i</span>%46/.74))&#123;<span class="title">z</span>=<span class="title">s</span>[2];<span class="title">x</span>=~~<span class="params">(s[0]*f/z-h)</span>;<span class="title">y</span>=~~<span class="params">(s[1]*f/z-h)</span>;<span class="title">if</span><span class="params">(!m[q=y*f+x]|m[q]&gt;z)</span><span class="title">m</span>[<span class="title">q</span>]=<span class="title">z</span>,<span class="title">a</span>.<span class="title">fillStyle</span>="<span class="title">rgb</span><span class="params">("+~(s[3]*h)</span>+","+~<span class="params">(s[4]*h)</span>+","+~<span class="params">(s[3]*s[3]*-80)</span>+")",<span class="title">a</span>.<span class="title">fillRect</span><span class="params">(x,y,1,1)</span>&#125;',0)</span></div></pre></td></tr></table></figure>
<p>上面这段JavaScript代码一共有1018个字符，每个字符占一个字节，一共1018B，约等于1K。这1K大小的js能做什么，点一下这面这个按钮就知道了（需要使用最新版的谷歌浏览器、IE9或火狐浏览器等支持html5的浏览器才能看到效果）。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/07/02/it-beauty-code/" class="archive-article-date">
  	<time datetime="2012-07-02T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-07-02</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/web前端/">web前端</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-php-zip" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/06/30/php-zip/">php在线解压工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>部分空间不支持在线解压，造成ftp上传文件量大的文件夹很慢，于是网上找到了一个不错的php在线解压工具，本地xampp环境下测试通过，收藏备用。所有代码均为转载，版权归原作者。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?php</span></span></div><div class="line"></div><div class="line"><span class="comment">//设定密码</span></div><div class="line">$password = <span class="string">"bianle"</span>;</div><div class="line"></div><div class="line"><span class="meta">?&gt;</span></div><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">profile</span>=<span class="string">"http://gmpg.org/xfn/11"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Language"</span> <span class="attr">content</span>=<span class="string">"zh-CN"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>在线解压ZIP - PhpUnZip<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">    &lt;!<span class="selector-tag">--</span></div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">		<span class="attribute">margin</span>:<span class="number">0</span>;</div><div class="line">		<span class="attribute">padding</span>:<span class="number">0</span>;</div><div class="line">		<span class="attribute">background</span>:<span class="number">#ccc</span>;</div><div class="line">		<span class="attribute">font</span>:<span class="number">14px</span>/<span class="number">24px</span> <span class="string">"Microsoft Yahei"</span>,Verdana, Geneva, sans-serif</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#wrapper</span> &#123;</div><div class="line">		<span class="attribute">width</span>:<span class="number">760px</span>;</div><div class="line">		<span class="attribute">margin</span>:<span class="number">0</span> auto;</div><div class="line">		<span class="attribute">margin-top</span>:<span class="number">10px</span>;</div><div class="line">		<span class="attribute">background</span>:<span class="number">#fff</span>;</div><div class="line">		<span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#888</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#header</span> &#123;</div><div class="line">		<span class="attribute">background</span>:<span class="number">#f7f7f7</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#header</span> <span class="selector-tag">h1</span> &#123;</div><div class="line">		<span class="attribute">font</span>:<span class="number">20px</span>/<span class="number">30px</span> Verdana, Geneva, sans-serif;</div><div class="line">		<span class="attribute">font-weight</span>:bold;</div><div class="line">		<span class="attribute">text-shadow</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">1px</span> <span class="number">#DDD</span>;</div><div class="line">		<span class="attribute">text-align</span>:center;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#main</span> &#123;</div><div class="line">		<span class="attribute">margin</span>:<span class="number">20px</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#footer</span> &#123;</div><div class="line">		<span class="attribute">text-align</span>:center;</div><div class="line">		<span class="attribute">font-size</span>:<span class="number">12px</span>;</div><div class="line">		<span class="attribute">color</span>:<span class="number">#666</span>;</div><div class="line">		<span class="attribute">border-top</span>:<span class="number">1px</span> solid <span class="number">#ccc</span>;</div><div class="line">		<span class="attribute">position</span>:relative;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#footer</span> <span class="selector-tag">a</span> &#123;</div><div class="line">		<span class="attribute">text-decoration</span>:none;</div><div class="line">		<span class="attribute">color</span>:<span class="number">#666</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#footer</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</div><div class="line">		<span class="attribute">text-decoration</span>:underline;</div><div class="line">	&#125;</div><div class="line">	<span class="selector-id">#eincy</span> &#123;</div><div class="line">		<span class="attribute">width</span>:<span class="number">82px</span>;</div><div class="line">		<span class="attribute">height</span>:<span class="number">36px</span>;</div><div class="line">		<span class="attribute">background</span>:<span class="built_in">url</span>(http://www.eincy.com/logo/s.png);</div><div class="line">		<span class="attribute">position</span>:absolute;</div><div class="line">		<span class="attribute">right</span>:<span class="number">3px</span>;</div><div class="line">		<span class="attribute">top</span>:<span class="number">3px</span>;</div><div class="line">	&#125;</div><div class="line">    <span class="selector-tag">--</span>&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrapper"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>PHP在线解压ZIP工具 - PHPUnZip<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"main"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"myform"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"&lt;?=$_SERVER[PHP_SELF];?&gt;"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">onSubmit</span>=<span class="string">"return check_uploadObject(this);"</span>&gt;</span></div><div class="line">            <span class="php"><span class="meta">&lt;?</span></span></div><div class="line">                <span class="keyword">if</span>(!$_REQUEST[<span class="string">"myaction"</span>]):</div><div class="line">            <span class="meta">?&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">check_uploadObject</span><span class="params">(form)</span></span>&#123;</div><div class="line">                <span class="keyword">if</span>(form.password.value==<span class="string">''</span>)&#123;</div><div class="line">                    alert(<span class="string">'请输入密码.'</span>);</div><div class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"choose"</span>&gt;</span> </div><div class="line">            选择ZIP文件:</div><div class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"zipfile"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">selected</span>&gt;</span>- 请选择 -<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">            <span class="php"><span class="meta">&lt;?</span></span></div><div class="line">                $fdir = opendir(<span class="string">'./'</span>);</div><div class="line">                <span class="keyword">while</span>($file=readdir($fdir))&#123;</div><div class="line">                    <span class="keyword">if</span>(!is_file($file)) <span class="keyword">continue</span>;</div><div class="line">                    <span class="keyword">if</span>(preg_match(<span class="string">'/\.zip$/mis'</span>,$file))&#123;</div><div class="line">                        <span class="keyword">echo</span> <span class="string">"&lt;option value='$file'&gt;$file&lt;/option&gt;\r\n"</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            <span class="meta">?&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">            或上传文件: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"upfile"</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"upfile"</span> <span class="attr">size</span>=<span class="string">"20"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"dir"</span>&gt;</span></div><div class="line">            解压到目录: <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"todir"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"todir"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">size</span>=<span class="string">"15"</span>&gt;</span> </div><div class="line">                  (留空为本目录,必须有写入权限)</div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"password"</span>&gt;</span></div><div class="line">        	验证密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">size</span>=<span class="string">"15"</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"unzip"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"myaction"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"myaction"</span> <span class="attr">value</span>=<span class="string">"dounzip"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">name</span>=<span class="string">"Submit"</span> <span class="attr">value</span>=<span class="string">" 解 压 "</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="php"><span class="meta">&lt;?</span></span></div><div class="line"></div><div class="line">		<span class="keyword">elseif</span>($_REQUEST[<span class="string">"myaction"</span>]==<span class="string">"dounzip"</span>):</div><div class="line"></div><div class="line">		<span class="class"><span class="keyword">class</span> <span class="title">zip</span></span></div><div class="line">		&#123;</div><div class="line"></div><div class="line">		 <span class="keyword">var</span> $total_files = <span class="number">0</span>;</div><div class="line">		 <span class="keyword">var</span> $total_folders = <span class="number">0</span>; </div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">Extract</span> <span class="params">( $zn, $to, $index = Array<span class="params">(<span class="number">-1</span>)</span> )</span></span></div><div class="line">		 &#123;</div><div class="line">		   $ok = <span class="number">0</span>; $zip = @fopen($zn,<span class="string">'rb'</span>);</div><div class="line">		   <span class="keyword">if</span>(!$zip) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">		   $cdir = <span class="keyword">$this</span>-&gt;ReadCentralDir($zip,$zn);</div><div class="line">		   $pos_entry = $cdir[<span class="string">'offset'</span>];</div><div class="line"></div><div class="line">		   <span class="keyword">if</span>(!is_array($index))&#123; $index = <span class="keyword">array</span>($index);  &#125;</div><div class="line">		   <span class="keyword">for</span>($i=<span class="number">0</span>; $index[$i];$i++)&#123;</div><div class="line">				<span class="keyword">if</span>(intval($index[$i])!=$index[$i]||$index[$i]&gt;$cdir[<span class="string">'entries'</span>])</div><div class="line">				<span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">		   &#125;</div><div class="line">		   <span class="keyword">for</span> ($i=<span class="number">0</span>; $i&lt;$cdir[<span class="string">'entries'</span>]; $i++)</div><div class="line">		   &#123;</div><div class="line">			 @fseek($zip, $pos_entry);</div><div class="line">			 $header = <span class="keyword">$this</span>-&gt;ReadCentralFileHeaders($zip);</div><div class="line">			 $header[<span class="string">'index'</span>] = $i; $pos_entry = ftell($zip);</div><div class="line">			 @rewind($zip); fseek($zip, $header[<span class="string">'offset'</span>]);</div><div class="line">			 <span class="keyword">if</span>(in_array(<span class="string">"-1"</span>,$index)||in_array($i,$index))</div><div class="line">				$stat[$header[<span class="string">'filename'</span>]]=<span class="keyword">$this</span>-&gt;ExtractFile($header, $to, $zip);</div><div class="line">		   &#125;</div><div class="line">		   fclose($zip);</div><div class="line">		   <span class="keyword">return</span> $stat;</div><div class="line">		 &#125;</div><div class="line"></div><div class="line">		  <span class="function"><span class="keyword">function</span> <span class="title">ReadFileHeader</span><span class="params">($zip)</span></span></div><div class="line">		  &#123;</div><div class="line">			$binary_data = fread($zip, <span class="number">30</span>);</div><div class="line">			$data = unpack(<span class="string">'vchk/vid/vversion/vflag/vcompression/vmtime/vmdate/Vcrc/Vcompressed_size/Vsize/vfilename_len/vextra_len'</span>, $binary_data);</div><div class="line"></div><div class="line">			$header[<span class="string">'filename'</span>] = fread($zip, $data[<span class="string">'filename_len'</span>]);</div><div class="line">			<span class="keyword">if</span> ($data[<span class="string">'extra_len'</span>] != <span class="number">0</span>) &#123;</div><div class="line">			  $header[<span class="string">'extra'</span>] = fread($zip, $data[<span class="string">'extra_len'</span>]);</div><div class="line">			&#125; <span class="keyword">else</span> &#123; $header[<span class="string">'extra'</span>] = <span class="string">''</span>; &#125;</div><div class="line"></div><div class="line">			$header[<span class="string">'compression'</span>] = $data[<span class="string">'compression'</span>];$header[<span class="string">'size'</span>] = $data[<span class="string">'size'</span>];</div><div class="line">			$header[<span class="string">'compressed_size'</span>] = $data[<span class="string">'compressed_size'</span>];</div><div class="line">			$header[<span class="string">'crc'</span>] = $data[<span class="string">'crc'</span>]; $header[<span class="string">'flag'</span>] = $data[<span class="string">'flag'</span>];</div><div class="line">			$header[<span class="string">'mdate'</span>] = $data[<span class="string">'mdate'</span>];$header[<span class="string">'mtime'</span>] = $data[<span class="string">'mtime'</span>];</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'mdate'</span>] &amp;&amp; $header[<span class="string">'mtime'</span>])&#123;</div><div class="line">			 $hour=($header[<span class="string">'mtime'</span>]&amp;<span class="number">0xF800</span>)&gt;&gt;<span class="number">11</span>;$minute=($header[<span class="string">'mtime'</span>]&amp;<span class="number">0x07E0</span>)&gt;&gt;<span class="number">5</span>;</div><div class="line">			 $seconde=($header[<span class="string">'mtime'</span>]&amp;<span class="number">0x001F</span>)*<span class="number">2</span>;$year=(($header[<span class="string">'mdate'</span>]&amp;<span class="number">0xFE00</span>)&gt;&gt;<span class="number">9</span>)+<span class="number">1980</span>;</div><div class="line">			 $month=($header[<span class="string">'mdate'</span>]&amp;<span class="number">0x01E0</span>)&gt;&gt;<span class="number">5</span>;$day=$header[<span class="string">'mdate'</span>]&amp;<span class="number">0x001F</span>;</div><div class="line">			 $header[<span class="string">'mtime'</span>] = mktime($hour, $minute, $seconde, $month, $day, $year);</div><div class="line">			&#125;<span class="keyword">else</span>&#123;$header[<span class="string">'mtime'</span>] = time();&#125;</div><div class="line"></div><div class="line">			$header[<span class="string">'stored_filename'</span>] = $header[<span class="string">'filename'</span>];</div><div class="line">			$header[<span class="string">'status'</span>] = <span class="string">"ok"</span>;</div><div class="line">			<span class="keyword">return</span> $header;</div><div class="line">		  &#125;</div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">ReadCentralFileHeaders</span><span class="params">($zip)</span></span>&#123;</div><div class="line">			$binary_data = fread($zip, <span class="number">46</span>);</div><div class="line">			$header = unpack(<span class="string">'vchkid/vid/vversion/vversion_extracted/vflag/vcompression/vmtime/vmdate/Vcrc/Vcompressed_size/Vsize/vfilename_len/vextra_len/vcomment_len/vdisk/vinternal/Vexternal/Voffset'</span>, $binary_data);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'filename_len'</span>] != <span class="number">0</span>)</div><div class="line">			  $header[<span class="string">'filename'</span>] = fread($zip,$header[<span class="string">'filename_len'</span>]);</div><div class="line">			<span class="keyword">else</span> $header[<span class="string">'filename'</span>] = <span class="string">''</span>;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'extra_len'</span>] != <span class="number">0</span>)</div><div class="line">			  $header[<span class="string">'extra'</span>] = fread($zip, $header[<span class="string">'extra_len'</span>]);</div><div class="line">			<span class="keyword">else</span> $header[<span class="string">'extra'</span>] = <span class="string">''</span>;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'comment_len'</span>] != <span class="number">0</span>)</div><div class="line">			  $header[<span class="string">'comment'</span>] = fread($zip, $header[<span class="string">'comment_len'</span>]);</div><div class="line">			<span class="keyword">else</span> $header[<span class="string">'comment'</span>] = <span class="string">''</span>;</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($header[<span class="string">'mdate'</span>] &amp;&amp; $header[<span class="string">'mtime'</span>])</div><div class="line">			&#123;</div><div class="line">			  $hour = ($header[<span class="string">'mtime'</span>] &amp; <span class="number">0xF800</span>) &gt;&gt; <span class="number">11</span>;</div><div class="line">			  $minute = ($header[<span class="string">'mtime'</span>] &amp; <span class="number">0x07E0</span>) &gt;&gt; <span class="number">5</span>;</div><div class="line">			  $seconde = ($header[<span class="string">'mtime'</span>] &amp; <span class="number">0x001F</span>)*<span class="number">2</span>;</div><div class="line">			  $year = (($header[<span class="string">'mdate'</span>] &amp; <span class="number">0xFE00</span>) &gt;&gt; <span class="number">9</span>) + <span class="number">1980</span>;</div><div class="line">			  $month = ($header[<span class="string">'mdate'</span>] &amp; <span class="number">0x01E0</span>) &gt;&gt; <span class="number">5</span>;</div><div class="line">			  $day = $header[<span class="string">'mdate'</span>] &amp; <span class="number">0x001F</span>;</div><div class="line">			  $header[<span class="string">'mtime'</span>] = mktime($hour, $minute, $seconde, $month, $day, $year);</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">			  $header[<span class="string">'mtime'</span>] = time();</div><div class="line">			&#125;</div><div class="line">			$header[<span class="string">'stored_filename'</span>] = $header[<span class="string">'filename'</span>];</div><div class="line">			$header[<span class="string">'status'</span>] = <span class="string">'ok'</span>;</div><div class="line">			<span class="keyword">if</span> (substr($header[<span class="string">'filename'</span>], <span class="number">-1</span>) == <span class="string">'/'</span>)</div><div class="line">			  $header[<span class="string">'external'</span>] = <span class="number">0x41FF0010</span>;</div><div class="line">			<span class="keyword">return</span> $header;</div><div class="line">		 &#125;</div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">ReadCentralDir</span><span class="params">($zip,$zip_name)</span></span>&#123;</div><div class="line">			$size = filesize($zip_name);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($size &lt; <span class="number">277</span>) $maximum_size = $size;</div><div class="line">			<span class="keyword">else</span> $maximum_size=<span class="number">277</span>;</div><div class="line"></div><div class="line">			@fseek($zip, $size-$maximum_size);</div><div class="line">			$pos = ftell($zip); $bytes = <span class="number">0x00000000</span>;</div><div class="line"></div><div class="line">			<span class="keyword">while</span> ($pos &lt; $size)&#123;</div><div class="line">				$byte = @fread($zip, <span class="number">1</span>); $bytes=($bytes &lt;&lt; <span class="number">8</span>) | ord($byte);</div><div class="line">				<span class="keyword">if</span> ($bytes == <span class="number">0x504b0506</span> <span class="keyword">or</span> $bytes == <span class="number">0x2e706870504b0506</span>)&#123; $pos++;<span class="keyword">break</span>;&#125; $pos++;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			$fdata=fread($zip,<span class="number">18</span>);</div><div class="line"></div><div class="line">			$data=@unpack(<span class="string">'vdisk/vdisk_start/vdisk_entries/ventries/Vsize/Voffset/vcomment_size'</span>,$fdata);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($data[<span class="string">'comment_size'</span>] != <span class="number">0</span>) $centd[<span class="string">'comment'</span>] = fread($zip, $data[<span class="string">'comment_size'</span>]);</div><div class="line">			<span class="keyword">else</span> $centd[<span class="string">'comment'</span>] = <span class="string">''</span>; $centd[<span class="string">'entries'</span>] = $data[<span class="string">'entries'</span>];</div><div class="line">			$centd[<span class="string">'disk_entries'</span>] = $data[<span class="string">'disk_entries'</span>];</div><div class="line">			$centd[<span class="string">'offset'</span>] = $data[<span class="string">'offset'</span>];$centd[<span class="string">'disk_start'</span>] = $data[<span class="string">'disk_start'</span>];</div><div class="line">			$centd[<span class="string">'size'</span>] = $data[<span class="string">'size'</span>];  $centd[<span class="string">'disk'</span>] = $data[<span class="string">'disk'</span>];</div><div class="line">			<span class="keyword">return</span> $centd;</div><div class="line">		  &#125;</div><div class="line"></div><div class="line">		 <span class="function"><span class="keyword">function</span> <span class="title">ExtractFile</span><span class="params">($header,$to,$zip)</span></span>&#123;</div><div class="line">			$header = <span class="keyword">$this</span>-&gt;readfileheader($zip);</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(substr($to,<span class="number">-1</span>)!=<span class="string">"/"</span>) $to.=<span class="string">"/"</span>;</div><div class="line">			<span class="keyword">if</span>($to==<span class="string">'./'</span>) $to = <span class="string">''</span>;	</div><div class="line">			$pth = explode(<span class="string">"/"</span>,$to.$header[<span class="string">'filename'</span>]);</div><div class="line">			$mydir = <span class="string">''</span>;</div><div class="line">			<span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;count($pth)<span class="number">-1</span>;$i++)&#123;</div><div class="line">				<span class="keyword">if</span>(!$pth[$i]) <span class="keyword">continue</span>;</div><div class="line">				$mydir .= $pth[$i].<span class="string">"/"</span>;</div><div class="line">				<span class="keyword">if</span>((!is_dir($mydir) &amp;&amp; @mkdir($mydir,<span class="number">0777</span>)) || (($mydir==$to.$header[<span class="string">'filename'</span>] || ($mydir==$to &amp;&amp; <span class="keyword">$this</span>-&gt;total_folders==<span class="number">0</span>)) &amp;&amp; is_dir($mydir)) )&#123;</div><div class="line">					@chmod($mydir,<span class="number">0777</span>);</div><div class="line">					<span class="keyword">$this</span>-&gt;total_folders ++;</div><div class="line">					<span class="keyword">echo</span> <span class="string">"&lt;br /&gt;&lt;input name='dfile[]' type='checkbox' value='$mydir' checked&gt; &lt;a href='$mydir' target='_blank'&gt;目录: $mydir&lt;/a&gt;</span></div><div class="line">		";</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(strrchr($header[<span class="string">'filename'</span>],<span class="string">'/'</span>)==<span class="string">'/'</span>) <span class="keyword">return</span>;	</div><div class="line"></div><div class="line">			<span class="keyword">if</span> (!($header[<span class="string">'external'</span>]==<span class="number">0x41FF0010</span>)&amp;&amp;!($header[<span class="string">'external'</span>]==<span class="number">16</span>))&#123;</div><div class="line">				<span class="keyword">if</span> ($header[<span class="string">'compression'</span>]==<span class="number">0</span>)&#123;</div><div class="line">					$fp = @fopen($to.$header[<span class="string">'filename'</span>], <span class="string">'wb'</span>);</div><div class="line">					<span class="keyword">if</span>(!$fp) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">					$size = $header[<span class="string">'compressed_size'</span>];</div><div class="line"></div><div class="line">					<span class="keyword">while</span> ($size != <span class="number">0</span>)&#123;</div><div class="line">						$read_size = ($size &lt; <span class="number">2048</span> ? $size : <span class="number">2048</span>);</div><div class="line">						$buffer = fread($zip, $read_size);</div><div class="line">						$binary_data = pack(<span class="string">'a'</span>.$read_size, $buffer);</div><div class="line">						@fwrite($fp, $binary_data, $read_size);</div><div class="line">						$size -= $read_size;</div><div class="line">					&#125;</div><div class="line">					fclose($fp);</div><div class="line">					touch($to.$header[<span class="string">'filename'</span>], $header[<span class="string">'mtime'</span>]);</div><div class="line">				&#125;<span class="keyword">else</span>&#123;</div><div class="line">					$fp = @fopen($to.$header[<span class="string">'filename'</span>].<span class="string">'.gz'</span>,<span class="string">'wb'</span>);</div><div class="line">					<span class="keyword">if</span>(!$fp) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">					$binary_data = pack(<span class="string">'va1a1Va1a1'</span>, <span class="number">0x8b1f</span>, Chr($header[<span class="string">'compression'</span>]),</div><div class="line">					Chr(<span class="number">0x00</span>), time(), Chr(<span class="number">0x00</span>), Chr(<span class="number">3</span>));</div><div class="line"></div><div class="line">					fwrite($fp, $binary_data, <span class="number">10</span>);</div><div class="line">					$size = $header[<span class="string">'compressed_size'</span>];</div><div class="line"></div><div class="line">					<span class="keyword">while</span> ($size != <span class="number">0</span>)&#123;</div><div class="line">						$read_size = ($size &lt; <span class="number">1024</span> ? $size : <span class="number">1024</span>);</div><div class="line">						$buffer = fread($zip, $read_size);</div><div class="line">						$binary_data = pack(<span class="string">'a'</span>.$read_size, $buffer);</div><div class="line">						@fwrite($fp, $binary_data, $read_size);</div><div class="line">						$size -= $read_size;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">					$binary_data = pack(<span class="string">'VV'</span>, $header[<span class="string">'crc'</span>], $header[<span class="string">'size'</span>]);</div><div class="line">					fwrite($fp, $binary_data,<span class="number">8</span>); fclose($fp);</div><div class="line"></div><div class="line">					$gzp = @gzopen($to.$header[<span class="string">'filename'</span>].<span class="string">'.gz'</span>,<span class="string">'rb'</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">"Cette archive est compress閑"</span>);</div><div class="line">					<span class="keyword">if</span>(!$gzp) <span class="keyword">return</span>(<span class="number">-2</span>);</div><div class="line">					$fp = @fopen($to.$header[<span class="string">'filename'</span>],<span class="string">'wb'</span>);</div><div class="line">					<span class="keyword">if</span>(!$fp) <span class="keyword">return</span>(<span class="number">-1</span>);</div><div class="line">					$size = $header[<span class="string">'size'</span>];</div><div class="line"></div><div class="line">					<span class="keyword">while</span> ($size != <span class="number">0</span>)&#123;</div><div class="line">						$read_size = ($size &lt; <span class="number">2048</span> ? $size : <span class="number">2048</span>);</div><div class="line">						$buffer = gzread($gzp, $read_size);</div><div class="line">						$binary_data = pack(<span class="string">'a'</span>.$read_size, $buffer);</div><div class="line">						@fwrite($fp, $binary_data, $read_size);</div><div class="line">						$size -= $read_size;</div><div class="line">					&#125;</div><div class="line">					fclose($fp); gzclose($gzp);</div><div class="line"></div><div class="line">					touch($to.$header[<span class="string">'filename'</span>], $header[<span class="string">'mtime'</span>]);</div><div class="line">					@unlink($to.$header[<span class="string">'filename'</span>].<span class="string">'.gz'</span>);</div><div class="line"></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			<span class="keyword">$this</span>-&gt;total_files ++;</div><div class="line">			<span class="keyword">echo</span> <span class="string">"&lt;br /&gt;&lt;input name='dfile[]' type='checkbox' value='$to$header[filename]' checked&gt; &lt;a href='$to$header[filename]' target='_blank'&gt;文件: $to$header[filename]&lt;/a&gt;</span></div><div class="line">		";</div><div class="line"></div><div class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">		 &#125;</div><div class="line"></div><div class="line">		<span class="comment">// end class</span></div><div class="line">		&#125;</div><div class="line"></div><div class="line">			set_time_limit(<span class="number">0</span>);</div><div class="line"></div><div class="line">			<span class="keyword">if</span> ($_POST[<span class="string">'password'</span>] != $password) <span class="keyword">die</span>(<span class="string">"输入的密码不正确，请重新输入。"</span>);</div><div class="line">			<span class="keyword">if</span>(!$_POST[<span class="string">"todir"</span>]) $_POST[<span class="string">"todir"</span>] = <span class="string">"."</span>;</div><div class="line">			$z = <span class="keyword">new</span> Zip;</div><div class="line">			$have_zip_file = <span class="number">0</span>;</div><div class="line">			<span class="function"><span class="keyword">function</span> <span class="title">start_unzip</span><span class="params">($tmp_name,$new_name,$checked)</span></span>&#123;</div><div class="line">				<span class="keyword">global</span> $_POST,$z,$have_zip_file;</div><div class="line">				$upfile = <span class="keyword">array</span>(<span class="string">"tmp_name"</span>=&gt;$tmp_name,<span class="string">"name"</span>=&gt;$new_name);</div><div class="line">				<span class="keyword">if</span>(is_file($upfile[tmp_name]))&#123;</div><div class="line">					$have_zip_file = <span class="number">1</span>;</div><div class="line">					<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		正在解压: &lt;br /&gt;&lt;input name='dfile[]' type='checkbox' value='$upfile[name]' ".($checked?<span class="string">"checked"</span>:<span class="string">""</span>).<span class="string">"&gt; $upfile[name]</span></div><div class="line"></div><div class="line">		";</div><div class="line">					<span class="keyword">if</span>(preg_match(<span class="string">'/\.zip$/mis'</span>,$upfile[name]))&#123;</div><div class="line">						$result=$z-&gt;Extract($upfile[tmp_name],$_POST[<span class="string">"todir"</span>]);</div><div class="line">						<span class="keyword">if</span>($result==<span class="number">-1</span>)&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		文件 $upfile[name] 错误.</div><div class="line">		";</div><div class="line">						&#125;</div><div class="line">						<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		&lt;br /&gt;完成,共建立 $z-&gt;total_folders 个目录,$z-&gt;total_files 个文件.</div><div class="line"></div><div class="line">		";</div><div class="line">					&#125;<span class="keyword">else</span>&#123;</div><div class="line">						<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		$upfile[name] 不是 zip 文件.</div><div class="line"></div><div class="line">		";			</div><div class="line">					&#125;</div><div class="line">					<span class="keyword">if</span>(realpath($upfile[name])!=realpath($upfile[tmp_name]))&#123;</div><div class="line">						@unlink($upfile[name]);</div><div class="line">						rename($upfile[tmp_name],$upfile[name]);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			clearstatcache();</div><div class="line"></div><div class="line">			start_unzip($_POST[<span class="string">"zipfile"</span>],$_POST[<span class="string">"zipfile"</span>],<span class="number">0</span>);</div><div class="line">			start_unzip($_FILES[<span class="string">"upfile"</span>][tmp_name],$_FILES[<span class="string">"upfile"</span>][name],<span class="number">1</span>);</div><div class="line"></div><div class="line">			<span class="keyword">if</span>(!$have_zip_file)&#123;</div><div class="line">				<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		请选择或上传文件.</div><div class="line">		";</div><div class="line">			&#125;</div><div class="line">		<span class="meta">?&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"&lt;?=$_POST['password'];?&gt;"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"myaction"</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"myaction"</span> <span class="attr">value</span>=<span class="string">"dodelete"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"按钮"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"返回"</span> <span class="attr">onClick</span>=<span class="string">"window.location='&lt;?=$_SERVER[PHP_SELF];?&gt;';"</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'button'</span> <span class="attr">value</span>=<span class="string">'反选'</span> <span class="attr">onclick</span>=<span class="string">'selrev();'</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'submit'</span> <span class="attr">onclick</span>=<span class="string">'return confirm("删除选定文件?");'</span> <span class="attr">value</span>=<span class="string">'删除选定'</span>&gt;</span></div><div class="line"></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">'javascript'</span>&gt;</span><span class="javascript"></span></div><div class="line">		<span class="function"><span class="keyword">function</span> <span class="title">selrev</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">with</span>(<span class="built_in">document</span>.myform) &#123;</div><div class="line">				<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;elements.length;i++) &#123;</div><div class="line">					thiselm = elements[i];</div><div class="line">					<span class="keyword">if</span>(thiselm.name.match(<span class="regexp">/dfile\[]/</span>))	thiselm.checked = !thiselm.checked;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		alert(<span class="string">'完成.'</span>);</div><div class="line">		<span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="php"><span class="meta">&lt;?</span></span></div><div class="line"></div><div class="line">		<span class="keyword">elseif</span>($_REQUEST[<span class="string">"myaction"</span>]==<span class="string">"dodelete"</span>):</div><div class="line">			set_time_limit(<span class="number">0</span>);</div><div class="line">			<span class="keyword">if</span> ($_POST[<span class="string">'password'</span>] != $password) <span class="keyword">die</span>(<span class="string">"输入的密码不正确，请重新输入。"</span>);</div><div class="line"></div><div class="line">			$dfile = $_POST[<span class="string">"dfile"</span>]; </div><div class="line">			<span class="keyword">echo</span> <span class="string">"正在删除文件...</span></div><div class="line"></div><div class="line">		";</div><div class="line">			<span class="keyword">if</span>(is_array($dfile))&#123;</div><div class="line">				<span class="keyword">for</span>($i=count($dfile)<span class="number">-1</span>;$i&gt;=<span class="number">0</span>;$i--)&#123;</div><div class="line">					<span class="keyword">if</span>(is_file($dfile[$i]))&#123;</div><div class="line">						<span class="keyword">if</span>(@unlink($dfile[$i]))&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"已删除文件: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;<span class="keyword">else</span>&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"删除文件失败: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;</div><div class="line">					&#125;<span class="keyword">else</span>&#123;</div><div class="line">						<span class="keyword">if</span>(@rmdir($dfile[$i]))&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"已删除目录: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;<span class="keyword">else</span>&#123;</div><div class="line">							<span class="keyword">echo</span> <span class="string">"删除目录失败: $dfile[$i]</span></div><div class="line">		";</div><div class="line">						&#125;				</div><div class="line">					&#125;</div><div class="line"></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">echo</span> <span class="string">"</span></div><div class="line">		完成.</div><div class="line"></div><div class="line">		&lt;input type='button' value='返回' onclick=\"window.location='$_SERVER[PHP_SELF]';\"&gt;</div><div class="line"></div><div class="line">				 &lt;script language='javascript'&gt;('完成.');&lt;/script&gt;";</div><div class="line"></div><div class="line">		<span class="keyword">endif</span>;</div><div class="line"></div><div class="line">		<span class="meta">?&gt;</span></div><div class="line">		  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span></div><div class="line">    	<span class="tag">&lt;<span class="name">p</span>&gt;</span>&amp;copy; 2011 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.eincy.com"</span>&gt;</span>EinCy<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"eincy"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/06/30/php-zip/" class="archive-article-date">
  	<time datetime="2012-06-30T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-06-30</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/zip/">zip</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/php/">php</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-web-js-dnd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/06/20/web-js-dnd/">js拖动</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"&lt;a href="</span><span class="attr">http:</span>//<span class="attr">www.w3.org</span>/<span class="attr">1999</span>/<span class="attr">xhtml</span>"&gt;</span>http://www.w3.org/1999/xhtml<span class="tag">&lt;/<span class="name">a</span>&gt;</span>"&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">runat</span>=<span class="string">"server"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">javascript</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line"><span class="keyword">var</span> intX;</div><div class="line"></div><div class="line"><span class="keyword">var</span> intY;</div><div class="line"></div><div class="line"><span class="keyword">var</span> blnDrag = <span class="literal">false</span>; <span class="comment">//鼠标是否已经按下</span></div><div class="line"></div><div class="line"><span class="comment">//鼠标按下</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MouseDown</span>(<span class="params">event,id</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">//鼠标按下</span></div><div class="line"></div><div class="line">blnDrag = <span class="literal">true</span>;</div><div class="line"></div><div class="line">intX = event.clientX - GetDiv(id).style.pixelLeft;</div><div class="line"></div><div class="line">intY = event.clientY - GetDiv(id).style.pixelTop;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//鼠标拖动</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">DragDiv</span>(<span class="params">event,id</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">//判断鼠标是否已经按下</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> (!blnDrag) &#123;</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">GetDiv(id).style.pixelLeft = event.clientX - intX;</div><div class="line"></div><div class="line">GetDiv(id).style.pixelTop = event.clientY - intY;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//鼠标松开时</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mouseUp</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">//鼠标没有按下</span></div><div class="line"></div><div class="line">blnDrag = <span class="literal">false</span>;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//得到DIV</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetDiv</span>(<span class="params">id</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"form1"</span> <span class="attr">runat</span>=<span class="string">"server"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span> <span class="attr">style</span>=<span class="string">"CURSOR: move; POSITION: absolute;  WIDTH: 140px; HEIGHT: 112px; background-color:Red"</span>     <span class="attr">onmousemove</span>=<span class="string">"DragDiv(event,this.id)"</span>     <span class="attr">onmousedown</span>=<span class="string">"MouseDown(event,this.id)"</span>     <span class="attr">onmouseup</span>=<span class="string">"mouseUp()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/06/20/web-js-dnd/" class="archive-article-date">
  	<time datetime="2012-06-20T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-06-20</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/web前端/">web前端</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-web-js-lightbox" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2012/06/20/web-js-lightbox/">全屏屏蔽、自动居中的lightBox</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"Chomo"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"start"</span> <span class="attr">href</span>=<span class="string">"http://www.14px.com"</span> <span class="attr">title</span>=<span class="string">"Home"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>全屏屏蔽、自动居中的lightBox<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">* &#123; margin:0; padding:0; &#125;</div><div class="line">html,body &#123; height:100%; overflow:hidden; font:12px/1.5 simsun;&#125;</div><div class="line">.myPage &#123; line-height:3; overflow:auto; width:100%; height:100%;&#125;</div><div class="line">.lightBox,</div><div class="line">.popupCover,</div><div class="line">.popupIframe,</div><div class="line">.popupComponent &#123; position:absolute; left:0; top:0; width:100%; height:100%;&#125;</div><div class="line">.popupComponent &#123; z-index:2; display:none;&#125;</div><div class="line">.popupIframe &#123; display:none; _display:block; _filter:alpha(opacity=0);&#125;</div><div class="line">.popupCover &#123; background:#000; opacity:0.7; *filter:alpha(opacity=70);&#125;</div><div class="line">.lightBox &#123; text-align:center; overflow:auto;&#125;</div><div class="line">.lightBoxContent &#123; display:inline-block; *display:inline; zoom:1; width:300px; padding:10px; background:#fff; border:5px solid #00b4ff; vertical-align:middle;&#125;</div><div class="line">.lightBoxMaxHeight &#123; display:inline-block; vertical-align:middle; height:100%; *height:99.5%; width:1px; overflow:hidden; margin-left:-1px;&#125;</div><div class="line">.lightBoxWrapper &#123; display:inline-block; *display:inline; zoom:1; text-align:left;&#125;</div><div class="line">.lightBoxClose &#123; color:#f00;&#125;</div><div class="line">.lightBoxSubmit &#123; margin-top:10px; padding-top:5px; border-top:1px solid #ccc;&#125;</div><div class="line">.lightBoxSubmit input &#123; font-size:12px; padding:0 10px; overflow:visible; margin:0 5px;&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupComponent"</span> <span class="attr">id</span>=<span class="string">"lightBox"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">class</span>=<span class="string">"popupIframe"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupCover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBox"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"lightBoxMaxHeight"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxContent"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxWrapper"</span>&gt;</span></div><div class="line">                当提示小于一行时文字居中<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxSubmit"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"确定"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox')"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"取消"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox')"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupComponent"</span> <span class="attr">id</span>=<span class="string">"lightBox2"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">class</span>=<span class="string">"popupIframe"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popupCover"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBox"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxContent"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxWrapper"</span>&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">                 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度 当内容已经超过了一屏的高度<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lightBoxSubmit"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"确定"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox2')"</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"取消"</span> <span class="attr">onclick</span>=<span class="string">"hideLayer('lightBox2')"</span> /&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"lightBoxMaxHeight"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"myPage"</span>&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"位于第一屏的按钮"</span> <span class="attr">onclick</span>=<span class="string">"showLayer('lightBox')"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">option</span>&gt;</span>一个用于测试IE6中是否能覆盖住的select<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">option</span>&gt;</span>又一个用于测试IE6中是否能覆盖住的select<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"位于第二屏中的按钮"</span> <span class="attr">onclick</span>=<span class="string">"showLayer('lightBox')"</span> /&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"当内容已经超过了一屏的高度"</span> <span class="attr">onclick</span>=<span class="string">"showLayer('lightBox2')"</span> /&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span>假装很丰富的内容<span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showLayer</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(id).style.display = <span class="string">"block"</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hideLayer</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(id).style.display = <span class="string">"none"</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2012/06/20/web-js-lightbox/" class="archive-article-date">
  	<time datetime="2012-06-20T10:09:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2012-06-20</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lightbox/">lightbox</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/web前端/">web前端</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/15/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/17/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 bianle
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/工具-chrome扩展/" style="font-size: 10px;">-工具 -chrome扩展</a> <a href="/tags/Dr-com/" style="font-size: 10px;">Dr.com</a> <a href="/tags/Gravatar/" style="font-size: 10px;">Gravatar</a> <a href="/tags/JPA/" style="font-size: 10px;">JPA</a> <a href="/tags/QRCode/" style="font-size: 10px;">QRCode</a> <a href="/tags/SecureCrt/" style="font-size: 10px;">SecureCrt</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/awt/" style="font-size: 10px;">awt</a> <a href="/tags/bt5/" style="font-size: 11.11px;">bt5</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/cmd/" style="font-size: 11.11px;">cmd</a> <a href="/tags/css/" style="font-size: 13.33px;">css</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/db/" style="font-size: 11.11px;">db</a> <a href="/tags/db2/" style="font-size: 10px;">db2</a> <a href="/tags/dbcp/" style="font-size: 10px;">dbcp</a> <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/dnf/" style="font-size: 10px;">dnf</a> <a href="/tags/eclipse/" style="font-size: 15.56px;">eclipse</a> <a href="/tags/editplus/" style="font-size: 10px;">editplus</a> <a href="/tags/emacs/" style="font-size: 12.22px;">emacs</a> <a href="/tags/error/" style="font-size: 10px;">error</a> <a href="/tags/extjs/" style="font-size: 11.11px;">extjs</a> <a href="/tags/firefox/" style="font-size: 10px;">firefox</a> <a href="/tags/flash/" style="font-size: 10px;">flash</a> <a href="/tags/flex/" style="font-size: 11.11px;">flex</a> <a href="/tags/frameset/" style="font-size: 10px;">frameset</a> <a href="/tags/ghost/" style="font-size: 10px;">ghost</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/gwt/" style="font-size: 13.33px;">gwt</a> <a href="/tags/gxt/" style="font-size: 10px;">gxt</a> <a href="/tags/heap/" style="font-size: 10px;">heap</a> <a href="/tags/hexo/" style="font-size: 11.11px;">hexo</a> <a href="/tags/hibernate/" style="font-size: 11.11px;">hibernate</a> <a href="/tags/html/" style="font-size: 16.67px;">html</a> <a href="/tags/html5/" style="font-size: 11.11px;">html5</a> <a href="/tags/httpclient/" style="font-size: 10px;">httpclient</a> <a href="/tags/i18n/" style="font-size: 10px;">i18n</a> <a href="/tags/idea/" style="font-size: 10px;">idea</a> <a href="/tags/ie/" style="font-size: 13.33px;">ie</a> <a href="/tags/java/" style="font-size: 18.89px;">java</a> <a href="/tags/jdbc/" style="font-size: 11.11px;">jdbc</a> <a href="/tags/jdk/" style="font-size: 10px;">jdk</a> <a href="/tags/jquery/" style="font-size: 13.33px;">jquery</a> <a href="/tags/jre/" style="font-size: 10px;">jre</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/jsoup/" style="font-size: 10px;">jsoup</a> <a href="/tags/life/" style="font-size: 10px;">life</a> <a href="/tags/lightbox/" style="font-size: 10px;">lightbox</a> <a href="/tags/linux/" style="font-size: 17.78px;">linux</a> <a href="/tags/log4j/" style="font-size: 10px;">log4j</a> <a href="/tags/maven/" style="font-size: 13.33px;">maven</a> <a href="/tags/mysql/" style="font-size: 11.11px;">mysql</a> <a href="/tags/nano/" style="font-size: 10px;">nano</a> <a href="/tags/native2ascii/" style="font-size: 10px;">native2ascii</a> <a href="/tags/nexus/" style="font-size: 10px;">nexus</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/ngrok/" style="font-size: 10px;">ngrok</a> <a href="/tags/openshift/" style="font-size: 10px;">openshift</a> <a href="/tags/openwrt/" style="font-size: 10px;">openwrt</a> <a href="/tags/oracle/" style="font-size: 16.67px;">oracle</a> <a href="/tags/p2p/" style="font-size: 10px;">p2p</a> <a href="/tags/php/" style="font-size: 12.22px;">php</a> <a href="/tags/python/" style="font-size: 14.44px;">python</a> <a href="/tags/qq/" style="font-size: 10px;">qq</a> <a href="/tags/red-hat/" style="font-size: 10px;">red hat</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/resize/" style="font-size: 10px;">resize</a> <a href="/tags/robot/" style="font-size: 10px;">robot</a> <a href="/tags/root/" style="font-size: 10px;">root</a> <a href="/tags/rss/" style="font-size: 10px;">rss</a> <a href="/tags/runcode/" style="font-size: 10px;">runcode</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/sonatype/" style="font-size: 10px;">sonatype</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/sql-server/" style="font-size: 11.11px;">sql server</a> <a href="/tags/sql-server/" style="font-size: 10px;">sql-server</a> <a href="/tags/ssh/" style="font-size: 11.11px;">ssh</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/string/" style="font-size: 10px;">string</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/swf/" style="font-size: 10px;">swf</a> <a href="/tags/swing/" style="font-size: 10px;">swing</a> <a href="/tags/swt/" style="font-size: 10px;">swt</a> <a href="/tags/telnet/" style="font-size: 10px;">telnet</a> <a href="/tags/tomcat/" style="font-size: 13.33px;">tomcat</a> <a href="/tags/trim/" style="font-size: 10px;">trim</a> <a href="/tags/trunc/" style="font-size: 10px;">trunc</a> <a href="/tags/ubuntu/" style="font-size: 12.22px;">ubuntu</a> <a href="/tags/uuid/" style="font-size: 10px;">uuid</a> <a href="/tags/vbs/" style="font-size: 10px;">vbs</a> <a href="/tags/vi/" style="font-size: 10px;">vi</a> <a href="/tags/vim/" style="font-size: 11.11px;">vim</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/vpn/" style="font-size: 10px;">vpn</a> <a href="/tags/web/" style="font-size: 13.33px;">web</a> <a href="/tags/web-server/" style="font-size: 10px;">web server</a> <a href="/tags/websocket/" style="font-size: 10px;">websocket</a> <a href="/tags/wget/" style="font-size: 10px;">wget</a> <a href="/tags/whois/" style="font-size: 10px;">whois</a> <a href="/tags/win7/" style="font-size: 10px;">win7</a> <a href="/tags/windows/" style="font-size: 13.33px;">windows</a> <a href="/tags/wordpress/" style="font-size: 14.44px;">wordpress</a> <a href="/tags/xpath/" style="font-size: 10px;">xpath</a> <a href="/tags/zip/" style="font-size: 10px;">zip</a> <a href="/tags/乱码/" style="font-size: 11.11px;">乱码</a> <a href="/tags/二维码/" style="font-size: 10px;">二维码</a> <a href="/tags/云/" style="font-size: 10px;">云</a> <a href="/tags/半透明/" style="font-size: 10px;">半透明</a> <a href="/tags/反射/" style="font-size: 10px;">反射</a> <a href="/tags/变态/" style="font-size: 10px;">变态</a> <a href="/tags/命令行/" style="font-size: 10px;">命令行</a> <a href="/tags/图标/" style="font-size: 10px;">图标</a> <a href="/tags/备份/" style="font-size: 10px;">备份</a> <a href="/tags/大小写/" style="font-size: 10px;">大小写</a> <a href="/tags/恶搞/" style="font-size: 10px;">恶搞</a> <a href="/tags/排序算法/" style="font-size: 10px;">排序算法</a> <a href="/tags/插件/" style="font-size: 10px;">插件</a> <a href="/tags/摄影/" style="font-size: 10px;">摄影</a> <a href="/tags/播放器/" style="font-size: 10px;">播放器</a> <a href="/tags/数字/" style="font-size: 11.11px;">数字</a> <a href="/tags/校园网/" style="font-size: 10px;">校园网</a> <a href="/tags/正则/" style="font-size: 11.11px;">正则</a> <a href="/tags/油猴/" style="font-size: 10px;">油猴</a> <a href="/tags/注册表/" style="font-size: 10px;">注册表</a> <a href="/tags/渐变/" style="font-size: 10px;">渐变</a> <a href="/tags/状态栏/" style="font-size: 10px;">状态栏</a> <a href="/tags/环境变量/" style="font-size: 10px;">环境变量</a> <a href="/tags/生活/" style="font-size: 10px;">生活</a> <a href="/tags/端口/" style="font-size: 11.11px;">端口</a> <a href="/tags/算法/" style="font-size: 11.11px;">算法</a> <a href="/tags/网址/" style="font-size: 10px;">网址</a> <a href="/tags/自动更新/" style="font-size: 10px;">自动更新</a> <a href="/tags/越狱/" style="font-size: 10px;">越狱</a> <a href="/tags/软件/" style="font-size: 11.11px;">软件</a> <a href="/tags/还原/" style="font-size: 10px;">还原</a> <a href="/tags/远程桌面/" style="font-size: 10px;">远程桌面</a>
    			</div>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">边乐，天朝帝都一码农</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>